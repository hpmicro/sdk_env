<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__mipi__dsi__drv_8c" kind="file" language="C++">
    <compoundname>hpm_mipi_dsi_drv.c</compoundname>
    <includes refid="hpm__mipi__dsi__drv_8h" local="yes">hpm_mipi_dsi_drv.h</includes>
    <incdepgraph>
      <node id="3">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>hpm_mipi_dsi_drv.h</label>
        <link refid="hpm__mipi__dsi__drv_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>drivers/src/hpm_mipi_dsi_drv.c</label>
        <link refid="hpm__mipi__dsi__drv_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>hpm_mipi_dsi_regs.h</label>
        <link refid="hpm__mipi__dsi__regs_8h"/>
      </node>
      <node id="4">
        <label>assert.h</label>
      </node>
      <node id="9">
        <label>hpm_soc.h</label>
      </node>
      <node id="5">
        <label>stdbool.h</label>
      </node>
      <node id="6">
        <label>stdint.h</label>
      </node>
      <node id="8">
        <label>stdlib.h</label>
      </node>
      <node id="7">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structmipi__dsi__packet" prot="public">mipi_dsi_packet</innerclass>
    <sectiondef kind="define">
      <memberdef kind="define" id="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" prot="public" static="no">
        <name>MIPI_WAIT_COND</name>
        <param><defname>cond</defname></param>
        <param><defname>timeout_us</defname></param>
        <initializer>({ \
    volatile uint32_t timeout_cycle = 1000UL * (timeout_us); \
    for (;;) { \
        if (cond) \
            break; \
        if (timeout_us &amp;&amp; timeout_cycle == 0) { \
            break; \
        } \
        timeout_cycle--; \
    } \
    (cond) ? true : false; \
})</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="10" column="9" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="10" bodyend="22"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="typedef">
      <memberdef kind="typedef" id="hpm__mipi__dsi__drv_8c_1ac5b194b45c23ddaa700b105fb9d3003d" prot="public" static="no">
        <type>struct <ref refid="structmipi__dsi__packet" kindref="compound">mipi_dsi_packet</ref></type>
        <definition>typedef struct mipi_dsi_packet mipi_dsi_packet_t</definition>
        <argsstring></argsstring>
        <name>mipi_dsi_packet_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="28" column="19"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a698ef74fc2e7923500a6c758dd617bdc" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_packet_format_is_short</definition>
        <argsstring>(uint8_t type)</argsstring>
        <name>mipi_dsi_packet_format_is_short</name>
        <param>
          <type>uint8_t</type>
          <declname>type</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>mipi_dsi_packet_format_is_short - check if a packet is of the short format <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>type</parametername>
</parameternamelist>
<parameterdescription>
<para>MIPI DSI data type of the packet</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>: true if the packet for the given data type is a short packet, false otherwise. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="37" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="37" bodyend="56"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a5c726aa149a2f3ca144a335b218c9e20" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_packet_format_is_long</definition>
        <argsstring>(uint8_t type)</argsstring>
        <name>mipi_dsi_packet_format_is_long</name>
        <param>
          <type>uint8_t</type>
          <declname>type</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>mipi_dsi_packet_format_is_long - check if a packet is of the long format <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>type</parametername>
</parameternamelist>
<parameterdescription>
<para>MIPI DSI data type of the packet</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>: true if the packet for the given data type is a long packet, false otherwise. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="65" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="65" bodyend="74"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a80d587e557befa4c380d9b4b239af9b6" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_create_packet</definition>
        <argsstring>(mipi_dsi_packet_t *packet, const mipi_dsi_msg_t *msg)</argsstring>
        <name>mipi_dsi_create_packet</name>
        <param>
          <type><ref refid="hpm__mipi__dsi__drv_8c_1ac5b194b45c23ddaa700b105fb9d3003d" kindref="member">mipi_dsi_packet_t</ref> *</type>
          <declname>packet</declname>
        </param>
        <param>
          <type>const <ref refid="group__mipi__dsi__interface_1ga763fc6fadef88c08a641c22b3a24d41a" kindref="member">mipi_dsi_msg_t</ref> *</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>mipi_dsi_create_packet - create a packet from a message according to the DSI protocol <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>packet</parametername>
</parameternamelist>
<parameterdescription>
<para>pointer to a DSI packet structure </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>msg</parametername>
</parameternamelist>
<parameterdescription>
<para>message to translate into a packet</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>: true on success or false on failure. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="84" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="84" bodyend="113"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a5011faea2dca004576713f302138a1ae" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void mipi_dsi_config_format</definition>
        <argsstring>(MIPI_DSI_Type *ptr, mipi_dsi_pixel_format_t format)</argsstring>
        <name>mipi_dsi_config_format</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type><ref refid="group__mipi__dsi__interface_1ga1fa5986666bc2814b5d0b2d7ec7e093c" kindref="member">mipi_dsi_pixel_format_t</ref></type>
          <declname>format</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="115" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="115" bodyend="136"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1ae1858efc13a1f544615de89c92eb02fd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int mipi_dsi_get_hcomponent_lbcc</definition>
        <argsstring>(uint32_t lane_mbps, uint32_t pixel_clock_khz, uint32_t hcomponent)</argsstring>
        <name>mipi_dsi_get_hcomponent_lbcc</name>
        <param>
          <type>uint32_t</type>
          <declname>lane_mbps</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>pixel_clock_khz</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>hcomponent</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="139" column="12" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="139" bodyend="147"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1ac6aac46bb0dcbc6caf4fa101316a82b2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void mipi_dsi_video_para_config</definition>
        <argsstring>(MIPI_DSI_Type *ptr, mipi_dsi_config_t *cfg)</argsstring>
        <name>mipi_dsi_video_para_config</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type><ref refid="group__mipi__dsi__interface_1ga9294990dc22892276a789f7876aa29b8" kindref="member">mipi_dsi_config_t</ref> *</type>
          <declname>cfg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="149" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="149" bodyend="168"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a1254a7269e112defee60ca399350d349" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_genif_wait_w_pld_fifo_not_full</definition>
        <argsstring>(MIPI_DSI_Type *ptr)</argsstring>
        <name>mipi_dsi_genif_wait_w_pld_fifo_not_full</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="170" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="170" bodyend="174"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a4606f6c4ad7fa2b9782f8e39ecc447f5" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_genif_wait_cmd_fifo_not_full</definition>
        <argsstring>(MIPI_DSI_Type *ptr)</argsstring>
        <name>mipi_dsi_genif_wait_cmd_fifo_not_full</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="176" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="176" bodyend="180"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a96e57d1dec9e9fa9eb9afbdf980201bb" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool mipi_dsi_genif_wait_write_fifo_empty</definition>
        <argsstring>(MIPI_DSI_Type *ptr)</argsstring>
        <name>mipi_dsi_genif_wait_write_fifo_empty</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="182" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="182" bodyend="188"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a3f8288ca732071d68df33af0c8e44b81" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>static bool dw_mipi_dsi_read_from_fifo</definition>
        <argsstring>(MIPI_DSI_Type *ptr, const struct mipi_dsi_msg *msg)</argsstring>
        <name>dw_mipi_dsi_read_from_fifo</name>
        <param>
          <type><ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>const struct <ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref> *</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="190" column="13" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="190" bodyend="235"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mipi__dsi__drv_8c_1a3e541eb6a7ee62d0f2e480c5734aa43b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint32_t</type>
        <definition>static uint32_t get_le32</definition>
        <argsstring>(const uint8_t *p)</argsstring>
        <name>get_le32</name>
        <param>
          <type>const uint8_t *</type>
          <declname>p</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_mipi_dsi_drv.c" line="237" column="17" bodyfile="drivers/src/hpm_mipi_dsi_drv.c" bodystart="237" bodyend="240"/>
      </memberdef>
      <member refid="group__mipi__dsi__interface_1ga2cd59d5a3e9235189cba340df00e3fe4" kind="function"><name>mipi_dsi_get_defconfig_on_video</name></member>
      <member refid="group__mipi__dsi__interface_1ga68417443f77a7313a7aa507afd985c35" kind="function"><name>mipi_dsi_init</name></member>
      <member refid="group__mipi__dsi__interface_1ga0e5e1c977a6804257fcd7c49a02dafff" kind="function"><name>mipi_dsi_phy_poweron</name></member>
      <member refid="group__mipi__dsi__interface_1ga63f8e0d021a37da1fe67890b74afe682" kind="function"><name>mipi_dsi_phy_powerdown</name></member>
      <member refid="group__mipi__dsi__interface_1ga2759ad9e0b5586e39e063c9526b95c5a" kind="function"><name>mipi_dsi_video_mode_hs_transfer_enable</name></member>
      <member refid="group__mipi__dsi__interface_1gacd03b544cae2217f75a365e69332ddfc" kind="function"><name>mipi_dsi_video_mode_hs_transfer_disable</name></member>
      <member refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kind="function"><name>mipi_dsi_lp_cmd_transfer</name></member>
      <member refid="group__mipi__dsi__interface_1ga30bd309e291edcb95a186dc77db29413" kind="function"><name>mipi_dsi_set_maximum_return_packet_size</name></member>
      <member refid="group__mipi__dsi__interface_1ga0ecd2b1eab7fb25b0c0990963739d0b3" kind="function"><name>mipi_dsi_generic_write</name></member>
      <member refid="group__mipi__dsi__interface_1gaf3e2b115091ff2aa075135e218ccb741" kind="function"><name>mipi_dsi_generic_read</name></member>
      <member refid="group__mipi__dsi__interface_1ga03e3e4e0b46e78dec9ae8e8edc1798da" kind="function"><name>mipi_dsi_dcs_write_buffer</name></member>
      <member refid="group__mipi__dsi__interface_1ga72bc15bad6c33f623b6443f5d9d9955f" kind="function"><name>mipi_dsi_dcs_write</name></member>
      <member refid="group__mipi__dsi__interface_1gaad5f2c47e71c18d17d45c3d92424d2a3" kind="function"><name>mipi_dsi_dcs_read</name></member>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2023<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__mipi__dsi__drv_8h" kindref="compound">hpm_mipi_dsi_drv.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MIPI_WAIT_COND(cond,<sp/>timeout_us)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="11"><highlight class="preprocessor">({<sp/>\</highlight></codeline>
<codeline lineno="12"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>volatile<sp/>uint32_t<sp/>timeout_cycle<sp/>=<sp/>1000UL<sp/>*<sp/>(timeout_us);<sp/>\</highlight></codeline>
<codeline lineno="13"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>for<sp/>(;;)<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="14"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(cond)<sp/>\</highlight></codeline>
<codeline lineno="15"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>break;<sp/>\</highlight></codeline>
<codeline lineno="16"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(timeout_us<sp/>&amp;&amp;<sp/>timeout_cycle<sp/>==<sp/>0)<sp/>{<sp/>\</highlight></codeline>
<codeline lineno="17"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>break;<sp/>\</highlight></codeline>
<codeline lineno="18"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="19"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>timeout_cycle--;<sp/>\</highlight></codeline>
<codeline lineno="20"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="21"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>(cond)<sp/>?<sp/>true<sp/>:<sp/>false;<sp/>\</highlight></codeline>
<codeline lineno="22"><highlight class="preprocessor">})</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24" refid="structmipi__dsi__packet" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__packet" kindref="compound">mipi_dsi_packet</ref><sp/>{</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[4];<sp/></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref>;<sp/></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*<ref refid="structmipi__dsi__packet_1afdd13ad448cb65a89f980bb5e37d7769" kindref="member">payload</ref>;<sp/></highlight></codeline>
<codeline lineno="28"><highlight class="normal">}<sp/><ref refid="hpm__mipi__dsi__drv_8c_1ac5b194b45c23ddaa700b105fb9d3003d" kindref="member">mipi_dsi_packet_t</ref>;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a698ef74fc2e7923500a6c758dd617bdc" kindref="member">mipi_dsi_packet_format_is_short</ref>(uint8_t<sp/>type)</highlight></codeline>
<codeline lineno="38"><highlight class="normal">{</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(type)<sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aab0d09d4d783bbabaa05ac95c263c73f4" kindref="member">MIPI_DSI_SHUTDOWN_PERIPHERAL</ref>:</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa28d88df6f7291af85e0a51fd7147a160" kindref="member">MIPI_DSI_TURN_ON_PERIPHERAL</ref>:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aaa774468e236ee4542a4db6a2beb35d5f" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_0_PARAM</ref>:</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa205036e8e68e8fa707e963bdb469654c" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_1_PARAM</ref>:</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aafdcc34c735c1b9bdf76e8f59e2f292b5" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_2_PARAM</ref>:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aabe1cdd85ffbdfcd3cc270f3d7214cf3a" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_0_PARAM</ref>:</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa8038824bf21007f72ec02868dbc97ece" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_1_PARAM</ref>:</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aafa5be3e1fd951afa0fc3ea8f71156405" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_2_PARAM</ref>:</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa972beab4baaae8d8a3ad2edd47f87598" kindref="member">MIPI_DSI_DCS_SHORT_WRITE</ref>:</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa331b3d11995b32f4467d1113465db2d8" kindref="member">MIPI_DSI_DCS_SHORT_WRITE_PARAM</ref>:</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aab8728499ec3f0e7fe5d0da23b57ca6a4" kindref="member">MIPI_DSI_DCS_READ</ref>:</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa6a416169d2f2b2b1452b3eb853aab3d3" kindref="member">MIPI_DSI_SET_MAXIMUM_RETURN_PACKET_SIZE</ref>:</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="56"><highlight class="normal">}</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a5c726aa149a2f3ca144a335b218c9e20" kindref="member">mipi_dsi_packet_format_is_long</ref>(uint8_t<sp/>type)</highlight></codeline>
<codeline lineno="66"><highlight class="normal">{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(type)<sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa860b4cf24a21179fd4d91b2ac6fce3bb" kindref="member">MIPI_DSI_GENERIC_LONG_WRITE</ref>:</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa224f4bac097969779879b77e3d1d2ae0" kindref="member">MIPI_DSI_DCS_LONG_WRITE</ref>:</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal">}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a80d587e557befa4c380d9b4b239af9b6" kindref="member">mipi_dsi_create_packet</ref>(<ref refid="hpm__mipi__dsi__drv_8c_1ac5b194b45c23ddaa700b105fb9d3003d" kindref="member">mipi_dsi_packet_t</ref><sp/>*packet,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga763fc6fadef88c08a641c22b3a24d41a" kindref="member">mipi_dsi_msg_t</ref><sp/>*msg)</highlight></codeline>
<codeline lineno="85"><highlight class="normal">{</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!packet<sp/>||<sp/>!msg)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>do<sp/>some<sp/>minimum<sp/>sanity<sp/>checking<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="hpm__mipi__dsi__drv_8c_1a698ef74fc2e7923500a6c758dd617bdc" kindref="member">mipi_dsi_packet_format_is_short</ref>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="hpm__mipi__dsi__drv_8c_1a5c726aa149a2f3ca144a335b218c9e20" kindref="member">mipi_dsi_packet_format_is_long</ref>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref>))</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref><sp/>&gt;<sp/>3)</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(packet,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*packet));</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[0]<sp/>=<sp/>((msg-&gt;<ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref><sp/>&amp;<sp/>0x3)<sp/>&lt;&lt;<sp/>6)<sp/>|<sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>&amp;<sp/>0x3f);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a5c726aa149a2f3ca144a335b218c9e20" kindref="member">mipi_dsi_packet_format_is_long</ref>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref>))<sp/>{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[1]<sp/>=<sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref><sp/>&gt;&gt;<sp/>0)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[2]<sp/>=<sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref><sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref><sp/>=<sp/>msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref>;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1afdd13ad448cb65a89f980bb5e37d7769" kindref="member">payload</ref><sp/>=<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*)msg-&gt;<ref refid="structmipi__dsi__msg_1a73e62f4c7e45f0553fd0deeec06356a2" kindref="member">tx_buf</ref>;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*tx<sp/>=<sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*)msg-&gt;<ref refid="structmipi__dsi__msg_1a73e62f4c7e45f0553fd0deeec06356a2" kindref="member">tx_buf</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[1]<sp/>=<sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref><sp/>&gt;<sp/>0)<sp/>?<sp/>tx[0]<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet-&gt;<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>[2]<sp/>=<sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref><sp/>&gt;<sp/>1)<sp/>?<sp/>tx[1]<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="113"><highlight class="normal">}</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a5011faea2dca004576713f302138a1ae" kindref="member">mipi_dsi_config_format</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/><ref refid="group__mipi__dsi__interface_1ga1fa5986666bc2814b5d0b2d7ec7e093c" kindref="member">mipi_dsi_pixel_format_t</ref><sp/>format)</highlight></codeline>
<codeline lineno="116"><highlight class="normal">{</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>val<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>((uint8_t)format)<sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga43eac8e24619c41ac1d8683f04d257fdadcbc46fcbcc3bf4344d5ec65a91062b9" kindref="member">MIPI_DSI_FMT_RGB888</ref>:</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ae9e7e114f9745ea288321e639c401e00" kindref="member">MIPI_DSI_DPI_COLOR_CODING_DPI_COLOR_CODING_SET</ref>(0x05);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga43eac8e24619c41ac1d8683f04d257fdab24f5085453efc8b6e87d34f934c5093" kindref="member">MIPI_DSI_FMT_RGB666</ref>:</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ae9e7e114f9745ea288321e639c401e00" kindref="member">MIPI_DSI_DPI_COLOR_CODING_DPI_COLOR_CODING_SET</ref>(0x04)<sp/>|</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1aa378f48fe9ac81213a7301a3d597b405" kindref="member">MIPI_DSI_DPI_COLOR_CODING_LOOSELY18_EN_MASK</ref>;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga43eac8e24619c41ac1d8683f04d257fdac513dd871533080f0a12aeca4db7b99e" kindref="member">MIPI_DSI_FMT_RGB666_PACKED</ref>:</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ae9e7e114f9745ea288321e639c401e00" kindref="member">MIPI_DSI_DPI_COLOR_CODING_DPI_COLOR_CODING_SET</ref>(0x04);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gga43eac8e24619c41ac1d8683f04d257fda398af01c168c3e37c6dde8150ce9b582" kindref="member">MIPI_DSI_FMT_RGB565</ref>:</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ae9e7e114f9745ea288321e639c401e00" kindref="member">MIPI_DSI_DPI_COLOR_CODING_DPI_COLOR_CODING_SET</ref>(0x00);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1aa6054d2945657766e09053b4412bf6ad" kindref="member">DPI_COLOR_CODING</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="136"><highlight class="normal">}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Get<sp/>lane<sp/>byte<sp/>clock<sp/>cycles.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1ae1858efc13a1f544615de89c92eb02fd" kindref="member">mipi_dsi_get_hcomponent_lbcc</ref>(uint32_t<sp/>lane_mbps,<sp/>uint32_t<sp/>pixel_clock_khz,<sp/>uint32_t<sp/>hcomponent)</highlight></codeline>
<codeline lineno="140"><highlight class="normal">{</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>lbcc<sp/>=<sp/>hcomponent<sp/>*<sp/>lane_mbps<sp/>*<sp/>1000<sp/>/<sp/>8;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pixel_clock_khz)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1ga0669fb0e6897d173254bc93724af0d07" kindref="member">HPM_DIV_ROUND_CLOSEST</ref>(lbcc,<sp/>pixel_clock_khz);</highlight></codeline>
<codeline lineno="147"><highlight class="normal">}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1ac6aac46bb0dcbc6caf4fa101316a82b2" kindref="member">mipi_dsi_video_para_config</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/><ref refid="group__mipi__dsi__interface_1ga9294990dc22892276a789f7876aa29b8" kindref="member">mipi_dsi_config_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="150"><highlight class="normal">{</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mipi__dsi__interface_1gaf277c8811539e358310875115dcc5e45" kindref="member">mipi_video_para_t</ref><sp/>*video_para<sp/>=<sp/>&amp;cfg-&gt;<ref refid="structmipi__dsi__config_1a0f5ff64da61dd05251171576fdf0553f" kindref="member">video_para</ref>;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>htotal,<sp/>lbcc;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>VID_HXXXX_TIME<sp/>uint<sp/>is<sp/>lbcc(lane<sp/>byte<sp/>clock<sp/>=<sp/>lane_mbps<sp/>/<sp/>8)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>htotal<sp/>=<sp/>video_para-&gt;<ref refid="structmipi__video__para_1aecffc45b11e4b30e4a0b65053695865c" kindref="member">hactive</ref><sp/>+<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a726f5e57287972d38bdf42e4b805e7d5" kindref="member">hsync_len</ref><sp/>+</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>video_para-&gt;<ref refid="structmipi__video__para_1a4391a2b8b0f185df4818b4ac77c626a6" kindref="member">hback_porch</ref><sp/>+<sp/>video_para-&gt;<ref refid="structmipi__video__para_1aab7580c89ee0f08115ef6f72ed2222f2" kindref="member">hfront_porch</ref>;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>lbcc<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1ae1858efc13a1f544615de89c92eb02fd" kindref="member">mipi_dsi_get_hcomponent_lbcc</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a3de80143366a57380cab62a8672b932a" kindref="member">lane_mbps</ref>,<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a47f5ffa7445b0ed77cec331eeb8d6ebe" kindref="member">pixel_clock_khz</ref>,<sp/>htotal);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a45e2ab2525e4b687989a9d99861c8f9d" kindref="member">VID_HLINE_TIME</ref><sp/>=<sp/>lbcc;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>lbcc<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1ae1858efc13a1f544615de89c92eb02fd" kindref="member">mipi_dsi_get_hcomponent_lbcc</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a3de80143366a57380cab62a8672b932a" kindref="member">lane_mbps</ref>,<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a47f5ffa7445b0ed77cec331eeb8d6ebe" kindref="member">pixel_clock_khz</ref>,<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a726f5e57287972d38bdf42e4b805e7d5" kindref="member">hsync_len</ref>);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a64e6eb18d55a87387f0fe8583343823f" kindref="member">VID_HSA_TIME</ref><sp/>=<sp/>lbcc;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/>lbcc<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1ae1858efc13a1f544615de89c92eb02fd" kindref="member">mipi_dsi_get_hcomponent_lbcc</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a3de80143366a57380cab62a8672b932a" kindref="member">lane_mbps</ref>,<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a47f5ffa7445b0ed77cec331eeb8d6ebe" kindref="member">pixel_clock_khz</ref>,<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a4391a2b8b0f185df4818b4ac77c626a6" kindref="member">hback_porch</ref>);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a0bb6893d35a5b19982ef9f9d0f086ca8" kindref="member">VID_HBP_TIME</ref><sp/>=<sp/>lbcc;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a73ebc845b6de3574505111fe172fc7e4" kindref="member">VID_VACTIVE_LINES</ref><sp/>=<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a9940bde696ec96de08afe46bce76ee7a" kindref="member">vactive</ref>;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a8e3d3f75ccbfe53444ddebec12af335a" kindref="member">VID_VSA_LINES</ref><sp/>=<sp/>video_para-&gt;<ref refid="structmipi__video__para_1ae1c966be67c51391075c69fce9ef81ed" kindref="member">vsync_len</ref>;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1acdc2dcf75f356b9296bde73a46e07c0e" kindref="member">VID_VBP_LINES</ref><sp/>=<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a71433bb54da159a5f671585e7d6947e7" kindref="member">vback_porch</ref>;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1adf8ad4036f98ef94e7ca1e9e2bfd3342" kindref="member">VID_VFP_LINES</ref><sp/>=<sp/>video_para-&gt;<ref refid="structmipi__video__para_1a88f82971dd4ac39a193a705dc3aa3fd4" kindref="member">vfront_porch</ref>;</highlight></codeline>
<codeline lineno="168"><highlight class="normal">}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a1254a7269e112defee60ca399350d349" kindref="member">mipi_dsi_genif_wait_w_pld_fifo_not_full</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="171"><highlight class="normal">{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>mask<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1add35f83934794e9a65acd1f8e7c9c88b" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_PLD_W_FULL_MASK</ref>;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" kindref="member">MIPI_WAIT_COND</ref>(!(ptr-&gt;<ref refid="structMIPI__DSI__Type_1aba23d29e3e93d77082874bc368c6e5ec" kindref="member">CMD_PKT_STATUS</ref><sp/>&amp;<sp/>mask),<sp/>10000);</highlight></codeline>
<codeline lineno="174"><highlight class="normal">}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a4606f6c4ad7fa2b9782f8e39ecc447f5" kindref="member">mipi_dsi_genif_wait_cmd_fifo_not_full</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="177"><highlight class="normal">{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>mask<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1adfd9220808cabfc5353bc67b18fe2399" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_CMD_FULL_MASK</ref>;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" kindref="member">MIPI_WAIT_COND</ref>(!(ptr-&gt;<ref refid="structMIPI__DSI__Type_1aba23d29e3e93d77082874bc368c6e5ec" kindref="member">CMD_PKT_STATUS</ref><sp/>&amp;<sp/>mask),<sp/>10000);</highlight></codeline>
<codeline lineno="180"><highlight class="normal">}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a96e57d1dec9e9fa9eb9afbdf980201bb" kindref="member">mipi_dsi_genif_wait_write_fifo_empty</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="183"><highlight class="normal">{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>mask<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ad2052fe0201646927f361d047be109cb" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_CMD_EMPTY_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a8d821094c15bd96187104aa4ac1668ad" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_PLD_W_EMPTY_MASK</ref>;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" kindref="member">MIPI_WAIT_COND</ref>((ptr-&gt;<ref refid="structMIPI__DSI__Type_1aba23d29e3e93d77082874bc368c6e5ec" kindref="member">CMD_PKT_STATUS</ref><sp/>&amp;<sp/>mask)<sp/>==<sp/>mask,<sp/>10000);</highlight></codeline>
<codeline lineno="188"><highlight class="normal">}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a3f8288ca732071d68df33af0c8e44b81" kindref="member">dw_mipi_dsi_read_from_fifo</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>*msg)</highlight></codeline>
<codeline lineno="192"><highlight class="normal">{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*payload<sp/>=<sp/>(uint8_t<sp/>*)msg-&gt;<ref refid="structmipi__dsi__msg_1aa21b5be5cdfac9411601c83f72e58405" kindref="member">rx_buf</ref>;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>length;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>val;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>mask;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>mask<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a8949d51d544e17b82ff84ac32d912c1a" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_RD_CMD_BUSY_MASK</ref>;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" kindref="member">MIPI_WAIT_COND</ref>(!(ptr-&gt;<ref refid="structMIPI__DSI__Type_1aba23d29e3e93d77082874bc368c6e5ec" kindref="member">CMD_PKT_STATUS</ref><sp/>&amp;<sp/>mask),<sp/>10000);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Receive<sp/>payload<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(length<sp/>=<sp/>msg-&gt;<ref refid="structmipi__dsi__msg_1a87c419438aa58f814ad4287ffef82efd" kindref="member">rx_len</ref>;<sp/>length;<sp/>length<sp/>-=<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mask<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1af776ab4f36431dea281f5696988c0fe3" kindref="member">MIPI_DSI_CMD_PKT_STATUS_GEN_PLD_R_EMPTY_MASK</ref>;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1abac64317d3c3e6ed29d7d08585c6a44d" kindref="member">MIPI_WAIT_COND</ref>(!(ptr-&gt;<ref refid="structMIPI__DSI__Type_1aba23d29e3e93d77082874bc368c6e5ec" kindref="member">CMD_PKT_STATUS</ref><sp/>&amp;<sp/>mask),<sp/>10000);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a7123b19e64106bac338c2dbd0b51d37e" kindref="member">GEN_PLD_DATA</ref>;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(length)<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[2]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/>16)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fall<sp/>through<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[1]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fall<sp/>through<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[0]<sp/>=<sp/>val<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[0]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/><sp/>0)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[1]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/><sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[2]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/>16)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[3]<sp/>=<sp/>(val<sp/>&gt;&gt;<sp/>24)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload<sp/>+=<sp/>4;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="235"><highlight class="normal">}</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint32_t<sp/><ref refid="hpm__mipi__dsi__drv_8c_1a3e541eb6a7ee62d0f2e480c5734aa43b" kindref="member">get_le32</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*p)</highlight></codeline>
<codeline lineno="238"><highlight class="normal">{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>p[0]<sp/>|<sp/>p[1]<sp/>&lt;&lt;<sp/>8<sp/>|<sp/>p[2]<sp/>&lt;&lt;<sp/>16<sp/>|<sp/>p[3]<sp/>&lt;&lt;<sp/>24;</highlight></codeline>
<codeline lineno="240"><highlight class="normal">}</highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga2cd59d5a3e9235189cba340df00e3fe4" kindref="member">mipi_dsi_get_defconfig_on_video</ref>(<ref refid="group__mipi__dsi__interface_1ga9294990dc22892276a789f7876aa29b8" kindref="member">mipi_dsi_config_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="243"><highlight class="normal">{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mipi__dsi__interface_1gaf277c8811539e358310875115dcc5e45" kindref="member">mipi_video_para_t</ref><sp/>video_para<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.pixel_clock_khz<sp/>=<sp/>59400,</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hactive<sp/>=<sp/>800,</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hsync_len<sp/>=<sp/>8,</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hback_porch<sp/>=<sp/>48,</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hfront_porch<sp/>=<sp/>52,</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.vsync_len<sp/>=<sp/>6,</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.vactive<sp/>=<sp/>1280,</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.vback_porch<sp/>=<sp/>16,</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.vfront_porch<sp/>=<sp/>15</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a4c427e50891c304f57c7fa7a1c0462c7" kindref="member">lanes</ref><sp/>=<sp/>4;</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a1ae537548a46bfce2357d5af7c2a9b33" kindref="member">channel</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a3de80143366a57380cab62a8672b932a" kindref="member">lane_mbps</ref><sp/>=<sp/>500;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a1de38f154f36d55c5733f80c51d45064" kindref="member">disable_eotp</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a1a16b36b4977be4da9ff3a03d4ad4114" kindref="member">pixel_format</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga43eac8e24619c41ac1d8683f04d257fdadcbc46fcbcc3bf4344d5ec65a91062b9" kindref="member">MIPI_DSI_FMT_RGB888</ref>;</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a8dab71b27f5e99fa62ae7e59048bb369" kindref="member">video_mode</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga55a2ca7a70baa137fe79524dd13fb9d5a3f909e599816224c47aa72b77e67cc7d" kindref="member">MIPI_DSI_VIDEO_MODE_BURST</ref>;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a0f5ff64da61dd05251171576fdf0553f" kindref="member">video_para</ref><sp/>=<sp/>video_para;</highlight></codeline>
<codeline lineno="263"><highlight class="normal">}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga68417443f77a7313a7aa507afd985c35" kindref="member">mipi_dsi_init</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/><ref refid="group__mipi__dsi__interface_1ga9294990dc22892276a789f7876aa29b8" kindref="member">mipi_dsi_config_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="266"><highlight class="normal">{</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>val;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>PWR<sp/>need<sp/>reset<sp/>when<sp/>config<sp/>register<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a07a582ca800a6ea8e22033d8fc2d0eca" kindref="member">PWR_UP</ref><sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a209491512aa499aa5de1edf5c32be646" kindref="member">~MIPI_DSI_PWR_UP_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>escclk<sp/>config<sp/>about<sp/>20MHz<sp/>and<sp/>esc_clk_div<sp/>&gt;<sp/>1*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>esc_clk_div<sp/>=<sp/><ref refid="group__common__interface_1gadb783055135de11cb78f05d7ad02e8b7" kindref="member">HPM_DIV_ROUND_UP</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a3de80143366a57380cab62a8672b932a" kindref="member">lane_mbps</ref><sp/>/<sp/>8,<sp/>20);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>esc_clk_div<sp/>=<sp/>esc_clk_div<sp/>&lt;=<sp/>1<sp/>?<sp/>2<sp/>:<sp/>esc_clk_div;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a7bf9c4384fa9538bb3ded6b5e12a1bff" kindref="member">CLKMGR_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a5812396a82342a7a40ce5306aea19432" kindref="member">MIPI_DSI_CLKMGR_CFG_TO_CLK_DIVISION_SET</ref>(10)<sp/>|</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1ad254e73d6affb8c23755dd9e9893da5f" kindref="member">MIPI_DSI_CLKMGR_CFG_TX_ESC_CLK_DIVISION_SET</ref>(esc_clk_div);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__drv_8c_1a5011faea2dca004576713f302138a1ae" kindref="member">mipi_dsi_config_format</ref>(ptr,<sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a1a16b36b4977be4da9ff3a03d4ad4114" kindref="member">pixel_format</ref>);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1acda02e21f613e8ab5b9a1b44e41cc628" kindref="member">DPI_VCID</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a900fe6260e6f878b937a9dfce4311748" kindref="member">MIPI_DSI_DPI_VCID_DPI_VCID_SET</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a1ae537548a46bfce2357d5af7c2a9b33" kindref="member">channel</ref>);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a9602193d8dcb1e06af258febd6597fa8" kindref="member">DPI_LP_CMD_TIM</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a055f5ed0778c47dfbf70b148e78a6a57" kindref="member">MIPI_DSI_DPI_LP_CMD_TIM_OUTVACT_LPCMD_TIME_SET</ref>(4)<sp/>|</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a7e84ba3c4a1bcab79adad53093d943a9" kindref="member">MIPI_DSI_DPI_LP_CMD_TIM_INVACT_LPCMD_TIME_SET</ref>(4);</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1afb114b3e64b40a4e82d219140f54eced" kindref="member">MIPI_DSI_PCKHDL_CFG_BTA_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a9fcfec46d6158cb44a9f4e31960d2b9c" kindref="member">MIPI_DSI_PCKHDL_CFG_EOTP_TX_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1af1e4305106dca8dda16aad1216ce2a37" kindref="member">MIPI_DSI_PCKHDL_CFG_ECC_RX_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a1a3d01a417fef9b55da8ccb8e35c55f9" kindref="member">MIPI_DSI_PCKHDL_CFG_CRC_RX_EN_MASK</ref>;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structmipi__dsi__config_1a1de38f154f36d55c5733f80c51d45064" kindref="member">disable_eotp</ref>)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a9fcfec46d6158cb44a9f4e31960d2b9c" kindref="member">~MIPI_DSI_PCKHDL_CFG_EOTP_TX_EN_MASK</ref>;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1af2b9d888e4cdc793d0e4bc3f34266615" kindref="member">PCKHDL_CFG</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a3202939443b5f4d19ec6ccb4830be963" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_HFP_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a2c59aaf587675f3ef0ca117f1a6e20d4" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_HBP_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1aa53db346d8085b68d435ca166a68ee33" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_VACT_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1ae7e6a7210baa80808a6b0c7624027679" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_VFP_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a8059b310524706e8b7466fee1e19c175" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_VBP_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1ac1a35184fe8a0623e916c5cec22d0436" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_VSA_EN_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a73f8ce81c3c10d44dd8aed38c023066e" kindref="member">MIPI_DSI_VID_MODE_CFG_VID_MODE_TYPE_SET</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a8dab71b27f5e99fa62ae7e59048bb369" kindref="member">video_mode</ref>);</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a9a55e4a2d56d3dac13deee5436c6928d" kindref="member">VID_MODE_CFG</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a74bfb0568e479bc7ea2011640c3d9e0e" kindref="member">VID_PKT_SIZE</ref><sp/>=<sp/>cfg-&gt;<ref refid="structmipi__dsi__config_1a0f5ff64da61dd05251171576fdf0553f" kindref="member">video_para</ref>.<ref refid="structmipi__video__para_1aecffc45b11e4b30e4a0b65053695865c" kindref="member">hactive</ref>;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1ab112698e1cbd58dbd93c1888dda75f49" kindref="member">TO_CNT_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1af2cc8da3d8b35da3b3a4d38bee5873cc" kindref="member">MIPI_DSI_TO_CNT_CFG_HSTX_TO_CNT_SET</ref>(1000)<sp/>|</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1af9119e1a027eac9bdcf5b07f1914a3f5" kindref="member">MIPI_DSI_TO_CNT_CFG_LPRX_TO_CNT_SET</ref>(1000);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a70a4555a27b0a42198c5ab4e0539db9f" kindref="member">BTA_TO_CNT</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a4c0ae7b633cf64b6f0a80f131737a292" kindref="member">MIPI_DSI_BTA_TO_CNT_BTA_TO_CNT_SET</ref>(0xd00);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__drv_8c_1ac6aac46bb0dcbc6caf4fa101316a82b2" kindref="member">mipi_dsi_video_para_config</ref>(ptr,<sp/>cfg);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a268dc663496631a6e5a78cb7b5c07001" kindref="member">PHY_TMR_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a7db8db4d005726233e390a64f1d953d5" kindref="member">MIPI_DSI_PHY_TMR_CFG_PHY_HS2LP_TIME_SET</ref>(0x14)<sp/>|</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a4a922020cc0214797c8796da070d30ae" kindref="member">MIPI_DSI_PHY_TMR_CFG_PHY_LP2HS_TIME_SET</ref>(0x10);</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a0390112cb54988265c9a3949e2004f3a" kindref="member">PHY_TMR_RD</ref><sp/>=<sp/>10000;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1aee0d878e01dcacba34409308e3b77c2e" kindref="member">PHY_TMR_LPCLK_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a6d8e580d84212e35e9501eda551e7820" kindref="member">MIPI_DSI_PHY_TMR_LPCLK_CFG_PHY_CLKHS2LP_TIME_SET</ref>(0x40)<sp/>|</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a58d805d485e75a0c0fb58aab9eaaa80b" kindref="member">MIPI_DSI_PHY_TMR_LPCLK_CFG_PHY_CLKLP2HS_TIME_SET</ref>(0x40);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1aeabc71c791cedc1b11042d990579f361" kindref="member">PHY_IF_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a1d102788786227ff70f1b7de3ca843ae" kindref="member">MIPI_DSI_PHY_IF_CFG_PHY_STOP_WAIT_TIME_SET</ref>(0x20)<sp/>|</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1adcdfebede5b3d95e71e7a81f9fad4753" kindref="member">MIPI_DSI_PHY_IF_CFG_N_LANES_SET</ref>(cfg-&gt;<ref refid="structmipi__dsi__config_1a4c427e50891c304f57c7fa7a1c0462c7" kindref="member">lanes</ref><sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a07a582ca800a6ea8e22033d8fc2d0eca" kindref="member">PWR_UP</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a209491512aa499aa5de1edf5c32be646" kindref="member">MIPI_DSI_PWR_UP_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="318"><highlight class="normal">}</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga0e5e1c977a6804257fcd7c49a02dafff" kindref="member">mipi_dsi_phy_poweron</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="321"><highlight class="normal">{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a96e1623ceb11a3ead99dd1b358b34fb4" kindref="member">PHY_RSTZ</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a7043f0bbdd5bc36c9cb457b3d11156b4" kindref="member">MIPI_DSI_PHY_RSTZ_PHY_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a96e1623ceb11a3ead99dd1b358b34fb4" kindref="member">PHY_RSTZ</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a645fb50deb4a11c51f424a3c250fd5bc" kindref="member">MIPI_DSI_PHY_RSTZ_PHY_RSTZ_MASK</ref>;</highlight></codeline>
<codeline lineno="324"><highlight class="normal">}</highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga63f8e0d021a37da1fe67890b74afe682" kindref="member">mipi_dsi_phy_powerdown</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="327"><highlight class="normal">{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a96e1623ceb11a3ead99dd1b358b34fb4" kindref="member">PHY_RSTZ</ref><sp/>&amp;=<sp/>~(<ref refid="hpm__mipi__dsi__regs_8h_1a7043f0bbdd5bc36c9cb457b3d11156b4" kindref="member">MIPI_DSI_PHY_RSTZ_PHY_SHUTDOWNZ_MASK</ref><sp/>|</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mipi__dsi__regs_8h_1a645fb50deb4a11c51f424a3c250fd5bc" kindref="member">MIPI_DSI_PHY_RSTZ_PHY_RSTZ_MASK</ref>);</highlight></codeline>
<codeline lineno="330"><highlight class="normal">}</highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga2759ad9e0b5586e39e063c9526b95c5a" kindref="member">mipi_dsi_video_mode_hs_transfer_enable</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="333"><highlight class="normal">{</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a07a582ca800a6ea8e22033d8fc2d0eca" kindref="member">PWR_UP</ref><sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a209491512aa499aa5de1edf5c32be646" kindref="member">~MIPI_DSI_PWR_UP_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a8c47286593529361cc7e60a9050e87ae" kindref="member">LPCLK_CTRL</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a4fc21caa9c32bb27ca66c170bcd66e3d" kindref="member">MIPI_DSI_LPCLK_CTRL_PHY_TXREQUESTCLKHS_MASK</ref>;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a3fc66fb209f6aecbb896d7a217636bef" kindref="member">MODE_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ac49fe886d323c3f491ebdd76ac046513" kindref="member">MIPI_DSI_MODE_CFG_CMD_VIDEO_MODE_SET</ref>(0);</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a07a582ca800a6ea8e22033d8fc2d0eca" kindref="member">PWR_UP</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a209491512aa499aa5de1edf5c32be646" kindref="member">MIPI_DSI_PWR_UP_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="338"><highlight class="normal">}</highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gacd03b544cae2217f75a365e69332ddfc" kindref="member">mipi_dsi_video_mode_hs_transfer_disable</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="341"><highlight class="normal">{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a07a582ca800a6ea8e22033d8fc2d0eca" kindref="member">PWR_UP</ref><sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a209491512aa499aa5de1edf5c32be646" kindref="member">~MIPI_DSI_PWR_UP_SHUTDOWNZ_MASK</ref>;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a8c47286593529361cc7e60a9050e87ae" kindref="member">LPCLK_CTRL</ref><sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a4fc21caa9c32bb27ca66c170bcd66e3d" kindref="member">~MIPI_DSI_LPCLK_CTRL_PHY_TXREQUESTCLKHS_MASK</ref>;</highlight></codeline>
<codeline lineno="344"><highlight class="normal">}</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga763fc6fadef88c08a641c22b3a24d41a" kindref="member">mipi_dsi_msg_t</ref><sp/>*msg)</highlight></codeline>
<codeline lineno="347"><highlight class="normal">{</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__packet" kindref="compound">mipi_dsi_packet</ref><sp/>packet;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>val;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>do<sp/>some<sp/>minimum<sp/>sanity<sp/>checking<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="hpm__mipi__dsi__drv_8c_1a698ef74fc2e7923500a6c758dd617bdc" kindref="member">mipi_dsi_packet_format_is_short</ref>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!<ref refid="hpm__mipi__dsi__drv_8c_1a5c726aa149a2f3ca144a335b218c9e20" kindref="member">mipi_dsi_packet_format_is_long</ref>(msg-&gt;<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref>))</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a9a55e4a2d56d3dac13deee5436c6928d" kindref="member">VID_MODE_CFG</ref><sp/>|=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a5b695f5b4a7c85c73f76e08c6727ba81" kindref="member">MIPI_DSI_VID_MODE_CFG_LP_CMD_EN_MASK</ref>;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a8c47286593529361cc7e60a9050e87ae" kindref="member">LPCLK_CTRL</ref><sp/>&amp;=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1a4fc21caa9c32bb27ca66c170bcd66e3d" kindref="member">~MIPI_DSI_LPCLK_CTRL_PHY_TXREQUESTCLKHS_MASK</ref>;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>create<sp/>a<sp/>packet<sp/>to<sp/>the<sp/>DSI<sp/>protocol<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a80d587e557befa4c380d9b4b239af9b6" kindref="member">mipi_dsi_create_packet</ref>(&amp;packet,<sp/>msg)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1ab0afa9d3c6d27f32217293d0c78b8830" kindref="member">CMD_MODE_CFG</ref><sp/>=<sp/>1u&lt;&lt;24<sp/>|<sp/>1u&lt;&lt;19<sp/>|<sp/>1u&lt;&lt;18<sp/>|<sp/>1u&lt;&lt;17<sp/>|</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1u&lt;&lt;16<sp/>|<sp/>1u&lt;&lt;14<sp/>|<sp/>1u&lt;&lt;13<sp/>|<sp/>1u&lt;&lt;12<sp/>|</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1u&lt;&lt;11<sp/>|<sp/>1u&lt;&lt;10<sp/>|<sp/>1u&lt;&lt;9<sp/>|<sp/>1u&lt;&lt;8;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>config<sp/>to<sp/>cmd<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a3fc66fb209f6aecbb896d7a217636bef" kindref="member">MODE_CFG</ref><sp/>=<sp/><ref refid="hpm__mipi__dsi__regs_8h_1ac49fe886d323c3f491ebdd76ac046513" kindref="member">MIPI_DSI_MODE_CFG_CMD_VIDEO_MODE_SET</ref>(1);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>payload<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(packet.<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref><sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="375"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Alternatively,<sp/>you<sp/>can<sp/>always<sp/>keep<sp/>the<sp/>FIFO</highlight></codeline>
<codeline lineno="376"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>nearly<sp/>full<sp/>by<sp/>monitoring<sp/>the<sp/>FIFO<sp/>state<sp/>until</highlight></codeline>
<codeline lineno="377"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>it<sp/>is<sp/>not<sp/>full,<sp/>and<sp/>then<sp/>writea<sp/>single<sp/>word<sp/>of<sp/>data.</highlight></codeline>
<codeline lineno="378"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>This<sp/>solution<sp/>is<sp/>more<sp/>resource<sp/>consuming</highlight></codeline>
<codeline lineno="379"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>but<sp/>it<sp/>simultaneously<sp/>avoids<sp/>FIFO<sp/>starvation,</highlight></codeline>
<codeline lineno="380"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>making<sp/>it<sp/>possible<sp/>to<sp/>use<sp/>FIFO<sp/>sizes<sp/>smaller<sp/>than</highlight></codeline>
<codeline lineno="381"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>the<sp/>amount<sp/>of<sp/>data<sp/>of<sp/>the<sp/>longest<sp/>packet<sp/>to<sp/>be<sp/>written.</highlight></codeline>
<codeline lineno="382"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a1254a7269e112defee60ca399350d349" kindref="member">mipi_dsi_genif_wait_w_pld_fifo_not_full</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(packet.<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref><sp/>&lt;<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>send<sp/>residu<sp/>payload<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;val,<sp/>packet.<ref refid="structmipi__dsi__packet_1afdd13ad448cb65a89f980bb5e37d7769" kindref="member">payload</ref>,<sp/>packet.<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref>);</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet.<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1a3e541eb6a7ee62d0f2e480c5734aa43b" kindref="member">get_le32</ref>(packet.<ref refid="structmipi__dsi__packet_1afdd13ad448cb65a89f980bb5e37d7769" kindref="member">payload</ref>);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet.<ref refid="structmipi__dsi__packet_1afdd13ad448cb65a89f980bb5e37d7769" kindref="member">payload</ref><sp/>+=<sp/>4;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet.<ref refid="structmipi__dsi__packet_1ad79b9d7ae6127a215cdfc802e2ecf06e" kindref="member">payload_length</ref><sp/>-=<sp/>4;</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a7123b19e64106bac338c2dbd0b51d37e" kindref="member">GEN_PLD_DATA</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a4606f6c4ad7fa2b9782f8e39ecc447f5" kindref="member">mipi_dsi_genif_wait_cmd_fifo_not_full</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>packet<sp/>header<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/><ref refid="hpm__mipi__dsi__drv_8c_1a3e541eb6a7ee62d0f2e480c5734aa43b" kindref="member">get_le32</ref>(packet.<ref refid="structmipi__dsi__packet_1af96c141d4b4271e11ea94359bf326d8b" kindref="member">header</ref>);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structMIPI__DSI__Type_1a7af33ad6860f218a711151dd665800db" kindref="member">GEN_HDR</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a96e57d1dec9e9fa9eb9afbdf980201bb" kindref="member">mipi_dsi_genif_wait_write_fifo_empty</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;<ref refid="structmipi__dsi__msg_1a87c419438aa58f814ad4287ffef82efd" kindref="member">rx_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mipi__dsi__drv_8c_1a3f8288ca732071d68df33af0c8e44b81" kindref="member">dw_mipi_dsi_read_from_fifo</ref>(ptr,<sp/>msg)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>msg-&gt;<ref refid="structmipi__dsi__msg_1a87c419438aa58f814ad4287ffef82efd" kindref="member">rx_len</ref><sp/>?<sp/>msg-&gt;<ref refid="structmipi__dsi__msg_1a87c419438aa58f814ad4287ffef82efd" kindref="member">rx_len</ref><sp/>:<sp/>msg-&gt;<ref refid="structmipi__dsi__msg_1a7361e425c0ae86275a4b3faf9b567ce0" kindref="member">tx_len</ref>;</highlight></codeline>
<codeline lineno="415"><highlight class="normal">}</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga30bd309e291edcb95a186dc77db29413" kindref="member">mipi_dsi_set_maximum_return_packet_size</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>channel,<sp/>uint16_t<sp/>value)</highlight></codeline>
<codeline lineno="418"><highlight class="normal">{</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>tx[2]<sp/>=<sp/>{value<sp/>&amp;<sp/>0xff,<sp/>value<sp/>&gt;&gt;<sp/>8};</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>msg<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/>=<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.type<sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa6a416169d2f2b2b1452b3eb853aab3d3" kindref="member">MIPI_DSI_SET_MAXIMUM_RETURN_PACKET_SIZE</ref>,</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_len<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(tx),</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="structmipi__dsi__msg_1a73e62f4c7e45f0553fd0deeec06356a2" kindref="member">tx_buf</ref><sp/>=<sp/>tx,</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(ptr,<sp/>&amp;msg);</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(ret<sp/>&lt;<sp/>0)<sp/>?<sp/>false<sp/>:<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="430"><highlight class="normal">}</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga0ecd2b1eab7fb25b0c0990963739d0b3" kindref="member">mipi_dsi_generic_write</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*payload,</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="434"><highlight class="normal">{</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>msg<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/>=<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_buf<sp/>=<sp/>payload,</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_len<sp/>=<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)<sp/>{</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aaa774468e236ee4542a4db6a2beb35d5f" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_0_PARAM</ref>;</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa205036e8e68e8fa707e963bdb469654c" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_1_PARAM</ref>;</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aafdcc34c735c1b9bdf76e8f59e2f292b5" kindref="member">MIPI_DSI_GENERIC_SHORT_WRITE_2_PARAM</ref>;</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa860b4cf24a21179fd4d91b2ac6fce3bb" kindref="member">MIPI_DSI_GENERIC_LONG_WRITE</ref>;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(ptr,<sp/>&amp;msg);</highlight></codeline>
<codeline lineno="457"><highlight class="normal">}</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gaf3e2b115091ff2aa075135e218ccb741" kindref="member">mipi_dsi_generic_read</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*params,</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>num_params,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data,<sp/>uint16_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="462"><highlight class="normal">{</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>msg<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/>=<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_len<sp/>=<sp/>num_params,</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_buf<sp/>=<sp/>params,</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.rx_len<sp/>=<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>,</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.rx_buf<sp/>=<sp/>data</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(num_params)<sp/>{</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aabe1cdd85ffbdfcd3cc270f3d7214cf3a" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_0_PARAM</ref>;</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa8038824bf21007f72ec02868dbc97ece" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_1_PARAM</ref>;</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aafa5be3e1fd951afa0fc3ea8f71156405" kindref="member">MIPI_DSI_GENERIC_READ_REQUEST_2_PARAM</ref>;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(ptr,<sp/>&amp;msg);</highlight></codeline>
<codeline lineno="486"><highlight class="normal">}</highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga03e3e4e0b46e78dec9ae8e8edc1798da" kindref="member">mipi_dsi_dcs_write_buffer</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data,<sp/>uint16_t<sp/>len)</highlight></codeline>
<codeline lineno="491"><highlight class="normal">{</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>msg<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/>=<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_buf<sp/>=<sp/>data,</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_len<sp/>=<sp/>len</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(len)<sp/>{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa972beab4baaae8d8a3ad2edd47f87598" kindref="member">MIPI_DSI_DCS_SHORT_WRITE</ref>;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa331b3d11995b32f4467d1113465db2d8" kindref="member">MIPI_DSI_DCS_SHORT_WRITE_PARAM</ref>;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.<ref refid="structmipi__dsi__msg_1a92dc0767c36f31cb23207a0581d3355f" kindref="member">type</ref><sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aa224f4bac097969779879b77e3d1d2ae0" kindref="member">MIPI_DSI_DCS_LONG_WRITE</ref>;</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(ptr,<sp/>&amp;msg);</highlight></codeline>
<codeline lineno="513"><highlight class="normal">}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga72bc15bad6c33f623b6443f5d9d9955f" kindref="member">mipi_dsi_dcs_write</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,<sp/>uint8_t<sp/>cmd,</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data,<sp/>uint16_t<sp/>len)</highlight></codeline>
<codeline lineno="517"><highlight class="normal">{</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>tx[128];</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(len<sp/>&lt;<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(tx))<sp/>{</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref><sp/>=<sp/>1<sp/>+<sp/>len;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx[0]<sp/>=<sp/>cmd;</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(len<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;tx[1],<sp/>data,<sp/>len);</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/><ref refid="group__mipi__dsi__interface_1ga03e3e4e0b46e78dec9ae8e8edc1798da" kindref="member">mipi_dsi_dcs_write_buffer</ref>(ptr,<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,<sp/>tx,<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="534"><highlight class="normal">}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1gaad5f2c47e71c18d17d45c3d92424d2a3" kindref="member">mipi_dsi_dcs_read</ref>(<ref refid="structMIPI__DSI__Type" kindref="compound">MIPI_DSI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,<sp/>uint8_t<sp/>cmd,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data,<sp/>uint16_t<sp/>len)</highlight></codeline>
<codeline lineno="537"><highlight class="normal">{</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmipi__dsi__msg" kindref="compound">mipi_dsi_msg</ref><sp/>msg<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.channel<sp/>=<sp/><ref refid="structmipi__dsi__msg_1a054338e9096fd6d49db20a1c4c7a5255" kindref="member">channel</ref>,</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.type<sp/>=<sp/><ref refid="group__mipi__dsi__interface_1gga77bc325fa29a7c53432c4fba3d6d487aab8728499ec3f0e7fe5d0da23b57ca6a4" kindref="member">MIPI_DSI_DCS_READ</ref>,</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_buf<sp/>=<sp/>&amp;cmd,</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.tx_len<sp/>=<sp/>1,</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.rx_buf<sp/>=<sp/>data,</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.rx_len<sp/>=<sp/>len</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__mipi__dsi__interface_1ga210ec3d106a1a3169cb4f1ad8cec2ebb" kindref="member">mipi_dsi_lp_cmd_transfer</ref>(ptr,<sp/>&amp;msg);</highlight></codeline>
<codeline lineno="548"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="drivers/src/hpm_mipi_dsi_drv.c"/>
  </compounddef>
</doxygen>
