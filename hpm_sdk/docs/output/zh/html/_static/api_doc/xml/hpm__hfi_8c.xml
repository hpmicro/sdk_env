<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.12.0" xml:lang="en-US">
  <compounddef id="hpm__hfi_8c" kind="file" language="C++">
    <compoundname>hpm_hfi.c</compoundname>
    <includes refid="hpm__hfi_8h" local="yes">hpm_hfi.h</includes>
    <incdepgraph>
      <node id="3">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>hpm_bldc_define.h</label>
        <link refid="hpm__bldc__define_8h"/>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>hpm_foc.h</label>
        <link refid="hpm__foc_8h"/>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>hpm_hfi.h</label>
        <link refid="hpm__hfi_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>hpm_motor_math.h</label>
        <link refid="hpm__motor__math_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
      </node>
      <node id="13">
        <label>hpm_smc.h</label>
        <link refid="hpm__smc_8h"/>
      </node>
      <node id="1">
        <label>middleware/hpm_mcl/sensorless_control/hpm_hfi.c</label>
        <link refid="hpm__hfi_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>assert.h</label>
      </node>
      <node id="11">
        <label>math.h</label>
      </node>
      <node id="5">
        <label>stdbool.h</label>
      </node>
      <node id="6">
        <label>stdint.h</label>
      </node>
      <node id="8">
        <label>stdlib.h</label>
      </node>
      <node id="7">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="enum">
      <memberdef kind="enum" id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5" prot="public" static="no" strong="no">
        <type></type>
        <name>pole_detect_stat_t</name>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a7dd2ab1f4443905c714f03bd7c0904bc" prot="public">
          <name>pole_stat_init</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a773e2360fa427d8357fa526c1cc3d891" prot="public">
          <name>pole_stat1</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5ae53fc7abfbe63cf8983eb57d45d8d276" prot="public">
          <name>pole_stat2</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a460e808e1d634655a61122d084df10e2" prot="public">
          <name>pole_stat3</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a0b50823f910ad5f2e9245b00f649ee09" prot="public">
          <name>pole_stat4</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a8d581c2986f62bf409133df0420db9a1" prot="public">
          <name>pole_stat_ok</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" line="10" column="1" bodyfile="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" bodystart="10" bodyend="17"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="hpm__hfi_8c_1a8b3d97f2962f7762867cdcf8a4e86c2d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_mcl_hfi_sin_cos</definition>
        <argsstring>(HPM_MOTOR_MATH_TYPE angle, HPM_MOTOR_MATH_TYPE *sin_angle, HPM_MOTOR_MATH_TYPE *cos_angle)</argsstring>
        <name>hpm_mcl_hfi_sin_cos</name>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref></type>
          <declname>angle</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref> *</type>
          <declname>sin_angle</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref> *</type>
          <declname>cos_angle</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" line="19" column="13" bodyfile="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" bodystart="19" bodyend="27"/>
      </memberdef>
      <memberdef kind="function" id="hpm__hfi_8c_1a8fa740163f9f629670a85581eb823cfc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_mcl_hfi_core</definition>
        <argsstring>(float alpha, float beta, hpm_hfi_para_t *inject)</argsstring>
        <name>hpm_mcl_hfi_core</name>
        <param>
          <type>float</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>beta</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__hfi__interface_1ga4de14ca6e9db27227314a2f9d25a6c61" kindref="member">hpm_hfi_para_t</ref> *</type>
          <declname>inject</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" line="29" column="6" bodyfile="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" bodystart="29" bodyend="47"/>
      </memberdef>
      <memberdef kind="function" id="hpm__hfi_8c_1a310a6bf4470aa92e5a042d278fc36f82" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>float</type>
        <definition>float hpm_mcl_hfi_pll</definition>
        <argsstring>(float alpha, float beta, float sin_val, float cos_val, hpm_hfi_pll_para_t *pll)</argsstring>
        <name>hpm_mcl_hfi_pll</name>
        <param>
          <type>float</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>beta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>sin_val</declname>
        </param>
        <param>
          <type>float</type>
          <declname>cos_val</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__hfi__interface_1gab0c07bf9068939980a7854357c124cb0" kindref="member">hpm_hfi_pll_para_t</ref> *</type>
          <declname>pll</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" line="49" column="7" bodyfile="middleware/hpm_mcl/sensorless_control/hpm_hfi.c" bodystart="49" bodyend="78"/>
      </memberdef>
      <member refid="group__mcl__hfi__interface_1ga7ba14311cbf295b17d090828ae1b8816" kind="function"><name>hpm_mcl_hfi_loop</name></member>
      <member refid="group__mcl__hfi__interface_1ga37ef54eb18d2c36a9ceba92b0119acfd" kind="function"><name>hpm_mcl_hfi_pole_detect</name></member>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2023<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__hfi_8h" kindref="compound">hpm_hfi.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a7dd2ab1f4443905c714f03bd7c0904bc" kindref="member">pole_stat_init</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a773e2360fa427d8357fa526c1cc3d891" kindref="member">pole_stat1</ref><sp/>=<sp/>1,</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5ae53fc7abfbe63cf8983eb57d45d8d276" kindref="member">pole_stat2</ref>,</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a460e808e1d634655a61122d084df10e2" kindref="member">pole_stat3</ref>,</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a0b50823f910ad5f2e9245b00f649ee09" kindref="member">pole_stat4</ref>,</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a8d581c2986f62bf409133df0420db9a1" kindref="member">pole_stat_ok</ref></highlight></codeline>
<codeline lineno="17"><highlight class="normal">}<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5" kindref="member">pole_detect_stat_t</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__hfi_8c_1a8b3d97f2962f7762867cdcf8a4e86c2d" kindref="member">hpm_mcl_hfi_sin_cos</ref>(<ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>angle,</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*sin_angle,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*cos_angle)</highlight></codeline>
<codeline lineno="21"><highlight class="normal">{</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>angle_f;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>angle_f<sp/>=<sp/>angle;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>*sin_angle<sp/>=<sp/>sinf(angle_f);</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>*cos_angle<sp/>=<sp/>cosf(angle_f);</highlight></codeline>
<codeline lineno="27"><highlight class="normal">}</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__hfi_8c_1a8fa740163f9f629670a85581eb823cfc" kindref="member">hpm_mcl_hfi_core</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta,<sp/><ref refid="structhpm__hfi__para" kindref="compound">hpm_hfi_para_t</ref><sp/>*inject)</highlight></codeline>
<codeline lineno="30"><highlight class="normal">{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha_inject,<sp/>beta_inject;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1accf2c82bd17d5fb1cb5ec330acc9d54a" kindref="member">e_alpha</ref><sp/>=<sp/>(inject-&gt;<ref refid="structhpm__hfi__para_1a13f3f8118303c06150a6ddafa1afb470" kindref="member">last_alpha</ref><sp/>+<sp/>alpha)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a04d43ae5d59f14483361c1b6695f034c" kindref="member">e_beta</ref><sp/>=<sp/>(inject-&gt;<ref refid="structhpm__hfi__para_1a1b25b712b8877ecfcdcb0ab4d96ab887" kindref="member">last_beta</ref><sp/>+<sp/>beta)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>alpha_inject<sp/>=<sp/>(alpha<sp/>-<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a13f3f8118303c06150a6ddafa1afb470" kindref="member">last_alpha</ref>);</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>beta_inject<sp/>=<sp/>(beta<sp/>-<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a1b25b712b8877ecfcdcb0ab4d96ab887" kindref="member">last_beta</ref>);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(inject-&gt;<ref refid="structhpm__hfi__para_1a1bb7231d5918d6f4cf65f210ec797f76" kindref="member">vh</ref><sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alpha_inject<sp/>=<sp/>-alpha_inject;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>beta_inject<sp/>=<sp/>-beta_inject;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1ac993190f7ad09c9a6d805453bfea8eff" kindref="member">alpha</ref><sp/>=<sp/>alpha_inject;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1ac4f3a5a00fb458d7174517c33a9735da" kindref="member">beta</ref><sp/>=<sp/>beta_inject;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a1b25b712b8877ecfcdcb0ab4d96ab887" kindref="member">last_beta</ref><sp/>=<sp/>beta;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a13f3f8118303c06150a6ddafa1afb470" kindref="member">last_alpha</ref><sp/>=<sp/>alpha;</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__hfi_8c_1a310a6bf4470aa92e5a042d278fc36f82" kindref="member">hpm_mcl_hfi_pll</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sin_val,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cos_val,<sp/><ref refid="structhpm__hfi__pll__para" kindref="compound">hpm_hfi_pll_para_t</ref><sp/>*pll)</highlight></codeline>
<codeline lineno="50"><highlight class="normal">{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>portion_asp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>portion_asi<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a27fe672fffe6371258cea7f387f54cde" kindref="member">err_last</ref><sp/>=<sp/>beta<sp/>*<sp/>cos_val<sp/>-<sp/>alpha<sp/>*<sp/>sin_val;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asp<sp/>=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1acac2aecd53b36f6dda75a1bcdf344d53" kindref="member">kp</ref><sp/>*<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a27fe672fffe6371258cea7f387f54cde" kindref="member">err_last</ref>;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asi<sp/>=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a85a795b957cdfe84793af91ce6ef8dc7" kindref="member">ki</ref><sp/>*<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a27fe672fffe6371258cea7f387f54cde" kindref="member">err_last</ref>;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asi<sp/>+=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1aa67cdaababce724a318c1331c01bd866" kindref="member">mem</ref>;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(portion_asi<sp/>&gt;<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1aa0e9a673d85bfc65716bd2c1eed7d464" kindref="member">mem_max</ref>)<sp/>{</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>portion_asi<sp/>=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1aa0e9a673d85bfc65716bd2c1eed7d464" kindref="member">mem_max</ref>;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(portion_asi<sp/>&lt;<sp/>pll-&gt;mem_min)<sp/>{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>portion_asi<sp/>=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1abd02fc37a3cfe089b5bf70f3f259c040" kindref="member">mem_min</ref>;</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1aa67cdaababce724a318c1331c01bd866" kindref="member">mem</ref><sp/>=<sp/>portion_asi;</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asi<sp/>+=<sp/>portion_asp;</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/>portion_asi<sp/>*<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1addb02dc956d91f54cbb9872796e496d2" kindref="member">loop_s</ref>;</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&gt;<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>)<sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>-=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&lt;<sp/>-<ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>)<sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a1a97293029e002686b1a05fd4ce7299f" kindref="member">theta</ref><sp/>=<sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref>;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a1a97293029e002686b1a05fd4ce7299f" kindref="member">theta</ref>;</highlight></codeline>
<codeline lineno="78"><highlight class="normal">}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__hfi__interface_1ga7ba14311cbf295b17d090828ae1b8816" kindref="member">hpm_mcl_hfi_loop</ref>(<ref refid="structbldc__contrl__foc__par" kindref="compound">BLDC_CONTROL_FOC_PARA</ref><sp/>*par,<sp/><ref refid="structhpm__hfi__para" kindref="compound">hpm_hfi_para_t</ref><sp/>*inject,</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structhpm__hfi__pll__para" kindref="compound">hpm_hfi_pll_para_t</ref><sp/>*pll,<sp/><ref refid="structhpm__hfi__pole__detect__para" kindref="compound">hpm_hfi_pole_detect_para_t</ref><sp/>*pole)</highlight></codeline>
<codeline lineno="82"><highlight class="normal">{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>sin_angle<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>cos_angle<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a069a6c0a5f1417d1649f1a9e7e18d60f" kindref="member">func_sampl</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gab62f285208cf814284e8ac580020d5ba" kindref="member">hpm_mcl_bldc_foc_clarke</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a0231f4c24473aeec9f12b68340260e5e" kindref="member">cal_u</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a148f75da8d04c52457742f32e1dd6de4" kindref="member">cal_v</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1ac676ce4207d66b3354e8817c5db8ba24" kindref="member">cal_w</ref>,</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref>);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a8fa740163f9f629670a85581eb823cfc" kindref="member">hpm_mcl_hfi_core</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref>,<sp/>inject);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a310a6bf4470aa92e5a042d278fc36f82" kindref="member">hpm_mcl_hfi_pll</ref>(inject-&gt;<ref refid="structhpm__hfi__para_1ac993190f7ad09c9a6d805453bfea8eff" kindref="member">alpha</ref>,<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1ac4f3a5a00fb458d7174517c33a9735da" kindref="member">beta</ref>,<sp/>sin_angle,<sp/>cos_angle,<sp/>pll);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref><sp/>=<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1accf2c82bd17d5fb1cb5ec330acc9d54a" kindref="member">e_alpha</ref>;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref><sp/>=<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a04d43ae5d59f14483361c1b6695f034c" kindref="member">e_beta</ref>;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a8b3d97f2962f7762867cdcf8a4e86c2d" kindref="member">hpm_mcl_hfi_sin_cos</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1abff28641a2ef3aa01a993df4164b3aac" kindref="member">electric_angle</ref>,<sp/>&amp;sin_angle,<sp/>&amp;cos_angle);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kindref="member">hpm_mcl_bldc_foc_park</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref>,</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0d19b05d1d0538b7aa52c557f2c9858b" kindref="member">cur</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0d19b05d1d0538b7aa52c557f2c9858b" kindref="member">cur</ref>,</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0bfe7b8c1eeb6eb9327d6ff12bf17666" kindref="member">target</ref><sp/>=<sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref>;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1aba97df8f5bfe143729f8c0024496a13e" kindref="member">func_pid</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1aba97df8f5bfe143729f8c0024496a13e" kindref="member">func_pid</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref><sp/>+=<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a1bb7231d5918d6f4cf65f210ec797f76" kindref="member">vh</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>inject-&gt;<ref refid="structhpm__hfi__para_1a1bb7231d5918d6f4cf65f210ec797f76" kindref="member">vh</ref><sp/>=<sp/>-inject-&gt;<ref refid="structhpm__hfi__para_1a1bb7231d5918d6f4cf65f210ec797f76" kindref="member">vh</ref>;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1ga16ebe05a270b27ef19caff2ec11d889c" kindref="member">hpm_mcl_bldc_foc_inv_park</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref>,</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1af4083570644b122dbb3ad9e3f2b2b4fb" kindref="member">ualpha</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1aedd4335eff1e2263725dafed82d899df" kindref="member">ubeta</ref>,<sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1a9f5cf5d16aeeb1b0eb2845d9674752b3" kindref="member">target_alpha</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1af4083570644b122dbb3ad9e3f2b2b4fb" kindref="member">ualpha</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1a50c12fc435102af8e4309f198372274e" kindref="member">target_beta</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1aedd4335eff1e2263725dafed82d899df" kindref="member">ubeta</ref>;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1aa4e5d8fa9dfb36c6587ace7c6f976fc0" kindref="member">func_spwm</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>);</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal">}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__mcl__hfi__interface_1ga37ef54eb18d2c36a9ceba92b0119acfd" kindref="member">hpm_mcl_hfi_pole_detect</ref>(<ref refid="structbldc__contrl__foc__par" kindref="compound">BLDC_CONTROL_FOC_PARA</ref><sp/>*foc,<sp/><ref refid="structhpm__hfi__para" kindref="compound">hpm_hfi_para_t</ref><sp/>*inject,</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structhpm__hfi__pll__para" kindref="compound">hpm_hfi_pll_para_t</ref><sp/>*pll,<sp/><ref refid="structhpm__hfi__pole__detect__para" kindref="compound">hpm_hfi_pole_detect_para_t</ref><sp/>*pole)</highlight></codeline>
<codeline lineno="114"><highlight class="normal">{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>idh,<sp/>iqh;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sin_angle,<sp/>cos_angle;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a7dd2ab1f4443905c714f03bd7c0904bc" kindref="member">pole_stat_init</ref>)<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>foc-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0bfe7b8c1eeb6eb9327d6ff12bf17666" kindref="member">target</ref><sp/>=<sp/><sp/>0;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>foc-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0bfe7b8c1eeb6eb9327d6ff12bf17666" kindref="member">target</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a9bdaedc99be7191adaf346d3c20667f8" kindref="member">theta_zero</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1346739db0d9ec3421a8babea2e8990f" kindref="member">theta_pi</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a773e2360fa427d8357fa526c1cc3d891" kindref="member">pole_stat1</ref>)<sp/>{</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref>++;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;=<sp/>50)<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>=<sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a5bb378d464f6f3ef5ddce51f7673ede8" kindref="member">current_d_init_val</ref>;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;=<sp/>55)<sp/>{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a8b3d97f2962f7762867cdcf8a4e86c2d" kindref="member">hpm_mcl_hfi_sin_cos</ref>(foc-&gt;<ref refid="structbldc__contrl__foc__par_1abff28641a2ef3aa01a993df4164b3aac" kindref="member">electric_angle</ref>,<sp/>&amp;sin_angle,<sp/>&amp;cos_angle);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kindref="member">hpm_mcl_bldc_foc_park</ref>(inject-&gt;<ref refid="structhpm__hfi__para_1ac993190f7ad09c9a6d805453bfea8eff" kindref="member">alpha</ref>,<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1ac4f3a5a00fb458d7174517c33a9735da" kindref="member">beta</ref>,<sp/>&amp;idh,<sp/>&amp;iqh,<sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a9bdaedc99be7191adaf346d3c20667f8" kindref="member">theta_zero</ref><sp/>+=<sp/>fabs(idh);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;=<sp/>60)<sp/>{</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>=<sp/><sp/>0;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5ae53fc7abfbe63cf8983eb57d45d8d276" kindref="member">pole_stat2</ref>;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5ae53fc7abfbe63cf8983eb57d45d8d276" kindref="member">pole_stat2</ref>)<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref>++;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;<sp/>50)<sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a460e808e1d634655a61122d084df10e2" kindref="member">pole_stat3</ref>;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a460e808e1d634655a61122d084df10e2" kindref="member">pole_stat3</ref>)<sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>=<sp/>-pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a5bb378d464f6f3ef5ddce51f7673ede8" kindref="member">current_d_init_val</ref>;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref>++;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;=<sp/>5)<sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__hfi_8c_1a8b3d97f2962f7762867cdcf8a4e86c2d" kindref="member">hpm_mcl_hfi_sin_cos</ref>(foc-&gt;<ref refid="structbldc__contrl__foc__par_1abff28641a2ef3aa01a993df4164b3aac" kindref="member">electric_angle</ref>,<sp/>&amp;sin_angle,<sp/>&amp;cos_angle);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kindref="member">hpm_mcl_bldc_foc_park</ref>(inject-&gt;<ref refid="structhpm__hfi__para_1ac993190f7ad09c9a6d805453bfea8eff" kindref="member">alpha</ref>,<sp/>inject-&gt;<ref refid="structhpm__hfi__para_1ac4f3a5a00fb458d7174517c33a9735da" kindref="member">beta</ref>,<sp/>&amp;idh,<sp/>&amp;iqh,<sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1346739db0d9ec3421a8babea2e8990f" kindref="member">theta_pi</ref><sp/>+=<sp/>fabs(idh);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;=<sp/>10)<sp/>{</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1adbc871f86c174ad53935bddebe2da3a5" kindref="member">currentd_force</ref><sp/>=<sp/><sp/>0;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a0b50823f910ad5f2e9245b00f649ee09" kindref="member">pole_stat4</ref>;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a9bdaedc99be7191adaf346d3c20667f8" kindref="member">theta_zero</ref><sp/>&gt;<sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1346739db0d9ec3421a8babea2e8990f" kindref="member">theta_pi</ref>)<sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&gt;<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>)<sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>-=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&lt;<sp/>-<ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>)<sp/>{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pll-&gt;<ref refid="structhpm__hfi__pll__para_1a8fdba813575a7f5d101c3e65f21016e7" kindref="member">deta</ref><sp/>+=<sp/>2<sp/>*<sp/><ref refid="group__mcl__hfi__interface_1ga598a3330b3c21701223ee0ca14316eca" kindref="member">PI</ref>;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a0b50823f910ad5f2e9245b00f649ee09" kindref="member">pole_stat4</ref>)<sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref>++;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>&gt;<sp/>500)<sp/>{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a8d581c2986f62bf409133df0420db9a1" kindref="member">pole_stat_ok</ref>;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1afbc2d14a9174a61fa9271002e7310d20" kindref="member">times</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a9bdaedc99be7191adaf346d3c20667f8" kindref="member">theta_zero</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1346739db0d9ec3421a8babea2e8990f" kindref="member">theta_pi</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pole-&gt;<ref refid="structhpm__hfi__pole__detect__para_1a1c7c30bc3cabf9080ab579b7e490b322" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__hfi_8c_1a9695250c9a1e78a67bf5ecf0695b3de5a8d581c2986f62bf409133df0420db9a1" kindref="member">pole_stat_ok</ref>)<sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="middleware/hpm_mcl/sensorless_control/hpm_hfi.c"/>
  </compounddef>
</doxygen>
