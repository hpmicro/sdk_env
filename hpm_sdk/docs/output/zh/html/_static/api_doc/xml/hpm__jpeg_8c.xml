<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__jpeg_8c" kind="file" language="C++">
    <compoundname>hpm_jpeg.c</compoundname>
    <includes local="no">stdint.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes refid="hpm__jpeg__drv_8h" local="no">hpm_jpeg_drv.h</includes>
    <includes refid="hpm__l1c__drv_8h" local="no">hpm_l1c_drv.h</includes>
    <includes refid="hpm__jpeg_8h" local="yes">hpm_jpeg.h</includes>
    <includes local="yes">hpm_interrupt.h</includes>
    <incdepgraph>
      <node id="10">
        <label>hpm_l1c_drv.h</label>
        <link refid="hpm__l1c__drv_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="13">
        <label>riscv/riscv_core.h</label>
        <link refid="riscv__core_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>components/jpeg/hpm_jpeg.c</label>
        <link refid="hpm__jpeg_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>hpm_jpeg.h</label>
        <link refid="hpm__jpeg_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>hpm_csr_drv.h</label>
        <link refid="hpm__csr__drv_8h"/>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>hpm_jpeg_drv.h</label>
        <link refid="hpm__jpeg__drv_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>assert.h</label>
      </node>
      <node id="12">
        <label>hpm_csr_regs.h</label>
      </node>
      <node id="17">
        <label>hpm_interrupt.h</label>
      </node>
      <node id="9">
        <label>hpm_jpeg_regs.h</label>
      </node>
      <node id="14">
        <label>hpm_soc_feature.h</label>
      </node>
      <node id="7">
        <label>stdbool.h</label>
      </node>
      <node id="2">
        <label>stdint.h</label>
      </node>
      <node id="16">
        <label>stdio.h</label>
      </node>
      <node id="3">
        <label>stdlib.h</label>
      </node>
      <node id="8">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structhpm__jpeg__core__htab" prot="public">hpm_jpeg_core_htab</innerclass>
    <innerclass refid="structhpm__jpeg__core__qtab" prot="public">hpm_jpeg_core_qtab</innerclass>
    <innerclass refid="structhpm__jpeg__sof0__info" prot="public">hpm_jpeg_sof0_info</innerclass>
    <innerclass refid="structhpm__jpeg__sos__info" prot="public">hpm_jpeg_sos_info</innerclass>
    <innerclass refid="structhpm__jpeg__jpeg__info" prot="public">hpm_jpeg_jpeg_info</innerclass>
    <innerclass refid="structhpm__jpeg__sampling__tab" prot="public">hpm_jpeg_sampling_tab</innerclass>
    <innerclass refid="structhpm__jpeg__std__tab" prot="public">hpm_jpeg_std_tab</innerclass>
    <innerclass refid="structhpm__jpeg__buf" prot="public">hpm_jpeg_buf</innerclass>
    <innerclass refid="structjpeg__list" prot="public">jpeg_list</innerclass>
    <innerclass refid="structhpm__jpeg__context" prot="public">hpm_jpeg_context</innerclass>
    <innerclass refid="structhpm__jpeg__base__job" prot="public">hpm_jpeg_base_job</innerclass>
    <innerclass refid="structhpm__jpeg__decode__job" prot="public">hpm_jpeg_decode_job</innerclass>
    <innerclass refid="structhpm__jpeg__encode__job" prot="public">hpm_jpeg_encode_job</innerclass>
    <sectiondef kind="define">
      <memberdef kind="define" id="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" prot="public" static="no">
        <name>HPM_JPEG_CACHE_LINE</name>
        <initializer><ref refid="hpm__jpeg_8c_1aa3cd92752a61b59b8c1a1cc08b31957d" kindref="member">hpm_jpeg_cache_line_size</ref>()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="18" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="18" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" prot="public" static="no">
        <name>HPM_JPEG_ROUNDUP</name>
        <param><defname>x</defname></param>
        <param><defname>y</defname></param>
        <initializer>((((x) + ((y) - 1)) / (y)) * y)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="19" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="19" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1ab81a30a7cb8eb86ce567b9415b283ef4" prot="public" static="no">
        <name>HPM_JPEG_ROUNDDOWN</name>
        <param><defname>x</defname></param>
        <param><defname>y</defname></param>
        <initializer>((x) - ((x) % (y)))</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="20" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="20" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a6a73d744a065090aa9e890b8547304e9" prot="public" static="no">
        <name>JPEG_MARKER_SOI</name>
        <initializer>0xd8</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="22" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="22" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a3eb6e3444f79d449058145a01872f4b3" prot="public" static="no">
        <name>JPEG_MARKER_APP0</name>
        <initializer>0xe0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="23" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="23" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1aaf78d4b02fd283b9fbd481e49036331d" prot="public" static="no">
        <name>JPEG_MARKER_SOF0</name>
        <initializer>0xc0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="24" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="24" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1ace1cba21e90c695ff4ab9a944cf5b861" prot="public" static="no">
        <name>JPEG_MARKER_DHT</name>
        <initializer>0xc4</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="25" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="25" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a0369b1ea05269cf6fd5421459362ad88" prot="public" static="no">
        <name>JPEG_MARKER_SOS</name>
        <initializer>0xda</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="26" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="26" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a2e6f4c4acebf180b7e6fcd6e085f9c5d" prot="public" static="no">
        <name>JPEG_MARKER_DQT</name>
        <initializer>0xdb</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="27" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="27" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1af8a211b377fa3170d083fa645def7a52" prot="public" static="no">
        <name>JPEG_MARKER_EOI</name>
        <initializer>0xd9</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="28" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="28" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a3e36029079b043b106b24142f435682a" prot="public" static="no">
        <name>jpeg_list_for_each</name>
        <param><defname>node</defname></param>
        <param><defname>head</defname></param>
        <initializer>for (<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *node = (head)-&gt;nxt; node != (head); node = node-&gt;nxt)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="293" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="293" bodyend="294"/>
      </memberdef>
      <memberdef kind="define" id="hpm__jpeg_8c_1a9addf5a0e792abfcaa21708aa670332c" prot="public" static="no">
        <name>JPEG_INFO_DUMP</name>
        <param></param>
        <initializer>{\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;file_buf-&gt;is_direct: 0x%x\n&quot;, (uint32_t)file_buf-&gt;is_direct);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;file_buf-&gt;alloced_buf: 0x%x\n&quot;, (uint32_t)file_buf-&gt;alloced_buf);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;file_buf-&gt;alloced_len: %u\n&quot;, (uint32_t)file_buf-&gt;alloced_len);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;file_buf-&gt;aligned_buf: 0x%x\n&quot;, (uint32_t)file_buf-&gt;aligned_buf);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;file_buf-&gt;aligned_len: %u\n&quot;, (uint32_t)file_buf-&gt;aligned_len);\
\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image_buf-&gt;is_direct: 0x%x\n&quot;, (uint32_t)image_buf-&gt;is_direct);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image_buf-&gt;alloced_buf: 0x%x\n&quot;, (uint32_t)image_buf-&gt;alloced_buf);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image_buf-&gt;alloced_len: %u\n&quot;, (uint32_t)image_buf-&gt;alloced_len);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image_buf-&gt;aligned_buf: 0x%x\n&quot;, (uint32_t)image_buf-&gt;aligned_buf);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image_buf-&gt;aligned_len: %u\n&quot;, (uint32_t)image_buf-&gt;aligned_len);\
\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image-&gt;format: %u\n&quot;, (uint32_t)image-&gt;format);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image-&gt;height: %u\n&quot;, (uint32_t)image-&gt;height);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image-&gt;width: %u\n&quot;, (uint32_t)image-&gt;width);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image-&gt;stride: %u\n&quot;, (uint32_t)image-&gt;stride);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;image-&gt;image_buf: 0x%x\n&quot;, (uint32_t)image-&gt;image_buf);\
\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;soi: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;soi,\
                                (uint32_t)(jpeg_info-&gt;soi - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;soi - jpeg_info-&gt;soi));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;app0: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;app0,\
                                (uint32_t)(jpeg_info-&gt;app0 - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;app0 - jpeg_info-&gt;soi));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dqt[0]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dqt[0],\
                                (uint32_t)(jpeg_info-&gt;dqt[0] ?  jpeg_info-&gt;dqt[0] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dqt[0] ?  jpeg_info-&gt;dqt[0] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dqt[1]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dqt[1],\
                                (uint32_t)(jpeg_info-&gt;dqt[1] ?  jpeg_info-&gt;dqt[1] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dqt[1] ?  jpeg_info-&gt;dqt[1] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dqt[2]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dqt[2],\
                                (uint32_t)(jpeg_info-&gt;dqt[2] ?  jpeg_info-&gt;dqt[2] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dqt[2] ?  jpeg_info-&gt;dqt[2] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;sof0: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;sof0,\
                                (uint32_t)(jpeg_info-&gt;sof0 - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;sof0 - jpeg_info-&gt;soi));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dht_dc[0]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dht_dc[0],\
                                (uint32_t)(jpeg_info-&gt;dht_dc[0] ? jpeg_info-&gt;dht_dc[0] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dht_dc[0] ? jpeg_info-&gt;dht_dc[0] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dht_ac[0]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dht_ac[0],\
                                (uint32_t)(jpeg_info-&gt;dht_ac[0] ? jpeg_info-&gt;dht_ac[0] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dht_ac[0] ? jpeg_info-&gt;dht_ac[0] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dht_dc[1]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dht_dc[1],\
                                (uint32_t)(jpeg_info-&gt;dht_dc[1] ? jpeg_info-&gt;dht_dc[1] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dht_dc[1] ? jpeg_info-&gt;dht_dc[1] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;dht_ac[1]: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;dht_ac[1],\
                                (uint32_t)(jpeg_info-&gt;dht_ac[1] ? jpeg_info-&gt;dht_ac[1] - jpeg_info-&gt;soi : 0),\
                                (uint32_t)(jpeg_info-&gt;dht_ac[1] ? jpeg_info-&gt;dht_ac[1] - jpeg_info-&gt;soi : 0));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;sos: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;sos,\
                                (uint32_t)(jpeg_info-&gt;sos - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;sos - jpeg_info-&gt;soi));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;ecs: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;ecs,\
                                (uint32_t)(jpeg_info-&gt;ecs - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;ecs - jpeg_info-&gt;soi));\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;ecs_len: %u\n&quot;, (uint32_t)jpeg_info-&gt;ecs_len);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;jpeg_info-&gt;eoi: 0x%x, offset: %u[0x%x]\n&quot;,\
                                (uint32_t)jpeg_info-&gt;eoi,\
                                (uint32_t)(jpeg_info-&gt;eoi - jpeg_info-&gt;soi),\
                                (uint32_t)(jpeg_info-&gt;eoi - jpeg_info-&gt;soi));\
\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 x: %u\n&quot;, sof0_info-&gt;x);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 y: %u\n&quot;, sof0_info-&gt;y);\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 nf: %u\n&quot;, sof0_info-&gt;nf);\
    for (uint32_t i = 0; i &lt; sof0_info-&gt;nf; i++) {\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 component[%u].c: %u\n&quot;, i, sof0_info-&gt;component[i].c);\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 component[%u].h: %u\n&quot;, i, sof0_info-&gt;component[i].h);\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 component[%u].v: %u\n&quot;, i, sof0_info-&gt;component[i].v);\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sof0 component[%u].tq: %u\n&quot;, i, sof0_info-&gt;component[i].tq);\
    } \
\
    <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sos ns: %u\n&quot;, sos_info-&gt;ns);\
    for (uint32_t i = 0; i &lt; sos_info-&gt;ns; i++) {\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sos component[%u].cs: %u\n&quot;, i, sos_info-&gt;component[i].cs);\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sos component[%u].ta: %u\n&quot;, i, sos_info-&gt;component[i].ta);\
        <ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(&quot;sos component[%u].td: %u\n&quot;, i, sos_info-&gt;component[i].td);\
    } \
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1593" column="9" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1593" bodyend="1683"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="enum">
      <memberdef kind="enum" id="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129e" prot="public" static="no" strong="no">
        <type></type>
        <name>hpm_jpeg_codec_type</name>
        <enumvalue id="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129eaf5778f6c28727e5e4e8b71d0f2aec210" prot="public">
          <name>HPM_JPEG_CODEC_DECODE</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" prot="public">
          <name>HPM_JPEG_CODEC_ENCODE</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="41" column="1" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="41" bodyend="44"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="typedef">
      <memberdef kind="typedef" id="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__core__htab" kindref="compound">hpm_jpeg_core_htab</ref></type>
        <definition>typedef struct hpm_jpeg_core_htab hpm_jpeg_core_htab_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_core_htab_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="35" column="22"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__core__qtab" kindref="compound">hpm_jpeg_core_qtab</ref></type>
        <definition>typedef struct hpm_jpeg_core_qtab hpm_jpeg_core_qtab_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_core_qtab_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="39" column="22"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a3b3311ef9198ffce686ad3d3fef5b3fa" prot="public" static="no">
        <type>enum <ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129e" kindref="member">hpm_jpeg_codec_type</ref></type>
        <definition>typedef enum hpm_jpeg_codec_type hpm_jpeg_codec_type_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_codec_type_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="44" column="23"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__sof0__info" kindref="compound">hpm_jpeg_sof0_info</ref></type>
        <definition>typedef struct hpm_jpeg_sof0_info hpm_jpeg_sof0_info_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_sof0_info_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="61" column="22"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__sos__info" kindref="compound">hpm_jpeg_sos_info</ref></type>
        <definition>typedef struct hpm_jpeg_sos_info hpm_jpeg_sos_info_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_sos_info_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="78" column="21"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__jpeg__info" kindref="compound">hpm_jpeg_jpeg_info</ref></type>
        <definition>typedef struct hpm_jpeg_jpeg_info hpm_jpeg_jpeg_info_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_jpeg_info_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="91" column="22"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__sampling__tab" kindref="compound">hpm_jpeg_sampling_tab</ref></type>
        <definition>typedef struct hpm_jpeg_sampling_tab hpm_jpeg_sampling_tab_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_sampling_tab_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="99" column="25"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1afcb30f396a4270323f2e6f3eb27d0029" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__std__tab" kindref="compound">hpm_jpeg_std_tab</ref></type>
        <definition>typedef struct hpm_jpeg_std_tab hpm_jpeg_std_tab_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_std_tab_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="108" column="20"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__buf" kindref="compound">hpm_jpeg_buf</ref></type>
        <definition>typedef struct hpm_jpeg_buf hpm_jpeg_buf_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_buf_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="117" column="16"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" prot="public" static="no">
        <type>struct <ref refid="structjpeg__list" kindref="compound">jpeg_list</ref></type>
        <definition>typedef struct jpeg_list jpeg_list_t</definition>
        <argsstring></argsstring>
        <name>jpeg_list_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="122" column="13"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref></type>
        <definition>typedef struct hpm_jpeg_context hpm_jpeg_context_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_context_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="133" column="20"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__base__job" kindref="compound">hpm_jpeg_base_job</ref></type>
        <definition>typedef struct hpm_jpeg_base_job hpm_jpeg_base_job_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_base_job_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="143" column="21"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__decode__job" kindref="compound">hpm_jpeg_decode_job</ref></type>
        <definition>typedef struct hpm_jpeg_decode_job hpm_jpeg_decode_job_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_decode_job_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="159" column="23"/>
      </memberdef>
      <memberdef kind="typedef" id="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" prot="public" static="no">
        <type>struct <ref refid="structhpm__jpeg__encode__job" kindref="compound">hpm_jpeg_encode_job</ref></type>
        <definition>typedef struct hpm_jpeg_encode_job hpm_jpeg_encode_job_t</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_encode_job_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="177" column="23"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="var">
      <memberdef kind="variable" id="hpm__jpeg_8c_1a47f058e65af9c7400b0b7568b4e64b76" prot="public" static="yes" mutable="no">
        <type><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref></type>
        <definition>hpm_jpeg_context_t hpm_jpeg_context</definition>
        <argsstring></argsstring>
        <name>hpm_jpeg_context</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="179" column="27" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="179" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1afb620aae94109b1d7092bc2799e2ab4f" prot="public" static="yes" mutable="no">
        <type>const uint16_t</type>
        <definition>const uint16_t qlook[256]</definition>
        <argsstring>[256]</argsstring>
        <name>qlook</name>
        <initializer>= {
    0x0000, 0x0001, 0x0400, 0x02ab, 0x0200, 0x0b33, 0x0155, 0x0a49,
    0x0100, 0x09c7, 0x00cd, 0x12e9, 0x0955, 0x093b, 0x1249, 0x0911,
    0x0080, 0x08f1, 0x11c7, 0x11af, 0x08cd, 0x08c3, 0x08ba, 0x08b2,
    0x1155, 0x251f, 0x113b, 0x1a5f, 0x1a49, 0x1a35, 0x1111, 0x2421,
    0x0880, 0x23e1, 0x10f1, 0x10ea, 0x19c7, 0x19bb, 0x19af, 0x10d2,
    0x10cd, 0x231f, 0x10c3, 0x197d, 0x10ba, 0x10b6, 0x10b2, 0x22b9,
    0x1955, 0x229d, 0x10a4, 0x2d05, 0x193b, 0x1935, 0x225f, 0x1095,
    0x2249, 0x223f, 0x2235, 0x2c57, 0x1911, 0x2219, 0x1084, 0x1082,
    0x1080, 0x18fc, 0x18f8, 0x21e9, 0x18f1, 0x21db, 0x18ea, 0x2b9b,
    0x21c7, 0x21c1, 0x21bb, 0x21b5, 0x21af, 0x2b53, 0x18d2, 0x367b,
    0x18cd, 0x2b29, 0x18c8, 0x218b, 0x18c3, 0x2b03, 0x217d, 0x2af1,
    0x18ba, 0x18b8, 0x18b6, 0x18b4, 0x18b2, 0x2ac1, 0x2ab9, 0x2159,
    0x2155, 0x3547, 0x2a9d, 0x214b, 0x18a4, 0x2a89, 0x2141, 0x189f,
    0x213b, 0x189c, 0x2135, 0x34c9, 0x2a5f, 0x2a59, 0x1895, 0x349d,
    0x2a49, 0x1891, 0x2a3f, 0x211d, 0x2a35, 0x188c, 0x2a2b, 0x344d,
    0x2111, 0x343b, 0x2a19, 0x2a15, 0x1884, 0x3419, 0x1882, 0x1881,
    0x1880, 0x20fe, 0x20fc, 0x33e9, 0x20f8, 0x3fb3, 0x29e9, 0x33cb,
    0x20f1, 0x33bd, 0x29db, 0x33af, 0x20ea, 0x29d1, 0x20e7, 0x3395,
    0x29c7, 0x20e2, 0x29c1, 0x20df, 0x29bb, 0x20dc, 0x29b5, 0x20d9,
    0x29af, 0x3359, 0x3353, 0x29a7, 0x20d2, 0x3343, 0x299f, 0x20ce,
    0x20cd, 0x2997, 0x3329, 0x20c9, 0x20c8, 0x298d, 0x298b, 0x3311,
    0x20c3, 0x3e0f, 0x3303, 0x3dfd, 0x297d, 0x297b, 0x2979, 0x32ed,
    0x20ba, 0x3dc9, 0x20b8, 0x20b7, 0x20b6, 0x20b5, 0x20b4, 0x20b3,
    0x20b2, 0x3d89, 0x20b0, 0x32bd, 0x295d, 0x3d6b, 0x2959, 0x2957,
    0x2955, 0x32a7, 0x20a9, 0x20a8, 0x20a7, 0x3299, 0x294b, 0x3293,
    0x20a4, 0x20a3, 0x3289, 0x2943, 0x2941, 0x3cff, 0x209f, 0x3279,
    0x293b, 0x3273, 0x209c, 0x326d, 0x2935, 0x3ccf, 0x2099, 0x3cc3,
    0x325f, 0x2097, 0x3259, 0x3cad, 0x2095, 0x3251, 0x2927, 0x2093,
    0x3249, 0x3c8d, 0x2091, 0x3c83, 0x323f, 0x3c79, 0x291d, 0x3c6f,
    0x3235, 0x3c65, 0x208c, 0x2917, 0x208b, 0x3229, 0x3227, 0x3c49,
    0x2911, 0x2088, 0x290f, 0x3c37, 0x3219, 0x3217, 0x3215, 0x3c25,
    0x2084, 0x3c1d, 0x2083, 0x2905, 0x2082, 0x2903, 0x2081, 0x2901
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="510" column="23" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="510" bodyend="543"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" prot="public" static="yes" mutable="no">
        <type>const <ref refid="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" kindref="member">hpm_jpeg_sampling_tab_t</ref></type>
        <definition>const hpm_jpeg_sampling_tab_t sampling_tabs[]</definition>
        <argsstring>[]</argsstring>
        <name>sampling_tabs</name>
        <initializer>= {
    {2, 2, 1, 1, <ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea71cd4ed2b6a30976dc94bf849762dfe5" kindref="member">HPM_JPEG_SAMPLING_FORMAT_420</ref>},
    {2, 1, 1, 1, <ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeaf4c3d1779b4044b80aad48658906a321" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422H</ref>},
    {1, 2, 1, 1, <ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea010728d72728307221c3ea8203434b8a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422V</ref>},
    {1, 1, 1, 1, <ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeac7a0b7d48d2e894b7c3cf30c8753f7ad" kindref="member">HPM_JPEG_SAMPLING_FORMAT_444</ref>},
    {2, 2, 0, 0, <ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>},
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="617" column="38" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="617" bodyend="623"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1a4e56ff9dba9d3bb7eb4c9f54614ef715" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t std_app0[]</definition>
        <argsstring>[]</argsstring>
        <name>std_app0</name>
        <initializer>= {
    0xff, 0xe0, 0x00, 0x10, 0x4a, 0x46, 0x49, 0x46, 0x00, 0x01, 0x01, 0x01, 0x00, 0x48,
    0x00, 0x48, 0x00, 0x00
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="845" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="845" bodyend="848"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1aa14a4df26e39ce2ffb78932edc94af1e" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t jpeg_std_htab_ac0[]</definition>
        <argsstring>[]</argsstring>
        <name>jpeg_std_htab_ac0</name>
        <initializer>= {
    0xFF, 0xC4, 0x00, 0xB5, 0x10, 0x00, 0x02, 0x01, 0x03, 0x03, 0x02, 0x04, 0x03, 0x05, 0x05, 0x04,
    0x04, 0x00, 0x00, 0x01, 0x7D, 0x01, 0x02, 0x03, 0x00, 0x04, 0x11, 0x05, 0x12, 0x21, 0x31, 0x41,
    0x06, 0x13, 0x51, 0x61, 0x07, 0x22, 0x71, 0x14, 0x32, 0x81, 0x91, 0xA1, 0x08, 0x23, 0x42, 0xB1,
    0xC1, 0x15, 0x52, 0xD1, 0xF0, 0x24, 0x33, 0x62, 0x72, 0x82, 0x09, 0x0A, 0x16, 0x17, 0x18, 0x19,
    0x1A, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2A, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A, 0x43, 0x44,
    0x45, 0x46, 0x47, 0x48, 0x49, 0x4A, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5A, 0x63, 0x64,
    0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x73, 0x74, 0x75, 0x76, 0x77, 0x78, 0x79, 0x7A, 0x83, 0x84,
    0x85, 0x86, 0x87, 0x88, 0x89, 0x8A, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97, 0x98, 0x99, 0x9A, 0xA2,
    0xA3, 0xA4, 0xA5, 0xA6, 0xA7, 0xA8, 0xA9, 0xAA, 0xB2, 0xB3, 0xB4, 0xB5, 0xB6, 0xB7, 0xB8, 0xB9,
    0xBA, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7, 0xC8, 0xC9, 0xCA, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6, 0xD7,
    0xD8, 0xD9, 0xDA, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7, 0xE8, 0xE9, 0xEA, 0xF1, 0xF2, 0xF3,
    0xF4, 0xF5, 0xF6, 0xF7, 0xF8, 0xF9, 0xFA
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="850" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="850" bodyend="863"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1a5505b6e481418cbd352b76e74bfae2f4" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t jpeg_std_htab_ac1[]</definition>
        <argsstring>[]</argsstring>
        <name>jpeg_std_htab_ac1</name>
        <initializer>= {
    0xFF, 0xC4, 0x00, 0xB5, 0x11, 0x00, 0x02, 0x01, 0x02, 0x04, 0x04, 0x03, 0x04, 0x07, 0x05, 0x04,
    0x04, 0x00, 0x01, 0x02, 0x77, 0x00, 0x01, 0x02, 0x03, 0x11, 0x04, 0x05, 0x21, 0x31, 0x06, 0x12,
    0x41, 0x51, 0x07, 0x61, 0x71, 0x13, 0x22, 0x32, 0x81, 0x08, 0x14, 0x42, 0x91, 0xA1, 0xB1, 0xC1,
    0x09, 0x23, 0x33, 0x52, 0xF0, 0x15, 0x62, 0x72, 0xD1, 0x0A, 0x16, 0x24, 0x34, 0xE1, 0x25, 0xF1,
    0x17, 0x18, 0x19, 0x1A, 0x26, 0x27, 0x28, 0x29, 0x2A, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A, 0x43,
    0x44, 0x45, 0x46, 0x47, 0x48, 0x49, 0x4A, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5A, 0x63,
    0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x73, 0x74, 0x75, 0x76, 0x77, 0x78, 0x79, 0x7A, 0x82,
    0x83, 0x84, 0x85, 0x86, 0x87, 0x88, 0x89, 0x8A, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97, 0x98, 0x99,
    0x9A, 0xA2, 0xA3, 0xA4, 0xA5, 0xA6, 0xA7, 0xA8, 0xA9, 0xAA, 0xB2, 0xB3, 0xB4, 0xB5, 0xB6, 0xB7,
    0xB8, 0xB9, 0xBA, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7, 0xC8, 0xC9, 0xCA, 0xD2, 0xD3, 0xD4, 0xD5,
    0xD6, 0xD7, 0xD8, 0xD9, 0xDA, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7, 0xE8, 0xE9, 0xEA, 0xF2, 0xF3,
    0xF4, 0xF5, 0xF6, 0xF7, 0xF8, 0xF9, 0xFA
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="865" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="865" bodyend="878"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1a0dedcffc5574889b0336aa5f77d03b32" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t jpeg_std_htab_dc0[]</definition>
        <argsstring>[]</argsstring>
        <name>jpeg_std_htab_dc0</name>
        <initializer>= {
    0xFF, 0xC4, 0x00, 0x1F, 0x00, 0x00, 0x01, 0x05, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
    0x0B
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="880" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="880" bodyend="884"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1a0b27b28313ea1667de6bb485faa17b54" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t jpeg_std_htab_dc1[]</definition>
        <argsstring>[]</argsstring>
        <name>jpeg_std_htab_dc1</name>
        <initializer>= {
    0xFF, 0xC4, 0x00, 0x1F, 0x01, 0x00, 0x03, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
    0x0B
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="886" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="886" bodyend="890"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1ae84dde12a88313ba543559a0b47a0f6b" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t std_luminance_qtab[64]</definition>
        <argsstring>[64]</argsstring>
        <name>std_luminance_qtab</name>
        <initializer>= {
    16,  11,  10,  16,  24,  40,  51,  61,
    12,  12,  14,  19,  26,  58,  60,  55,
    14,  13,  16,  24,  40,  57,  69,  56,
    14,  17,  22,  29,  51,  87,  80,  62,
    18,  22,  37,  56,  68, 109, 103,  77,
    24,  35,  55,  64,  81, 104, 113,  92,
    49,  64,  78,  87, 103, 121, 120, 101,
    72,  92,  95,  98, 112, 100, 103,  99
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="896" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="896" bodyend="905"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__jpeg_8c_1ad2f4a42ca000c47da6601c4e4961ca21" prot="public" static="yes" mutable="no">
        <type>const uint8_t</type>
        <definition>const uint8_t std_chrominance_qtab[64]</definition>
        <argsstring>[64]</argsstring>
        <name>std_chrominance_qtab</name>
        <initializer>= {
    17,  18,  24,  47,  99,  99,  99,  99,
    18,  21,  26,  66,  99,  99,  99,  99,
    24,  26,  56,  99,  99,  99,  99,  99,
    47,  66,  99,  99,  99,  99,  99,  99,
    99,  99,  99,  99,  99,  99,  99,  99,
    99,  99,  99,  99,  99,  99,  99,  99,
    99,  99,  99,  99,  99,  99,  99,  99,
    99,  99,  99,  99,  99,  99,  99,  99
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="907" column="22" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="907" bodyend="916"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>uint32_t</type>
        <definition>static uint32_t hpm_jpeg_lock</definition>
        <argsstring>(void)</argsstring>
        <name>hpm_jpeg_lock</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="181" column="24" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="181" bodyend="184"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpeg_unlock</definition>
        <argsstring>(uint32_t restore)</argsstring>
        <name>hpm_jpeg_unlock</name>
        <param>
          <type>uint32_t</type>
          <declname>restore</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="186" column="20" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="186" bodyend="189"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>static void * hpm_jpeg_malloc</definition>
        <argsstring>(uint32_t size)</argsstring>
        <name>hpm_jpeg_malloc</name>
        <param>
          <type>uint32_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="191" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="191" bodyend="199"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpeg_free</definition>
        <argsstring>(void *ptr)</argsstring>
        <name>hpm_jpeg_free</name>
        <param>
          <type>void *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="201" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="201" bodyend="211"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1aa3cd92752a61b59b8c1a1cc08b31957d" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>uint32_t</type>
        <definition>static uint32_t hpm_jpeg_cache_line_size</definition>
        <argsstring>(void)</argsstring>
        <name>hpm_jpeg_cache_line_size</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="213" column="24" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="213" bodyend="221"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1af83f4cfc02bdc77d781b359d6bfc5f6d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpeg_cache_writeback</definition>
        <argsstring>(void *start, uint32_t size)</argsstring>
        <name>hpm_jpeg_cache_writeback</name>
        <param>
          <type>void *</type>
          <declname>start</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="223" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="223" bodyend="235"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a0531698a38a4efa1727c0afbf45fa732" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpeg_cache_invalid</definition>
        <argsstring>(void *start, uint32_t size)</argsstring>
        <name>hpm_jpeg_cache_invalid</name>
        <param>
          <type>void *</type>
          <declname>start</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="237" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="237" bodyend="249"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a2d2ad3b33af487c242b26d4710213792" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void jpeg_list_node_init</definition>
        <argsstring>(jpeg_list_t *node)</argsstring>
        <name>jpeg_list_node_init</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
          <declname>node</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="251" column="20" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="251" bodyend="255"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a6ff2f9e8c06aaa86dd2d118f3b3f65ff" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void jpeg_list_del</definition>
        <argsstring>(jpeg_list_t *node)</argsstring>
        <name>jpeg_list_del</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
          <declname>node</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="257" column="20" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="257" bodyend="261"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1add0fb006d7a62ff3fb1bedf08d7d4d0f" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void jpeg_list_add_tail</definition>
        <argsstring>(jpeg_list_t *head, jpeg_list_t *node)</argsstring>
        <name>jpeg_list_add_tail</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
          <declname>head</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
          <declname>node</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="273" column="20" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="273" bodyend="279"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a382b709af09267c647207d2f67d9b1aa" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
        <definition>static jpeg_list_t * jpeg_list_node_get</definition>
        <argsstring>(jpeg_list_t *head)</argsstring>
        <name>jpeg_list_node_get</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref> *</type>
          <declname>head</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="281" column="27" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="281" bodyend="291"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ab348b2be717d2c5b653fe125ad223cd7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_jpeg_hexdump</definition>
        <argsstring>(void *str, const void *data, uint32_t data_len)</argsstring>
        <name>hpm_jpeg_hexdump</name>
        <param>
          <type>void *</type>
          <declname>str</declname>
        </param>
        <param>
          <type>const void *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>data_len</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="296" column="6" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="296" bodyend="303"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a75a283e51949683300d51e90cb2b0ab5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_create_htab_for_core</definition>
        <argsstring>(hpm_jpeg_core_htab_t *htab_core, void *dht_ac0, void *dht_ac1, void *dht_dc0, void *dht_dc1)</argsstring>
        <name>hpm_jpeg_create_htab_for_core</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref> *</type>
          <declname>htab_core</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>dht_ac0</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>dht_ac1</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>dht_dc0</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>dht_dc1</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="305" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="305" bodyend="508"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a35dfe446431b1063b135d8919276d25d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_create_qtab_for_core</definition>
        <argsstring>(hpm_jpeg_core_qtab_t *qtab_core, int is_encode, uint8_t *jpeg_qtabs[])</argsstring>
        <name>hpm_jpeg_create_qtab_for_core</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref> *</type>
          <declname>qtab_core</declname>
        </param>
        <param>
          <type>int</type>
          <declname>is_encode</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>jpeg_qtabs</declname>
          <array>[]</array>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="545" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="545" bodyend="590"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1aa1d5574d7706ee0bdf85e93624b6b3a1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_align_pixel</definition>
        <argsstring>(hpm_jpeg_sampling_format_t sampling, uint16_t *x, uint16_t *y)</argsstring>
        <name>hpm_jpeg_get_align_pixel</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref></type>
          <declname>sampling</declname>
        </param>
        <param>
          <type>uint16_t *</type>
          <declname>x</declname>
        </param>
        <param>
          <type>uint16_t *</type>
          <declname>y</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="592" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="592" bodyend="615"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a831720ff74acfc2cc4f612d3f5929118" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_sof0_info_from_buf</definition>
        <argsstring>(const void *sof0, hpm_jpeg_sof0_info_t *info)</argsstring>
        <name>hpm_jpeg_get_sof0_info_from_buf</name>
        <param>
          <type>const void *</type>
          <declname>sof0</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="625" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="625" bodyend="654"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a5f4c5af1eac3cc9d302e5121313c0f12" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_set_sof0_info_to_buf</definition>
        <argsstring>(void *sof0, const hpm_jpeg_sof0_info_t *info)</argsstring>
        <name>hpm_jpeg_set_sof0_info_to_buf</name>
        <param>
          <type>void *</type>
          <declname>sof0</declname>
        </param>
        <param>
          <type>const <ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="656" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="656" bodyend="684"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a382b75d648cc5cd667fbee63f38768be" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_sampling_format_from_sof0_info</definition>
        <argsstring>(hpm_jpeg_sof0_info_t *info, hpm_jpeg_sampling_format_t *sampling)</argsstring>
        <name>hpm_jpeg_get_sampling_format_from_sof0_info</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref> *</type>
          <declname>sampling</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="686" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="686" bodyend="705"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1afbaf9ddd49f017d1d516a283a9f5ff3d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_init_sof0_info</definition>
        <argsstring>(hpm_jpeg_sof0_info_t *info, hpm_jpeg_sampling_format_t sampling, uint16_t x, uint16_t y)</argsstring>
        <name>hpm_jpeg_init_sof0_info</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref></type>
          <declname>sampling</declname>
        </param>
        <param>
          <type>uint16_t</type>
          <declname>x</declname>
        </param>
        <param>
          <type>uint16_t</type>
          <declname>y</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="707" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="707" bodyend="752"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ac87967e3bca3b46e0f2b1926657c598f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_sos_info_from_buf</definition>
        <argsstring>(const void *sos, hpm_jpeg_sos_info_t *info)</argsstring>
        <name>hpm_jpeg_get_sos_info_from_buf</name>
        <param>
          <type>const void *</type>
          <declname>sos</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="754" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="754" bodyend="784"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a98df55d31c2011763c8430963d39eabd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_set_sos_info_to_buf</definition>
        <argsstring>(void *sos, const hpm_jpeg_sos_info_t *info)</argsstring>
        <name>hpm_jpeg_set_sos_info_to_buf</name>
        <param>
          <type>void *</type>
          <declname>sos</declname>
        </param>
        <param>
          <type>const <ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="786" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="786" bodyend="812"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1aa883dd00e119b98ecbb9624ccad70c62" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_init_sos_info</definition>
        <argsstring>(hpm_jpeg_sos_info_t *info, hpm_jpeg_sampling_format_t sampling)</argsstring>
        <name>hpm_jpeg_init_sos_info</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref></type>
          <declname>sampling</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="814" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="814" bodyend="843"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a1f334a653fa5b816422207282e7db4eb" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpege_quality_scaling</definition>
        <argsstring>(int quality)</argsstring>
        <name>hpm_jpege_quality_scaling</name>
        <param>
          <type>int</type>
          <declname>quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="922" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="922" bodyend="942"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a70ad627d6c48bb3c8664d81c41baabeb" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpege_scale_qtab</definition>
        <argsstring>(uint8_t *qtab_scaled, const uint8_t *qtab_basic, int quality)</argsstring>
        <name>hpm_jpege_scale_qtab</name>
        <param>
          <type>uint8_t *</type>
          <declname>qtab_scaled</declname>
        </param>
        <param>
          <type>const uint8_t *</type>
          <declname>qtab_basic</declname>
        </param>
        <param>
          <type>int</type>
          <declname>quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="944" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="944" bodyend="960"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a5652e3e39a26f68b76555947e4e6caef" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpege_get_qtab_luminance</definition>
        <argsstring>(uint8_t *qtab_zig_zag, int quality)</argsstring>
        <name>hpm_jpege_get_qtab_luminance</name>
        <param>
          <type>uint8_t *</type>
          <declname>qtab_zig_zag</declname>
        </param>
        <param>
          <type>int</type>
          <declname>quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="962" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="962" bodyend="965"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1acac5b67987b106721ece9ac1e0d2d788" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void hpm_jpege_get_qtab_chrominance</definition>
        <argsstring>(uint8_t *qtab_zig_zag, int quality)</argsstring>
        <name>hpm_jpege_get_qtab_chrominance</name>
        <param>
          <type>uint8_t *</type>
          <declname>qtab_zig_zag</declname>
        </param>
        <param>
          <type>int</type>
          <declname>quality</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="967" column="13" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="967" bodyend="970"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a0b01665f2101695dd4d4ec52e2ff812f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_fill_jpeg_info_to_file</definition>
        <argsstring>(hpm_jpeg_encode_job_t *job, void *buf, uint32_t len)</argsstring>
        <name>hpm_jpeg_fill_jpeg_info_to_file</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>buf</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="972" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="972" bodyend="1076"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a18212764ba2d5bafcfd73bffa2d67d89" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_jpeg_info_from_file</definition>
        <argsstring>(hpm_jpeg_jpeg_info_t *info, const void *buf, uint32_t len)</argsstring>
        <name>hpm_jpeg_get_jpeg_info_from_file</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <param>
          <type>const void *</type>
          <declname>buf</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1078" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1078" bodyend="1188"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a985250cb3ede902c6679d80a18280e7f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_get_pixel_size</definition>
        <argsstring>(hpm_jpeg_image_format_t format)</argsstring>
        <name>hpm_jpeg_get_pixel_size</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a1a37698ef48fb9339bc31c69cbc2d42a" kindref="member">hpm_jpeg_image_format_t</ref></type>
          <declname>format</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1190" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1190" bodyend="1210"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a45ec5e3154016d7961d6f9badd5214dc" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_decode_image_buf_init</definition>
        <argsstring>(hpm_jpeg_decode_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_image_buf_init</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1212" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1212" bodyend="1284"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ad2cd5153994a82aca83d70fc700678be" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_decode_image_buf_deinit</definition>
        <argsstring>(hpm_jpeg_decode_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_image_buf_deinit</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1286" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1286" bodyend="1297"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a9475c7ddb9db94ae7ad42f42c9fc1019" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_encode_file_buf_init</definition>
        <argsstring>(hpm_jpeg_encode_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_file_buf_init</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1299" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1299" bodyend="1355"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a8ef2bdbdd2777d705e048b5f4ff1e36a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_encode_file_buf_deinit</definition>
        <argsstring>(hpm_jpeg_encode_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_file_buf_deinit</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1357" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1357" bodyend="1368"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1acbdfe1ecff1e917b393ec8391eb4c6de" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_interrupt_enable</definition>
        <argsstring>(hpm_jpeg_context_t *ctx)</argsstring>
        <name>hpm_jpeg_interrupt_enable</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref> *</type>
          <declname>ctx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1370" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1370" bodyend="1375"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a370ac81b962b66140571ae740b197231" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_decode_config_and_start</definition>
        <argsstring>(hpm_jpeg_decode_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_config_and_start</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1377" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1377" bodyend="1438"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1af557c0b6eed74f0881e39dd890b07700" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_encode_config_and_start</definition>
        <argsstring>(hpm_jpeg_encode_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_config_and_start</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1440" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1440" bodyend="1502"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ac13301c1018964fc75a261176632ac50" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_decode_init_tabs</definition>
        <argsstring>(hpm_jpeg_decode_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_init_tabs</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1504" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1504" bodyend="1520"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a1586712d4b9e3c90bc9bb3c417ca917b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_encode_init_tabs</definition>
        <argsstring>(hpm_jpeg_encode_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_init_tabs</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1522" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1522" bodyend="1538"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a7152984d67dfa27bffebe0a4fb37596b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int hpm_jpeg_start_next_job</definition>
        <argsstring>(hpm_jpeg_context_t *ctx)</argsstring>
        <name>hpm_jpeg_start_next_job</name>
        <param>
          <type><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref> *</type>
          <declname>ctx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1540" column="12" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1540" bodyend="1591"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a0843845165be9c19f1f32adc18d9b361" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
        <definition>hpm_jpeg_job_t * hpm_jpeg_decode_job_alloc</definition>
        <argsstring>(hpm_jpeg_decode_cfg_t *cfg)</argsstring>
        <name>hpm_jpeg_decode_job_alloc</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1afe8913c260b533f03381b9200c43b6d9" kindref="member">hpm_jpeg_decode_cfg_t</ref> *</type>
          <declname>cfg</declname>
        </param>
        <briefdescription>
<para>Alloc a decode job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">cfg</parametername>
</parameternamelist>
<parameterdescription>
<para>job configuration pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>decode job pointer </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1685" column="16" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1685" bodyend="1706"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1afc042d61b8b7c53f4aaae00ece47fcfb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_fill_file</definition>
        <argsstring>(hpm_jpeg_job_t *job, const hpm_jpeg_file_t *file, int direct)</argsstring>
        <name>hpm_jpeg_decode_job_fill_file</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>const <ref refid="hpm__jpeg_8h_1a497c1f9287dbaca17b7f13e7891a15d3" kindref="member">hpm_jpeg_file_t</ref> *</type>
          <declname>file</declname>
        </param>
        <param>
          <type>int</type>
          <declname>direct</declname>
        </param>
        <briefdescription>
<para>Fill jpeg file to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">file</parametername>
</parameternamelist>
<parameterdescription>
<para>jpeg file data </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">direct</parametername>
</parameternamelist>
<parameterdescription>
<para>1: The buffer of file will be used by decoder. 0: Firstly, the buffer of file is copied to internal buffer and the internal buffer will be used.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1708" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1708" bodyend="1779"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a1486d7b943ceb3c30d8f6708bc12a8aa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_force_direct_image_buf</definition>
        <argsstring>(hpm_jpeg_job_t *job, void *buf, uint32_t len)</argsstring>
        <name>hpm_jpeg_decode_job_force_direct_image_buf</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>buf</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
<para>Set a buffer that is used by decoder out image to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">buf</parametername>
</parameternamelist>
<parameterdescription>
<para>Receive decode image data. the buf will be used decoder, so nocacheable buffer is recommend. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">len</parametername>
</parameternamelist>
<parameterdescription>
<para>The buf length</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code</para>
</simplesect>
Note: Internal buffer will be used if the buf have not been set. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1781" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1781" bodyend="1800"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a73b80d4eaa4b6ecd80f5b89fb2bfb095" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_start</definition>
        <argsstring>(hpm_jpeg_job_t *job, hpm_jpeg_job_state_cb_t cb)</argsstring>
        <name>hpm_jpeg_decode_job_start</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a449bfc8615bb44afab138bc380043301" kindref="member">hpm_jpeg_job_state_cb_t</ref></type>
          <declname>cb</declname>
        </param>
        <briefdescription>
<para>Start decode of the job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">cb</parametername>
</parameternamelist>
<parameterdescription>
<para>job state notice callback</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code</para>
</simplesect>
Note: The cb is called in isr, long-time or complex operation are not recommend. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1802" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1802" bodyend="1897"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a8ea786b9f9dce82fd6bbba7e997ba1b7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_stop</definition>
        <argsstring>(hpm_jpeg_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_job_stop</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
<para>Stop decode of the job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1899" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1899" bodyend="1915"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a35b1610d4c623e8e579c196507a1007f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_get_info</definition>
        <argsstring>(hpm_jpeg_job_t *job, hpm_jpeg_decode_info_t *info)</argsstring>
        <name>hpm_jpeg_decode_job_get_info</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a32e4c27f3a3d9d48fae1f1cc6164feaf" kindref="member">hpm_jpeg_decode_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
<para>Get job work info. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">info</parametername>
</parameternamelist>
<parameterdescription>
<para>job work info pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1917" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1917" bodyend="1927"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a6fea9f315e8e7678030e4adf1fcb8327" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_decode_job_free</definition>
        <argsstring>(hpm_jpeg_job_t *job)</argsstring>
        <name>hpm_jpeg_decode_job_free</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
<para>Free decode job. All source of job will be free. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>decode job pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1929" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1929" bodyend="1946"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a1a7bcd85acb1b80910add26e789dba94" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
        <definition>hpm_jpeg_job_t * hpm_jpeg_encode_job_alloc</definition>
        <argsstring>(hpm_jpeg_encode_cfg_t *cfg)</argsstring>
        <name>hpm_jpeg_encode_job_alloc</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref> *</type>
          <declname>cfg</declname>
        </param>
        <briefdescription>
<para>Alloc a encode job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">cfg</parametername>
</parameternamelist>
<parameterdescription>
<para>job configuration pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>encode job pointer </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1948" column="16" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1948" bodyend="1971"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a5d25f2af1f8b1a1b093e65439e5e1f15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_fill_image</definition>
        <argsstring>(hpm_jpeg_job_t *job, const hpm_jpeg_image_t *image, int direct)</argsstring>
        <name>hpm_jpeg_encode_job_fill_image</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>const <ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref> *</type>
          <declname>image</declname>
        </param>
        <param>
          <type>int</type>
          <declname>direct</declname>
        </param>
        <briefdescription>
<para>Fill image data to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">image</parametername>
</parameternamelist>
<parameterdescription>
<para>image data for waiting encode </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">direct</parametername>
</parameternamelist>
<parameterdescription>
<para>1: The buffer of file will be used by encoder. 0: Firstly, the buffer of image is copied to internal buffer and the internal buffer will be used.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="1973" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="1973" bodyend="2114"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a0a215809c6d5ee36da23945a4b9b4857" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_force_direct_file_buf</definition>
        <argsstring>(hpm_jpeg_job_t *job, void *file_buf, uint32_t len)</argsstring>
        <name>hpm_jpeg_encode_job_force_direct_file_buf</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>buf</declname>
          <defname>file_buf</defname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
<para>Set a buffer that is used by encoder out jpeg file to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">buf</parametername>
</parameternamelist>
<parameterdescription>
<para>Receive encode jpeg file data. the buf will be used encoder, so nocacheable buffer is recommend. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">len</parametername>
</parameternamelist>
<parameterdescription>
<para>The buf length</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code</para>
</simplesect>
Note: Internal buffer will be used if the buf have not been set. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2116" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2116" bodyend="2135"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1aadef0d233f1d42a7298a4609fca228ea" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_start</definition>
        <argsstring>(hpm_jpeg_job_t *job, hpm_jpeg_job_state_cb_t cb)</argsstring>
        <name>hpm_jpeg_encode_job_start</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a449bfc8615bb44afab138bc380043301" kindref="member">hpm_jpeg_job_state_cb_t</ref></type>
          <declname>cb</declname>
        </param>
        <briefdescription>
<para>Start encode of the job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">cb</parametername>
</parameternamelist>
<parameterdescription>
<para>job state notice callback</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code</para>
</simplesect>
Note: The cb is called in isr, long-time or complex operation are not recommend. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2137" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2137" bodyend="2237"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a093ed42cff59fd57affebca830f17bb3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_stop</definition>
        <argsstring>(hpm_jpeg_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_job_stop</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
<para>Stop encode of the job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2239" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2239" bodyend="2255"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a6b72cc7ac158fdd2d60f5ec85e98b680" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_get_info</definition>
        <argsstring>(hpm_jpeg_job_t *job, hpm_jpeg_encode_info_t *info)</argsstring>
        <name>hpm_jpeg_encode_job_get_info</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type><ref refid="hpm__jpeg_8h_1a03e1820e1c496e5c0225b46d79234626" kindref="member">hpm_jpeg_encode_info_t</ref> *</type>
          <declname>info</declname>
        </param>
        <briefdescription>
<para>Get job work info. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">info</parametername>
</parameternamelist>
<parameterdescription>
<para>job work info pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2257" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2257" bodyend="2267"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a2596dfd49a4756fd1826365972a92484" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_encode_job_free</definition>
        <argsstring>(hpm_jpeg_job_t *job)</argsstring>
        <name>hpm_jpeg_encode_job_free</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
<para>Free encode job. All source of job will be free. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>encode job pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2269" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2269" bodyend="2286"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a354c8c610e024196c78a52cb290bee9b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_jpeg_job_set_user_data</definition>
        <argsstring>(hpm_jpeg_job_t *job, void *user_data)</argsstring>
        <name>hpm_jpeg_job_set_user_data</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>user_data</declname>
        </param>
        <briefdescription>
<para>Set user data to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>job pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">user_data</parametername>
</parameternamelist>
<parameterdescription>
<para>user data pointer </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2288" column="6" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2288" bodyend="2293"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1ae3b489225acf45c1e0459bc6086557fd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>void * hpm_jpeg_job_get_user_data</definition>
        <argsstring>(hpm_jpeg_job_t *job)</argsstring>
        <name>hpm_jpeg_job_get_user_data</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref> *</type>
          <declname>job</declname>
        </param>
        <briefdescription>
<para>Get user data to job. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">job</parametername>
</parameternamelist>
<parameterdescription>
<para>job pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>user data pointer </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2295" column="6" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2295" bodyend="2300"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a670206a8b793bbaf206e2d920d12de20" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_init</definition>
        <argsstring>(hpm_jpeg_cfg_t *cfg)</argsstring>
        <name>hpm_jpeg_init</name>
        <param>
          <type><ref refid="hpm__jpeg_8h_1aacd9859eebabd0a5e5a99d2cee178a65" kindref="member">hpm_jpeg_cfg_t</ref> *</type>
          <declname>cfg</declname>
        </param>
        <briefdescription>
<para>Initializte hpm_jpeg component. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">cfg</parametername>
</parameternamelist>
<parameterdescription>
<para>hpm_jpeg configuration pointer</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2302" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2302" bodyend="2323"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a81ef76ccbb2bf1c746d5802143c4bede" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int hpm_jpeg_deinit</definition>
        <argsstring>(void)</argsstring>
        <name>hpm_jpeg_deinit</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Deinitializte hpm_jpeg component and free source. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>failed code </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2325" column="5" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2325" bodyend="2375"/>
      </memberdef>
      <memberdef kind="function" id="hpm__jpeg_8c_1a3567cdecfe96c2e53d6666053b56e497" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_jpeg_isr</definition>
        <argsstring>(void)</argsstring>
        <name>hpm_jpeg_isr</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>jpeg ip interrupt service routine </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/jpeg/hpm_jpeg.c" line="2377" column="6" bodyfile="components/jpeg/hpm_jpeg.c" bodystart="2377" bodyend="2411"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2024<sp/>HPMicro</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>#define<sp/>HPM_JPEG_LOG_LEVEL<sp/>HPM_JPEG_LOG_LEVEL_DEBUG<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdint.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="hpm__jpeg__drv_8h" kindref="compound">hpm_jpeg_drv.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="hpm__l1c__drv_8h" kindref="compound">hpm_l1c_drv.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__jpeg_8h" kindref="compound">hpm_jpeg.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;hpm_interrupt.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HPM_JPEG_CACHE_LINE<sp/>hpm_jpeg_cache_line_size()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HPM_JPEG_ROUNDUP(x,<sp/>y)<sp/>((((x)<sp/>+<sp/>((y)<sp/>-<sp/>1))<sp/>/<sp/>(y))<sp/>*<sp/>y)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HPM_JPEG_ROUNDDOWN(x,<sp/>y)<sp/>((x)<sp/>-<sp/>((x)<sp/>%<sp/>(y)))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_SOI<sp/><sp/>0xd8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_APP0<sp/>0xe0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_SOF0<sp/>0xc0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_DHT<sp/><sp/>0xc4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_SOS<sp/><sp/>0xda</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_DQT<sp/><sp/>0xdb</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_MARKER_EOI<sp/><sp/>0xd9</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="structhpm__jpeg__core__htab" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__core__htab" kindref="compound">hpm_jpeg_core_htab</ref><sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>[16];</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>[64];</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>[336];</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>[384];</highlight></codeline>
<codeline lineno="35"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref>;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="structhpm__jpeg__core__qtab" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__core__qtab" kindref="compound">hpm_jpeg_core_qtab</ref><sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>[256];</highlight></codeline>
<codeline lineno="39"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref>;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129e" kindref="member">hpm_jpeg_codec_type</ref><sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129eaf5778f6c28727e5e4e8b71d0f2aec210" kindref="member">HPM_JPEG_CODEC_DECODE</ref>,</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" kindref="member">HPM_JPEG_CODEC_ENCODE</ref>,</highlight></codeline>
<codeline lineno="44"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a3b3311ef9198ffce686ad3d3fef5b3fa" kindref="member">hpm_jpeg_codec_type_t</ref>;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="structhpm__jpeg__sof0__info" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__sof0__info" kindref="compound">hpm_jpeg_sof0_info</ref><sp/>{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a141c597b315f3710c0520264a595241b" kindref="member">p</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref>;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref>:<sp/>4;<sp/></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref>:<sp/>4;<sp/></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref>;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[4];</highlight></codeline>
<codeline lineno="61"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref>;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="structhpm__jpeg__sos__info" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__sos__info" kindref="compound">hpm_jpeg_sos_info</ref><sp/>{</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref>;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref>:<sp/>4;<sp/></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref>:<sp/>4;<sp/></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[4];</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1ab1eb01846b78a9c3ba4928336961ddd4" kindref="member">ss</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1ad737f571f6b4215018c56bcde3c71350" kindref="member">se</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1ac312b9fd6601762f4fc437664c37c8b0" kindref="member">al</ref>:<sp/>4;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sos__info_1a1be776a664e819af480b5cade786dcaa" kindref="member">ah</ref>:<sp/>4;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="78"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref>;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="structhpm__jpeg__jpeg__info" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__jpeg__info" kindref="compound">hpm_jpeg_jpeg_info</ref><sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1ae2c716c18bbd0c61235849395a15a5a9" kindref="member">app0</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[4];<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1a920176c9a3bcc833180066a1ac1b1429" kindref="member">sof0</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[2];<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[2];<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*&lt;<sp/>Start<sp/>of<sp/>scan<sp/>marker<sp/>–<sp/>Marks<sp/>the<sp/>beginning<sp/>of<sp/>the<sp/>scan<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__jpeg__info_1a3679b1b6c079709a8e325043af642512" kindref="member">ecs_len</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="91"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref>;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="structhpm__jpeg__sampling__tab" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__sampling__tab" kindref="compound">hpm_jpeg_sampling_tab</ref><sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sampling__tab_1af1a2e23a8798f21978910762c85da3b8" kindref="member">hy</ref>;<sp/></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sampling__tab_1a95d92479ecce16ee2f0932364559fb52" kindref="member">vy</ref>;<sp/></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sampling__tab_1a45035e475b694885f48531af520d6a3b" kindref="member">hc</ref>;<sp/></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__jpeg__sampling__tab_1ac19fe556d49e6d0837f16ed5920849d5" kindref="member">vc</ref>;<sp/></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/><ref refid="structhpm__jpeg__sampling__tab_1a9984b27c84941d4f9b465b88a69f15ae" kindref="member">sampling</ref>;</highlight></codeline>
<codeline lineno="99"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" kindref="member">hpm_jpeg_sampling_tab_t</ref>;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="structhpm__jpeg__std__tab" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__std__tab" kindref="compound">hpm_jpeg_std_tab</ref><sp/>{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__std__tab_1a133cc1d3d7bb55cb6cbf03a7cc958e6d" kindref="member">app0</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__std__tab_1a3e0dfa4cd8cd90e551ffb4adddb98196" kindref="member">app0_len</ref>;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__std__tab_1abb707678f15bd455fc805cf7d7624b9a" kindref="member">dht_dc</ref>[2];</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[2];</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*<ref refid="structhpm__jpeg__std__tab_1a5d50611a981b9ee8350b25659d9fb1ee" kindref="member">dht_ac</ref>[2];</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[2];</highlight></codeline>
<codeline lineno="108"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1afcb30f396a4270323f2e6f3eb27d0029" kindref="member">hpm_jpeg_std_tab_t</ref>;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110" refid="structhpm__jpeg__buf" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__buf" kindref="compound">hpm_jpeg_buf</ref><sp/>{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref>;</highlight></codeline>
<codeline lineno="117"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref>;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="structjpeg__list" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structjpeg__list" kindref="compound">jpeg_list</ref><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structjpeg__list" kindref="compound">jpeg_list</ref><sp/>*<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref>;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structjpeg__list" kindref="compound">jpeg_list</ref><sp/>*<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>;</highlight></codeline>
<codeline lineno="122"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref>;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124" refid="structhpm__jpeg__context" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref><sp/>{</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/><ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*(*malloc)(uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>void<sp/>(*<ref refid="structhpm__jpeg__context_1a9e76a4fcfdfa0693a9f8c5402b0446c1" kindref="member">free</ref>)(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*p);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__context_1a8360b9b59221c7a55304431a3f884226" kindref="member">cache_line_size</ref>;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>void<sp/>(*<ref refid="structhpm__jpeg__context_1ad74446f5b2d2c482cdfc7e63279e34e2" kindref="member">cache_writeback</ref>)(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*start,<sp/>uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>void<sp/>(*<ref refid="structhpm__jpeg__context_1ae5660a56fcbc95ee7feb84ef40420075" kindref="member">cache_invalidate</ref>)(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*start,<sp/>uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="133"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref>;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135" refid="structhpm__jpeg__base__job" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__base__job" kindref="compound">hpm_jpeg_base_job</ref><sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/><ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a3b3311ef9198ffce686ad3d3fef5b3fa" kindref="member">hpm_jpeg_codec_type_t</ref><sp/><ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref>;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9d81a5a240795d816801b5213f605993" kindref="member">hpm_jpeg_job_status_t</ref><sp/><ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref>;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/>uint32_t<sp/><ref refid="structhpm__jpeg__base__job_1af54263f4e80dcfaddaffe820fcb71cd4" kindref="member">hw_status</ref>;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a449bfc8615bb44afab138bc380043301" kindref="member">hpm_jpeg_job_state_cb_t</ref><sp/><ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="structhpm__jpeg__base__job_1aea25ebd07312cfea12a6d4522060bf99" kindref="member">user_data</ref>;</highlight></codeline>
<codeline lineno="143"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref>;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145" refid="structhpm__jpeg__decode__job" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__decode__job" kindref="compound">hpm_jpeg_decode_job</ref><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1a1d73b219b6f939a4339e55c3e89cf5a1" kindref="member">base_job</ref>;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1aa8ac6c05199d33187f176546612ad544" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1afbb7cf4eae02fd1796d0d370bf1f337f" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1afe8913c260b533f03381b9200c43b6d9" kindref="member">hpm_jpeg_decode_cfg_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1a0a443440319cd84199463a2640e4c780" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__decode__job_1a12fe82361198b54148000366c7ec5bf2" kindref="member">x_align</ref>;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__decode__job_1acd1a2d17f00385408ee4fbcfa396b7e0" kindref="member">y_align</ref>;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1aaffc379d54b40a0e48a16179e263c92b" kindref="member">core_qtab</ref>;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1ace4e7425eccfb4f48e839f36a34aec35" kindref="member">core_htab</ref>;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref>;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1a284e4df28b319f6f53d0d4a633b66a83" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1a3750a2a63f17793cac647be7371990fe" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/><ref refid="structhpm__jpeg__decode__job_1a20ffeacbadde2eda4df7f670b2b524ee" kindref="member">sos_info</ref>;</highlight></codeline>
<codeline lineno="159"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref>;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161" refid="structhpm__jpeg__encode__job" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhpm__jpeg__encode__job" kindref="compound">hpm_jpeg_encode_job</ref><sp/>{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1ac3a87cd54ab49b3b9f114f095a41ef75" kindref="member">base_job</ref>;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1ac73006109fc7c611b78c6aedd1face7b" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a497c1f9287dbaca17b7f13e7891a15d3" kindref="member">hpm_jpeg_file_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a0029725cac091b732bff88f7ef1ce89a" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__encode__job_1aec128b6676cfe520ca9e0423290ba609" kindref="member">x_align</ref>;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><ref refid="structhpm__jpeg__encode__job_1a6c8d91ad8b2d0beb275dbe7f44f43c3d" kindref="member">y_align</ref>;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="structhpm__jpeg__encode__job_1a127228db265744fcc9c701f5de1944da" kindref="member">has_valid_qhtab</ref>;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a5522f067a588a6f83c75301bdce59da6" kindref="member">core_qtab</ref>;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a809008f6375f0ad1e1fb744fac544076" kindref="member">core_htab</ref>;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a70c4c755e9aa0e754139e45cd1febf7f" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a53ed23ffee40702e2743852de4f95bbc" kindref="member">sos_info</ref>;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1afcb30f396a4270323f2e6f3eb27d0029" kindref="member">hpm_jpeg_std_tab_t</ref><sp/><ref refid="structhpm__jpeg__encode__job_1a1332ae76669c58158f5f23d9b7b087a2" kindref="member">std_tab</ref>;</highlight></codeline>
<codeline lineno="177"><highlight class="normal">}<sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref>;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/><ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/>uint32_t<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="182"><highlight class="normal">{</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__irq__interface_1gae4ab71575d7300570260517dd5993327" kindref="member">disable_global_irq</ref>(<ref refid="HPM5300_2HPM5301_2hpm__csr__regs_8h_1a8e27337cc82e0b08475a4229d85dee77" kindref="member">CSR_MSTATUS_MIE_MASK</ref>);</highlight></codeline>
<codeline lineno="184"><highlight class="normal">}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(uint32_t<sp/>restore)</highlight></codeline>
<codeline lineno="187"><highlight class="normal">{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__irq__interface_1ga06fc101bc7f7de45a2e4d499294652ff" kindref="member">enable_global_irq</ref>(restore);</highlight></codeline>
<codeline lineno="189"><highlight class="normal">}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="192"><highlight class="normal">{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a92e2a5638b90d2986a36f7775aa9838b" kindref="member">malloc</ref>)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a92e2a5638b90d2986a36f7775aa9838b" kindref="member">malloc</ref>(<ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>malloc(<ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="199"><highlight class="normal">}</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*ptr)</highlight></codeline>
<codeline lineno="202"><highlight class="normal">{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a9e76a4fcfdfa0693a9f8c5402b0446c1" kindref="member">free</ref>)<sp/>{</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a9e76a4fcfdfa0693a9f8c5402b0446c1" kindref="member">free</ref>(ptr);</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>free(ptr);</highlight></codeline>
<codeline lineno="211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/>uint32_t<sp/><ref refid="hpm__jpeg_8c_1aa3cd92752a61b59b8c1a1cc08b31957d" kindref="member">hpm_jpeg_cache_line_size</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="214"><highlight class="normal">{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a8360b9b59221c7a55304431a3f884226" kindref="member">cache_line_size</ref>)</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a8360b9b59221c7a55304431a3f884226" kindref="member">cache_line_size</ref>;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>64;</highlight></codeline>
<codeline lineno="221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1af83f4cfc02bdc77d781b359d6bfc5f6d" kindref="member">hpm_jpeg_cache_writeback</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*start,<sp/>uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="224"><highlight class="normal">{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1ad74446f5b2d2c482cdfc7e63279e34e2" kindref="member">cache_writeback</ref>)<sp/>{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ad74446f5b2d2c482cdfc7e63279e34e2" kindref="member">cache_writeback</ref>(start,<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__l1cache__interface_1ga6b3c1ed19b34e78698fc0c0a0ae84a87" kindref="member">l1c_dc_is_enabled</ref>())<sp/>{</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__l1cache__interface_1gac0443f752d550f9c890709703a83b41f" kindref="member">l1c_dc_writeback</ref>((uint32_t)start,<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="235"><highlight class="normal">}</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a0531698a38a4efa1727c0afbf45fa732" kindref="member">hpm_jpeg_cache_invalid</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*start,<sp/>uint32_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>)</highlight></codeline>
<codeline lineno="238"><highlight class="normal">{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1ae5660a56fcbc95ee7feb84ef40420075" kindref="member">cache_invalidate</ref>)<sp/>{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae5660a56fcbc95ee7feb84ef40420075" kindref="member">cache_invalidate</ref>(start,<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__l1cache__interface_1ga6b3c1ed19b34e78698fc0c0a0ae84a87" kindref="member">l1c_dc_is_enabled</ref>())<sp/>{</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__l1cache__interface_1gad211f4a8e8d756b6b92977d208f8e5de" kindref="member">l1c_dc_invalidate</ref>((uint32_t)start,<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="249"><highlight class="normal">}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a2d2ad3b33af487c242b26d4710213792" kindref="member">jpeg_list_node_init</ref>(<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*node)</highlight></codeline>
<codeline lineno="252"><highlight class="normal">{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="255"><highlight class="normal">}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a6ff2f9e8c06aaa86dd2d118f3b3f65ff" kindref="member">jpeg_list_del</ref>(<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*node)</highlight></codeline>
<codeline lineno="258"><highlight class="normal">{</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref>-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>node-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>node-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref>;</highlight></codeline>
<codeline lineno="261"><highlight class="normal">}</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HPM_JPEG_ENABLE_LIST_ADD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>jpeg_list_add(<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*head,<sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*node)</highlight></codeline>
<codeline lineno="265"><highlight class="normal">{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>head-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>head;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>head-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/>head-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="270"><highlight class="normal">}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1add0fb006d7a62ff3fb1bedf08d7d4d0f" kindref="member">jpeg_list_add_tail</ref>(<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*head,<sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*node)</highlight></codeline>
<codeline lineno="274"><highlight class="normal">{</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>head;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>node-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>head-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref>;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/>head-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref>-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>head-&gt;<ref refid="structjpeg__list_1a2e80b39bcd628e08fb7e50dd3ef5c88e" kindref="member">pre</ref><sp/>=<sp/>node;</highlight></codeline>
<codeline lineno="279"><highlight class="normal">}</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*<ref refid="hpm__jpeg_8c_1a382b709af09267c647207d2f67d9b1aa" kindref="member">jpeg_list_node_get</ref>(<ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*head)</highlight></codeline>
<codeline lineno="282"><highlight class="normal">{</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*node<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(head-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref><sp/>!=<sp/>head)<sp/>{</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>head-&gt;<ref refid="structjpeg__list_1a464fe5ca33ef30fffd54e44870468205" kindref="member">nxt</ref>;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a6ff2f9e8c06aaa86dd2d118f3b3f65ff" kindref="member">jpeg_list_del</ref>(node);<sp/></highlight><highlight class="comment">/*<sp/>NOLINT<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>node;</highlight></codeline>
<codeline lineno="291"><highlight class="normal">}</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>jpeg_list_for_each(node,<sp/>head)\</highlight></codeline>
<codeline lineno="294"><highlight class="preprocessor">for<sp/>(jpeg_list_t<sp/>*node<sp/>=<sp/>(head)-&gt;nxt;<sp/>node<sp/>!=<sp/>(head);<sp/>node<sp/>=<sp/>node-&gt;nxt)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ab348b2be717d2c5b653fe125ad223cd7" kindref="member">hpm_jpeg_hexdump</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*str,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data,<sp/>uint32_t<sp/>data_len)</highlight></codeline>
<codeline lineno="297"><highlight class="normal">{</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*udata<sp/>=<sp/>data;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*cstr<sp/>=<sp/>str;</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>data_len;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cstr<sp/>+=<sp/>sprintf(cstr,<sp/></highlight><highlight class="stringliteral">&quot;%02X<sp/>&quot;</highlight><highlight class="normal">,<sp/>udata[i]);</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal">}</highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a75a283e51949683300d51e90cb2b0ab5" kindref="member">hpm_jpeg_create_htab_for_core</ref>(<ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref><sp/>*htab_core,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*dht_ac0,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*dht_ac1,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*dht_dc0,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*dht_dc1)</highlight></codeline>
<codeline lineno="306"><highlight class="normal">{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*buf;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>len;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>len<sp/>=<sp/>(64<sp/>+<sp/>64<sp/>+<sp/>336)<sp/>*<sp/>4;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>buf<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(len);</highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!buf)<sp/>{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc<sp/>failed\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a8066c3ea75a283792dc555f2abe0e55d" kindref="member">HPM_JPEG_RET_MALLOC_ERR</ref>;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(buf,<sp/>0x00,<sp/>len);</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>*min<sp/>=<sp/>(uint32_t<sp/>*)buf;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>*hea<sp/>=<sp/>(uint32_t<sp/>*)(buf<sp/>+<sp/>64<sp/>*<sp/>4);</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>*heb<sp/>=<sp/>(uint32_t<sp/>*)(buf<sp/>+<sp/>(64<sp/>+<sp/>64)<sp/>*<sp/>4);</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>*huffenc<sp/>=<sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>;</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>i,<sp/>j,<sp/>n,<sp/>v,<sp/>code,<sp/>hid;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>dc,<sp/>ht,<sp/>abase,<sp/>bbase,<sp/>hbase,<sp/>hb;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>l[16];</highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*htab[4];</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*p;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>htab[0]<sp/>=<sp/>dht_dc0;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>htab[1]<sp/>=<sp/>dht_ac0;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>htab[2]<sp/>=<sp/>dht_dc1<sp/>?<sp/>dht_dc1<sp/>:<sp/>dht_dc0;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>htab[3]<sp/>=<sp/>dht_ac1<sp/>?<sp/>dht_ac1<sp/>:<sp/>dht_ac0;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>384;<sp/>i++)</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>huffenc[i]<sp/>=<sp/>0xfff;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>168,<sp/>j<sp/>=<sp/>0xfd0;<sp/>i<sp/>&lt;<sp/>176;<sp/>i++,<sp/>j++)</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>huffenc[i]<sp/>=<sp/>j;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>344,<sp/>j<sp/>=<sp/>0xfd0;<sp/>i<sp/>&lt;<sp/>352;<sp/>i++,<sp/>j++)</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>huffenc[i]<sp/>=<sp/>j;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>162;<sp/>i<sp/>&lt;<sp/>174;<sp/>i++)</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heb[i]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index<sp/>=<sp/>0;<sp/>index<sp/>&lt;<sp/>4;<sp/>index++)<sp/>{</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/>htab[index]<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>length<sp/>of<sp/>the<sp/>marker<sp/>segment</highlight></codeline>
<codeline lineno="349"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="350"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Lh<sp/>:<sp/>HT<sp/>length<sp/>(16b)</highlight></codeline>
<codeline lineno="351"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>*p++;</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>(v&lt;&lt;8)<sp/>|<sp/>*p++;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>-=<sp/>2;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(n)<sp/>{</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>type<sp/>of<sp/>table</highlight></codeline>
<codeline lineno="358"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="359"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Tc<sp/>:<sp/>Table<sp/>class<sp/>(4b)</highlight></codeline>
<codeline lineno="360"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>0<sp/>=<sp/>DC<sp/>or<sp/>lossless<sp/>table</highlight></codeline>
<codeline lineno="361"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>1<sp/>=<sp/>AC<sp/>table</highlight></codeline>
<codeline lineno="362"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Th<sp/>:<sp/>HT<sp/>destination<sp/>identifier</highlight></codeline>
<codeline lineno="363"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>-<sp/>specifies<sp/>1<sp/>of<sp/>4<sp/>possible<sp/>destinations<sp/>at<sp/>the<sp/>decoder<sp/>into</highlight></codeline>
<codeline lineno="364"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>which<sp/>HT<sp/>shall<sp/>be<sp/>installed.</highlight></codeline>
<codeline lineno="365"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>*p++;<sp/></highlight><highlight class="comment">/*<sp/>Tc<sp/>&amp;<sp/>Th<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n--;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hid<sp/>=<sp/>v&gt;&gt;4<sp/>?<sp/>2<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hid<sp/>|=<sp/>v<sp/>&amp;<sp/>15<sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(hid)<sp/>{</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hbase<sp/>=<sp/>368;</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hbase<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hbase<sp/>=<sp/>176;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>default<sp/>:</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hbase<sp/>=<sp/>352;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((v&gt;&gt;4))</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abase<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abase<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dc<sp/>=<sp/>abase;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ht<sp/>=<sp/>v<sp/>&amp;<sp/>15;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abase<sp/>|=<sp/>ht&lt;&lt;1;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(abase)<sp/>{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbase<sp/>=<sp/>162;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2<sp/>:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbase<sp/>=<sp/>174;</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>default<sp/>:</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbase<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abase<sp/>&lt;&lt;=<sp/>4;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Memory<sp/>initialization<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>abase;<sp/>i<sp/>&lt;<sp/>abase<sp/>+<sp/>16;<sp/>i++)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hea[i]<sp/>=<sp/>255;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>number<sp/>of<sp/>codes<sp/>for<sp/>each<sp/>length</highlight></codeline>
<codeline lineno="413"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="414"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Lj<sp/>:<sp/>#<sp/>of<sp/>Huffman<sp/>codes<sp/>of<sp/>length<sp/>i</highlight></codeline>
<codeline lineno="415"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>-<sp/>specifies<sp/>the<sp/>#<sp/>of<sp/>Huffman<sp/>codes<sp/>for<sp/>each<sp/>of<sp/>16<sp/>possible<sp/>lengths</highlight></codeline>
<codeline lineno="416"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>allowed<sp/>by<sp/>spec.<sp/>BITS</highlight></codeline>
<codeline lineno="417"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>16;<sp/>i++)</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>l[i]<sp/>=<sp/>*p++;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>-=<sp/>16;</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>16;<sp/>i++,<sp/>abase++)<sp/>{</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min[abase]<sp/>=<sp/>code;</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hea[abase]<sp/>=<sp/>bbase<sp/>-<sp/>code;</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(l[i])<sp/>{</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Vi,j<sp/>:<sp/>associated<sp/>with<sp/>each<sp/>Huffman<sp/>code</highlight></codeline>
<codeline lineno="428"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>-<sp/>specifies,<sp/>for<sp/>each<sp/>i<sp/>the<sp/>value<sp/>associated<sp/>with<sp/>each<sp/>Huffman<sp/>code</highlight></codeline>
<codeline lineno="429"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>of<sp/>length<sp/>i.<sp/><sp/>HUFFVAL</highlight></codeline>
<codeline lineno="430"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>l[i];<sp/>j++,<sp/>bbase++)<sp/>{</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>*p++;</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n--;</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dc)<sp/>{</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>huffenc[hbase<sp/>+<sp/>v]<sp/>=<sp/>(i&lt;&lt;8)<sp/>|<sp/>(code<sp/>&amp;<sp/>0xff);</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&amp;=<sp/>15;</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ht)</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>4;</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heb[bbase]<sp/>|=<sp/>v;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(v<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hb<sp/>=<sp/>160;</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(v<sp/>==<sp/>0xf0)</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hb<sp/>=<sp/>161;</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hb<sp/>=<sp/>(v&gt;&gt;4)<sp/>*<sp/>10<sp/>+<sp/>(v<sp/>&amp;<sp/>0xf)<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>huffenc[hbase<sp/>+<sp/>hb]<sp/>=<sp/>(i&lt;&lt;8)<sp/>|<sp/>(code<sp/>&amp;<sp/>0xff);</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heb[bbase]<sp/>=<sp/>v;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code++;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>64;<sp/>i++)</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>[i]<sp/>=<sp/>hea[i]<sp/>&amp;<sp/>511;</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>336;<sp/>i++)</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>[i]<sp/>=<sp/>heb[i]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0,<sp/>j<sp/>=<sp/>3;<sp/>i<sp/>&lt;<sp/>64;<sp/>j<sp/>+=<sp/>7)<sp/>{</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>min[i++]<sp/>&amp;<sp/>1;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>2;</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>3;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>3;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>7;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>[j--]<sp/>=<sp/>v<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>4;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>15;</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>5;</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>31;</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>6;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>63;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>7;</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>127;</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>[j--]<sp/>=<sp/>v;</highlight></codeline>
<codeline lineno="485"><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>[j--]<sp/>=<sp/>v;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>|=<sp/>min[i++]<sp/>&amp;<sp/>255;</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htab_core-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>[j]<sp/>=<sp/>v;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(buf);</highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="508"><highlight class="normal">}</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/><ref refid="hpm__jpeg_8c_1afb620aae94109b1d7092bc2799e2ab4f" kindref="member">qlook</ref>[256]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0000,<sp/>0x0001,<sp/>0x0400,<sp/>0x02ab,<sp/>0x0200,<sp/>0x0b33,<sp/>0x0155,<sp/>0x0a49,</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0100,<sp/>0x09c7,<sp/>0x00cd,<sp/>0x12e9,<sp/>0x0955,<sp/>0x093b,<sp/>0x1249,<sp/>0x0911,</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0080,<sp/>0x08f1,<sp/>0x11c7,<sp/>0x11af,<sp/>0x08cd,<sp/>0x08c3,<sp/>0x08ba,<sp/>0x08b2,</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/>0x1155,<sp/>0x251f,<sp/>0x113b,<sp/>0x1a5f,<sp/>0x1a49,<sp/>0x1a35,<sp/>0x1111,<sp/>0x2421,</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0880,<sp/>0x23e1,<sp/>0x10f1,<sp/>0x10ea,<sp/>0x19c7,<sp/>0x19bb,<sp/>0x19af,<sp/>0x10d2,</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/>0x10cd,<sp/>0x231f,<sp/>0x10c3,<sp/>0x197d,<sp/>0x10ba,<sp/>0x10b6,<sp/>0x10b2,<sp/>0x22b9,</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/>0x1955,<sp/>0x229d,<sp/>0x10a4,<sp/>0x2d05,<sp/>0x193b,<sp/>0x1935,<sp/>0x225f,<sp/>0x1095,</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2249,<sp/>0x223f,<sp/>0x2235,<sp/>0x2c57,<sp/>0x1911,<sp/>0x2219,<sp/>0x1084,<sp/>0x1082,</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/>0x1080,<sp/>0x18fc,<sp/>0x18f8,<sp/>0x21e9,<sp/>0x18f1,<sp/>0x21db,<sp/>0x18ea,<sp/>0x2b9b,</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>0x21c7,<sp/>0x21c1,<sp/>0x21bb,<sp/>0x21b5,<sp/>0x21af,<sp/>0x2b53,<sp/>0x18d2,<sp/>0x367b,</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/>0x18cd,<sp/>0x2b29,<sp/>0x18c8,<sp/>0x218b,<sp/>0x18c3,<sp/>0x2b03,<sp/>0x217d,<sp/>0x2af1,</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>0x18ba,<sp/>0x18b8,<sp/>0x18b6,<sp/>0x18b4,<sp/>0x18b2,<sp/>0x2ac1,<sp/>0x2ab9,<sp/>0x2159,</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2155,<sp/>0x3547,<sp/>0x2a9d,<sp/>0x214b,<sp/>0x18a4,<sp/>0x2a89,<sp/>0x2141,<sp/>0x189f,</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/>0x213b,<sp/>0x189c,<sp/>0x2135,<sp/>0x34c9,<sp/>0x2a5f,<sp/>0x2a59,<sp/>0x1895,<sp/>0x349d,</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2a49,<sp/>0x1891,<sp/>0x2a3f,<sp/>0x211d,<sp/>0x2a35,<sp/>0x188c,<sp/>0x2a2b,<sp/>0x344d,</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2111,<sp/>0x343b,<sp/>0x2a19,<sp/>0x2a15,<sp/>0x1884,<sp/>0x3419,<sp/>0x1882,<sp/>0x1881,</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/>0x1880,<sp/>0x20fe,<sp/>0x20fc,<sp/>0x33e9,<sp/>0x20f8,<sp/>0x3fb3,<sp/>0x29e9,<sp/>0x33cb,</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20f1,<sp/>0x33bd,<sp/>0x29db,<sp/>0x33af,<sp/>0x20ea,<sp/>0x29d1,<sp/>0x20e7,<sp/>0x3395,</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>0x29c7,<sp/>0x20e2,<sp/>0x29c1,<sp/>0x20df,<sp/>0x29bb,<sp/>0x20dc,<sp/>0x29b5,<sp/>0x20d9,</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>0x29af,<sp/>0x3359,<sp/>0x3353,<sp/>0x29a7,<sp/>0x20d2,<sp/>0x3343,<sp/>0x299f,<sp/>0x20ce,</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20cd,<sp/>0x2997,<sp/>0x3329,<sp/>0x20c9,<sp/>0x20c8,<sp/>0x298d,<sp/>0x298b,<sp/>0x3311,</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20c3,<sp/>0x3e0f,<sp/>0x3303,<sp/>0x3dfd,<sp/>0x297d,<sp/>0x297b,<sp/>0x2979,<sp/>0x32ed,</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20ba,<sp/>0x3dc9,<sp/>0x20b8,<sp/>0x20b7,<sp/>0x20b6,<sp/>0x20b5,<sp/>0x20b4,<sp/>0x20b3,</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20b2,<sp/>0x3d89,<sp/>0x20b0,<sp/>0x32bd,<sp/>0x295d,<sp/>0x3d6b,<sp/>0x2959,<sp/>0x2957,</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2955,<sp/>0x32a7,<sp/>0x20a9,<sp/>0x20a8,<sp/>0x20a7,<sp/>0x3299,<sp/>0x294b,<sp/>0x3293,</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>0x20a4,<sp/>0x20a3,<sp/>0x3289,<sp/>0x2943,<sp/>0x2941,<sp/>0x3cff,<sp/>0x209f,<sp/>0x3279,</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/>0x293b,<sp/>0x3273,<sp/>0x209c,<sp/>0x326d,<sp/>0x2935,<sp/>0x3ccf,<sp/>0x2099,<sp/>0x3cc3,</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/>0x325f,<sp/>0x2097,<sp/>0x3259,<sp/>0x3cad,<sp/>0x2095,<sp/>0x3251,<sp/>0x2927,<sp/>0x2093,</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/>0x3249,<sp/>0x3c8d,<sp/>0x2091,<sp/>0x3c83,<sp/>0x323f,<sp/>0x3c79,<sp/>0x291d,<sp/>0x3c6f,</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/>0x3235,<sp/>0x3c65,<sp/>0x208c,<sp/>0x2917,<sp/>0x208b,<sp/>0x3229,<sp/>0x3227,<sp/>0x3c49,</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2911,<sp/>0x2088,<sp/>0x290f,<sp/>0x3c37,<sp/>0x3219,<sp/>0x3217,<sp/>0x3215,<sp/>0x3c25,</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/>0x2084,<sp/>0x3c1d,<sp/>0x2083,<sp/>0x2905,<sp/>0x2082,<sp/>0x2903,<sp/>0x2081,<sp/>0x2901</highlight></codeline>
<codeline lineno="543"><highlight class="normal">};</highlight></codeline>
<codeline lineno="544"><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a35dfe446431b1063b135d8919276d25d" kindref="member">hpm_jpeg_create_qtab_for_core</ref>(<ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref><sp/>*qtab_core,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>is_encode,<sp/>uint8_t<sp/>*jpeg_qtabs[])</highlight></codeline>
<codeline lineno="546"><highlight class="normal">{</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*qtabs_data[4]<sp/>=<sp/>{NULL,<sp/>NULL,<sp/>NULL,<sp/>NULL};</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>lq;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>pq,<sp/>tq;</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!jpeg_qtabs[0])<sp/>{</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg_qtabs[0]<sp/>must<sp/>exist\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="555"><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jpeg_qtabs[i])<sp/>{</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lq<sp/>=<sp/>jpeg_qtabs[i][2]&lt;&lt;8<sp/>|<sp/>jpeg_qtabs[i][3];</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pq<sp/>=<sp/>(jpeg_qtabs[i][4]&gt;&gt;4)<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tq<sp/>=<sp/>jpeg_qtabs[i][4]<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lq<sp/>==<sp/>67<sp/>&amp;&amp;<sp/>pq<sp/>==<sp/>0<sp/>&amp;&amp;<sp/>tq<sp/>&lt;=<sp/>3)<sp/>{</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtabs_data[i]<sp/>=<sp/>jpeg_qtabs[i]<sp/>+<sp/>5;</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg_qtabs[%d]<sp/>is<sp/>bad\n&quot;</highlight><highlight class="normal">,<sp/>i);</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtabs_data[i]<sp/>=<sp/>qtabs_data[0];</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(qtab_core,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref>));</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!qtabs_data[i])<sp/>{</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_encode)<sp/>{</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>64;<sp/>j++)<sp/>{</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtab_core-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>[i<sp/>*<sp/>64<sp/>+<sp/>j]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1afb620aae94109b1d7092bc2799e2ab4f" kindref="member">qlook</ref>[qtabs_data[i][j]];</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>64;<sp/>j++)<sp/>{</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtab_core-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>[i<sp/>*<sp/>64<sp/>+<sp/>j]<sp/>=<sp/>qtabs_data[i][j];</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="590"><highlight class="normal">}</highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1aa1d5574d7706ee0bdf85e93624b6b3a1" kindref="member">hpm_jpeg_get_align_pixel</ref>(<ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/>sampling,<sp/>uint16_t<sp/>*x,<sp/>uint16_t<sp/>*y)</highlight></codeline>
<codeline lineno="593"><highlight class="normal">{</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>x_align;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>y_align;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea71cd4ed2b6a30976dc94bf849762dfe5" kindref="member">HPM_JPEG_SAMPLING_FORMAT_420</ref>)<sp/>{</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_align<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y_align<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeaf4c3d1779b4044b80aad48658906a321" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422H</ref>)<sp/>{</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_align<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y_align<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea010728d72728307221c3ea8203434b8a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422V</ref>)<sp/>{</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_align<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y_align<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_align<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y_align<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="610"><highlight class="normal"></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/>*x<sp/>=<sp/>x_align;</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/>*y<sp/>=<sp/>y_align;</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="615"><highlight class="normal">}</highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" kindref="member">hpm_jpeg_sampling_tab_t</ref><sp/><ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>{2,<sp/>2,<sp/>1,<sp/>1,<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea71cd4ed2b6a30976dc94bf849762dfe5" kindref="member">HPM_JPEG_SAMPLING_FORMAT_420</ref>},</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/>{2,<sp/>1,<sp/>1,<sp/>1,<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeaf4c3d1779b4044b80aad48658906a321" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422H</ref>},</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/>{1,<sp/>2,<sp/>1,<sp/>1,<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea010728d72728307221c3ea8203434b8a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422V</ref>},</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>{1,<sp/>1,<sp/>1,<sp/>1,<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeac7a0b7d48d2e894b7c3cf30c8753f7ad" kindref="member">HPM_JPEG_SAMPLING_FORMAT_444</ref>},</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/>{2,<sp/>2,<sp/>0,<sp/>0,<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>},</highlight></codeline>
<codeline lineno="623"><highlight class="normal">};</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a831720ff74acfc2cc4f612d3f5929118" kindref="member">hpm_jpeg_get_sof0_info_from_buf</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*sof0,<sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="626"><highlight class="normal">{</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*p<sp/>=<sp/>sof0;</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*index<sp/>=<sp/>p<sp/>+<sp/>10;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p[0]<sp/>!=<sp/>0xff<sp/>||<sp/>p[1]<sp/>!=<sp/><ref refid="hpm__jpeg_8c_1aaf78d4b02fd283b9fbd481e49036331d" kindref="member">JPEG_MARKER_SOF0</ref>)<sp/>{</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;sof0<sp/>mark<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="634"><highlight class="normal"></highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref><sp/>=<sp/>(uint16_t)p[2]&lt;&lt;8<sp/>|<sp/>p[3];</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a141c597b315f3710c0520264a595241b" kindref="member">p</ref><sp/>=<sp/>p[4];</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref><sp/>=<sp/>(uint16_t)p[5]&lt;&lt;8<sp/>|<sp/>p[6];</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref><sp/>=<sp/>(uint16_t)p[7]&lt;&lt;8<sp/>|<sp/>p[8];</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>=<sp/>p[9];</highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>&gt;<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;hpm_jpeg<sp/>support<sp/>max<sp/>4<sp/>components,<sp/>buf<sp/>nf<sp/>is<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>);</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="645"><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref><sp/>=<sp/>*index++;</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>=<sp/>(*index)&gt;&gt;4<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>=<sp/>(*index++)&gt;&gt;0<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref><sp/>=<sp/>*index++;</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="652"><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="654"><highlight class="normal">}</highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a5f4c5af1eac3cc9d302e5121313c0f12" kindref="member">hpm_jpeg_set_sof0_info_to_buf</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*sof0,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="657"><highlight class="normal">{</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*p<sp/>=<sp/>sof0;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*index<sp/>=<sp/>p<sp/>+<sp/>10;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>&gt;<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;hpm_jpeg<sp/>support<sp/>max<sp/>4<sp/>components,<sp/>buf<sp/>nf<sp/>is<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>);</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="665"><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/>p[0]<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/>p[1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1aaf78d4b02fd283b9fbd481e49036331d" kindref="member">JPEG_MARKER_SOF0</ref>;</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/>p[2]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref>&gt;&gt;8<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/>p[3]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref>&gt;&gt;0<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/>p[4]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a141c597b315f3710c0520264a595241b" kindref="member">p</ref>;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/>p[5]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>&gt;&gt;8<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/>p[6]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>&gt;&gt;0<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/>p[7]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>&gt;&gt;8<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/>p[8]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>&gt;&gt;0<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/>p[9]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref>;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref>;</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>(info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>&amp;<sp/>0x0f)&lt;&lt;4<sp/>|<sp/>(info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>&amp;<sp/>0x0f);</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref>;</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="682"><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="684"><highlight class="normal">}</highlight></codeline>
<codeline lineno="685"><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a382b75d648cc5cd667fbee63f38768be" kindref="member">hpm_jpeg_get_sampling_format_from_sof0_info</ref>(<ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*info,<sp/><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/>*sampling)</highlight></codeline>
<codeline lineno="687"><highlight class="normal">{</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" kindref="member">hpm_jpeg_sampling_tab_t</ref><sp/>*s;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n<sp/>=<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(<ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>);</highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>n;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/>&amp;<ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>[i];</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1af1a2e23a8798f21978910762c85da3b8" kindref="member">hy</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a95d92479ecce16ee2f0932364559fb52" kindref="member">vy</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a45035e475b694885f48531af520d6a3b" kindref="member">hc</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1ac19fe556d49e6d0837f16ed5920849d5" kindref="member">vc</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a45035e475b694885f48531af520d6a3b" kindref="member">hc</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>==<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1ac19fe556d49e6d0837f16ed5920849d5" kindref="member">vc</ref>)<sp/>{</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sampling<sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a9984b27c84941d4f9b465b88a69f15ae" kindref="member">sampling</ref>;</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="703"><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="705"><highlight class="normal">}</highlight></codeline>
<codeline lineno="706"><highlight class="normal"></highlight></codeline>
<codeline lineno="707"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1afbaf9ddd49f017d1d516a283a9f5ff3d" kindref="member">hpm_jpeg_init_sof0_info</ref>(<ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*info,<sp/><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/>sampling,<sp/>uint16_t<sp/>x,<sp/>uint16_t<sp/>y)</highlight></codeline>
<codeline lineno="708"><highlight class="normal">{</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a001cf8914ecbd054bbeb6fcf8f7037ed" kindref="member">hpm_jpeg_sampling_tab_t</ref><sp/>*s<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n<sp/>=<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(<ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>);</highlight></codeline>
<codeline lineno="711"><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>n;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>[i].sampling)<sp/>{</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>=<sp/>&amp;<ref refid="hpm__jpeg_8c_1af8b1061a94f582276065bfcfc40640bb" kindref="member">sampling_tabs</ref>[i];</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="718"><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!s)</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="721"><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a141c597b315f3710c0520264a595241b" kindref="member">p</ref><sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref><sp/>=<sp/>x;</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref><sp/>=<sp/>y;</highlight></codeline>
<codeline lineno="725"><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>)<sp/>{</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1af1a2e23a8798f21978910762c85da3b8" kindref="member">hy</ref>;</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a95d92479ecce16ee2f0932364559fb52" kindref="member">vy</ref>;</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1af1a2e23a8798f21978910762c85da3b8" kindref="member">hy</ref>;</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a95d92479ecce16ee2f0932364559fb52" kindref="member">vy</ref>;</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="738"><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a45035e475b694885f48531af520d6a3b" kindref="member">hc</ref>;</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1ac19fe556d49e6d0837f16ed5920849d5" kindref="member">vc</ref>;</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="743"><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1a2b339dadb439ee34291a80351bbe9808" kindref="member">c</ref><sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1ab637e561a75e61249d5d525d2ccba546" kindref="member">h</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1a45035e475b694885f48531af520d6a3b" kindref="member">hc</ref>;</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1a3f7e604e8e9094c7626ed55c60ce9eef" kindref="member">v</ref><sp/>=<sp/>s-&gt;<ref refid="structhpm__jpeg__sampling__tab_1ac19fe556d49e6d0837f16ed5920849d5" kindref="member">vc</ref>;</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aad7cfa534e5323e334eb0370d83b2f6d" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sof0__info_1a3059e9da6f347a73982c57e29133635c" kindref="member">tq</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="749"><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref><sp/>=<sp/>2<sp/>+<sp/>1<sp/>+<sp/>2<sp/>+<sp/>2<sp/>+<sp/>1<sp/>+<sp/>info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>*<sp/>3;</highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="752"><highlight class="normal">}</highlight></codeline>
<codeline lineno="753"><highlight class="normal"></highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ac87967e3bca3b46e0f2b1926657c598f" kindref="member">hpm_jpeg_get_sos_info_from_buf</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*sos,<sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="755"><highlight class="normal">{</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*p<sp/>=<sp/>sos;</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*index<sp/>=<sp/>p<sp/>+<sp/>5;</highlight></codeline>
<codeline lineno="758"><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p[0]<sp/>!=<sp/>0xff<sp/>||<sp/>p[1]<sp/>!=<sp/><ref refid="hpm__jpeg_8c_1a0369b1ea05269cf6fd5421459362ad88" kindref="member">JPEG_MARKER_SOS</ref>)<sp/>{</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;sos<sp/>mark<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="763"><highlight class="normal"></highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref><sp/>=<sp/>(uint16_t)p[2]&lt;&lt;8<sp/>|<sp/>p[3];</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>=<sp/>p[4];</highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>&gt;<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;hpm_jpeg<sp/>support<sp/>max<sp/>4<sp/>components,<sp/>buf<sp/>ns<sp/>is<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>);</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="771"><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref><sp/>=<sp/>*index++;</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>=<sp/>(*index)&gt;&gt;4<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>=<sp/>(*index++)&gt;&gt;0<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="777"><highlight class="normal"></highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ab1eb01846b78a9c3ba4928336961ddd4" kindref="member">ss</ref><sp/>=<sp/>*index++;</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ad737f571f6b4215018c56bcde3c71350" kindref="member">se</ref><sp/>=<sp/>*index++;</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a1be776a664e819af480b5cade786dcaa" kindref="member">ah</ref><sp/>=<sp/>(*index)&gt;&gt;4<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ac312b9fd6601762f4fc437664c37c8b0" kindref="member">al</ref><sp/>=<sp/>(*index)&gt;&gt;0<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="782"><highlight class="normal"></highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="784"><highlight class="normal">}</highlight></codeline>
<codeline lineno="785"><highlight class="normal"></highlight></codeline>
<codeline lineno="786"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a98df55d31c2011763c8430963d39eabd" kindref="member">hpm_jpeg_set_sos_info_to_buf</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*sos,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="787"><highlight class="normal">{</highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*p<sp/>=<sp/>sos;</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*index<sp/>=<sp/>p<sp/>+<sp/>5;</highlight></codeline>
<codeline lineno="790"><highlight class="normal"></highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>&gt;<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;hpm_jpeg<sp/>support<sp/>max<sp/>4<sp/>components,<sp/>buf<sp/>ns<sp/>is<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>);</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/>p[0]<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/>p[1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0369b1ea05269cf6fd5421459362ad88" kindref="member">JPEG_MARKER_SOS</ref>;</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/>p[2]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref>&gt;&gt;8<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/>p[3]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref>&gt;&gt;0<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/>p[4]<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>;</highlight></codeline>
<codeline lineno="801"><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref>;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref>;</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>(info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>&amp;<sp/>0x0f)&lt;&lt;4<sp/>|<sp/>(info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[i].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>&amp;<sp/>0x0f);</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ab1eb01846b78a9c3ba4928336961ddd4" kindref="member">ss</ref>;</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ad737f571f6b4215018c56bcde3c71350" kindref="member">se</ref>;</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/>*index++<sp/>=<sp/>(info-&gt;<ref refid="structhpm__jpeg__sos__info_1a1be776a664e819af480b5cade786dcaa" kindref="member">ah</ref><sp/>&amp;<sp/>0x0f)&lt;&lt;4<sp/>|<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ac312b9fd6601762f4fc437664c37c8b0" kindref="member">al</ref>;</highlight></codeline>
<codeline lineno="810"><highlight class="normal"></highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="812"><highlight class="normal">}</highlight></codeline>
<codeline lineno="813"><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1aa883dd00e119b98ecbb9624ccad70c62" kindref="member">hpm_jpeg_init_sos_info</ref>(<ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*info,<sp/><ref refid="hpm__jpeg_8h_1a257e235cec55cb830a609158684439fb" kindref="member">hpm_jpeg_sampling_format_t</ref><sp/>sampling)</highlight></codeline>
<codeline lineno="815"><highlight class="normal">{</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sampling<sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>)<sp/>{</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[0].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="826"><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[1].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="830"><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sos__info_1afa234f2d80238e44d9a4b1eb18f113e4" kindref="member">cs</ref><sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sos__info_1a84a432824e7cdd2bb7a85f27d28f009f" kindref="member">ta</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a96bdd6142ba6edd4f1cb23df510842ba" kindref="member">component</ref>[2].<ref refid="structhpm__jpeg__sos__info_1ac53448d492835e920ddf60f58931bed7" kindref="member">td</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="835"><highlight class="normal"></highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref><sp/>=<sp/>2<sp/>+<sp/>1<sp/>+<sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>*<sp/>2<sp/>+<sp/>1<sp/>+<sp/>1<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ab1eb01846b78a9c3ba4928336961ddd4" kindref="member">ss</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ad737f571f6b4215018c56bcde3c71350" kindref="member">se</ref><sp/>=<sp/>63;</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1a1be776a664e819af480b5cade786dcaa" kindref="member">ah</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__sos__info_1ac312b9fd6601762f4fc437664c37c8b0" kindref="member">al</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="841"><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="843"><highlight class="normal">}</highlight></codeline>
<codeline lineno="844"><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1a4e56ff9dba9d3bb7eb4c9f54614ef715" kindref="member">std_app0</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/>0xff,<sp/>0xe0,<sp/>0x00,<sp/>0x10,<sp/>0x4a,<sp/>0x46,<sp/>0x49,<sp/>0x46,<sp/>0x00,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x00,<sp/>0x48,</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/>0x00,<sp/>0x48,<sp/>0x00,<sp/>0x00</highlight></codeline>
<codeline lineno="848"><highlight class="normal">};</highlight></codeline>
<codeline lineno="849"><highlight class="normal"></highlight></codeline>
<codeline lineno="850"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1aa14a4df26e39ce2ffb78932edc94af1e" kindref="member">jpeg_std_htab_ac0</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/>0xFF,<sp/>0xC4,<sp/>0x00,<sp/>0xB5,<sp/>0x10,<sp/>0x00,<sp/>0x02,<sp/>0x01,<sp/>0x03,<sp/>0x03,<sp/>0x02,<sp/>0x04,<sp/>0x03,<sp/>0x05,<sp/>0x05,<sp/>0x04,</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/>0x04,<sp/>0x00,<sp/>0x00,<sp/>0x01,<sp/>0x7D,<sp/>0x01,<sp/>0x02,<sp/>0x03,<sp/>0x00,<sp/>0x04,<sp/>0x11,<sp/>0x05,<sp/>0x12,<sp/>0x21,<sp/>0x31,<sp/>0x41,</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/>0x06,<sp/>0x13,<sp/>0x51,<sp/>0x61,<sp/>0x07,<sp/>0x22,<sp/>0x71,<sp/>0x14,<sp/>0x32,<sp/>0x81,<sp/>0x91,<sp/>0xA1,<sp/>0x08,<sp/>0x23,<sp/>0x42,<sp/>0xB1,</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/>0xC1,<sp/>0x15,<sp/>0x52,<sp/>0xD1,<sp/>0xF0,<sp/>0x24,<sp/>0x33,<sp/>0x62,<sp/>0x72,<sp/>0x82,<sp/>0x09,<sp/>0x0A,<sp/>0x16,<sp/>0x17,<sp/>0x18,<sp/>0x19,</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/>0x1A,<sp/>0x25,<sp/>0x26,<sp/>0x27,<sp/>0x28,<sp/>0x29,<sp/>0x2A,<sp/>0x34,<sp/>0x35,<sp/>0x36,<sp/>0x37,<sp/>0x38,<sp/>0x39,<sp/>0x3A,<sp/>0x43,<sp/>0x44,</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/>0x45,<sp/>0x46,<sp/>0x47,<sp/>0x48,<sp/>0x49,<sp/>0x4A,<sp/>0x53,<sp/>0x54,<sp/>0x55,<sp/>0x56,<sp/>0x57,<sp/>0x58,<sp/>0x59,<sp/>0x5A,<sp/>0x63,<sp/>0x64,</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/>0x65,<sp/>0x66,<sp/>0x67,<sp/>0x68,<sp/>0x69,<sp/>0x6A,<sp/>0x73,<sp/>0x74,<sp/>0x75,<sp/>0x76,<sp/>0x77,<sp/>0x78,<sp/>0x79,<sp/>0x7A,<sp/>0x83,<sp/>0x84,</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/>0x85,<sp/>0x86,<sp/>0x87,<sp/>0x88,<sp/>0x89,<sp/>0x8A,<sp/>0x92,<sp/>0x93,<sp/>0x94,<sp/>0x95,<sp/>0x96,<sp/>0x97,<sp/>0x98,<sp/>0x99,<sp/>0x9A,<sp/>0xA2,</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/>0xA3,<sp/>0xA4,<sp/>0xA5,<sp/>0xA6,<sp/>0xA7,<sp/>0xA8,<sp/>0xA9,<sp/>0xAA,<sp/>0xB2,<sp/>0xB3,<sp/>0xB4,<sp/>0xB5,<sp/>0xB6,<sp/>0xB7,<sp/>0xB8,<sp/>0xB9,</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/>0xBA,<sp/>0xC2,<sp/>0xC3,<sp/>0xC4,<sp/>0xC5,<sp/>0xC6,<sp/>0xC7,<sp/>0xC8,<sp/>0xC9,<sp/>0xCA,<sp/>0xD2,<sp/>0xD3,<sp/>0xD4,<sp/>0xD5,<sp/>0xD6,<sp/>0xD7,</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/>0xD8,<sp/>0xD9,<sp/>0xDA,<sp/>0xE1,<sp/>0xE2,<sp/>0xE3,<sp/>0xE4,<sp/>0xE5,<sp/>0xE6,<sp/>0xE7,<sp/>0xE8,<sp/>0xE9,<sp/>0xEA,<sp/>0xF1,<sp/>0xF2,<sp/>0xF3,</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/>0xF4,<sp/>0xF5,<sp/>0xF6,<sp/>0xF7,<sp/>0xF8,<sp/>0xF9,<sp/>0xFA</highlight></codeline>
<codeline lineno="863"><highlight class="normal">};</highlight></codeline>
<codeline lineno="864"><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1a5505b6e481418cbd352b76e74bfae2f4" kindref="member">jpeg_std_htab_ac1</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/>0xFF,<sp/>0xC4,<sp/>0x00,<sp/>0xB5,<sp/>0x11,<sp/>0x00,<sp/>0x02,<sp/>0x01,<sp/>0x02,<sp/>0x04,<sp/>0x04,<sp/>0x03,<sp/>0x04,<sp/>0x07,<sp/>0x05,<sp/>0x04,</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/>0x04,<sp/>0x00,<sp/>0x01,<sp/>0x02,<sp/>0x77,<sp/>0x00,<sp/>0x01,<sp/>0x02,<sp/>0x03,<sp/>0x11,<sp/>0x04,<sp/>0x05,<sp/>0x21,<sp/>0x31,<sp/>0x06,<sp/>0x12,</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/>0x41,<sp/>0x51,<sp/>0x07,<sp/>0x61,<sp/>0x71,<sp/>0x13,<sp/>0x22,<sp/>0x32,<sp/>0x81,<sp/>0x08,<sp/>0x14,<sp/>0x42,<sp/>0x91,<sp/>0xA1,<sp/>0xB1,<sp/>0xC1,</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/>0x09,<sp/>0x23,<sp/>0x33,<sp/>0x52,<sp/>0xF0,<sp/>0x15,<sp/>0x62,<sp/>0x72,<sp/>0xD1,<sp/>0x0A,<sp/>0x16,<sp/>0x24,<sp/>0x34,<sp/>0xE1,<sp/>0x25,<sp/>0xF1,</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/>0x17,<sp/>0x18,<sp/>0x19,<sp/>0x1A,<sp/>0x26,<sp/>0x27,<sp/>0x28,<sp/>0x29,<sp/>0x2A,<sp/>0x35,<sp/>0x36,<sp/>0x37,<sp/>0x38,<sp/>0x39,<sp/>0x3A,<sp/>0x43,</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/>0x44,<sp/>0x45,<sp/>0x46,<sp/>0x47,<sp/>0x48,<sp/>0x49,<sp/>0x4A,<sp/>0x53,<sp/>0x54,<sp/>0x55,<sp/>0x56,<sp/>0x57,<sp/>0x58,<sp/>0x59,<sp/>0x5A,<sp/>0x63,</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/>0x64,<sp/>0x65,<sp/>0x66,<sp/>0x67,<sp/>0x68,<sp/>0x69,<sp/>0x6A,<sp/>0x73,<sp/>0x74,<sp/>0x75,<sp/>0x76,<sp/>0x77,<sp/>0x78,<sp/>0x79,<sp/>0x7A,<sp/>0x82,</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/>0x83,<sp/>0x84,<sp/>0x85,<sp/>0x86,<sp/>0x87,<sp/>0x88,<sp/>0x89,<sp/>0x8A,<sp/>0x92,<sp/>0x93,<sp/>0x94,<sp/>0x95,<sp/>0x96,<sp/>0x97,<sp/>0x98,<sp/>0x99,</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/>0x9A,<sp/>0xA2,<sp/>0xA3,<sp/>0xA4,<sp/>0xA5,<sp/>0xA6,<sp/>0xA7,<sp/>0xA8,<sp/>0xA9,<sp/>0xAA,<sp/>0xB2,<sp/>0xB3,<sp/>0xB4,<sp/>0xB5,<sp/>0xB6,<sp/>0xB7,</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/>0xB8,<sp/>0xB9,<sp/>0xBA,<sp/>0xC2,<sp/>0xC3,<sp/>0xC4,<sp/>0xC5,<sp/>0xC6,<sp/>0xC7,<sp/>0xC8,<sp/>0xC9,<sp/>0xCA,<sp/>0xD2,<sp/>0xD3,<sp/>0xD4,<sp/>0xD5,</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/>0xD6,<sp/>0xD7,<sp/>0xD8,<sp/>0xD9,<sp/>0xDA,<sp/>0xE2,<sp/>0xE3,<sp/>0xE4,<sp/>0xE5,<sp/>0xE6,<sp/>0xE7,<sp/>0xE8,<sp/>0xE9,<sp/>0xEA,<sp/>0xF2,<sp/>0xF3,</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/>0xF4,<sp/>0xF5,<sp/>0xF6,<sp/>0xF7,<sp/>0xF8,<sp/>0xF9,<sp/>0xFA</highlight></codeline>
<codeline lineno="878"><highlight class="normal">};</highlight></codeline>
<codeline lineno="879"><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1a0dedcffc5574889b0336aa5f77d03b32" kindref="member">jpeg_std_htab_dc0</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/>0xFF,<sp/>0xC4,<sp/>0x00,<sp/>0x1F,<sp/>0x00,<sp/>0x00,<sp/>0x01,<sp/>0x05,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x00,<sp/>0x00,</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x01,<sp/>0x02,<sp/>0x03,<sp/>0x04,<sp/>0x05,<sp/>0x06,<sp/>0x07,<sp/>0x08,<sp/>0x09,<sp/>0x0A,</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0B</highlight></codeline>
<codeline lineno="884"><highlight class="normal">};</highlight></codeline>
<codeline lineno="885"><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1a0b27b28313ea1667de6bb485faa17b54" kindref="member">jpeg_std_htab_dc1</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/>0xFF,<sp/>0xC4,<sp/>0x00,<sp/>0x1F,<sp/>0x01,<sp/>0x00,<sp/>0x03,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,<sp/>0x01,</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x00,<sp/>0x01,<sp/>0x02,<sp/>0x03,<sp/>0x04,<sp/>0x05,<sp/>0x06,<sp/>0x07,<sp/>0x08,<sp/>0x09,<sp/>0x0A,</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/>0x0B</highlight></codeline>
<codeline lineno="890"><highlight class="normal">};</highlight></codeline>
<codeline lineno="891"><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>These<sp/>are<sp/>the<sp/>sample<sp/>quantization<sp/>tables<sp/>given<sp/>in<sp/>JPEG<sp/>spec<sp/>section<sp/>K.1.</highlight></codeline>
<codeline lineno="893"><highlight class="comment"><sp/>*<sp/>The<sp/>spec<sp/>says<sp/>that<sp/>the<sp/>values<sp/>given<sp/>produce<sp/>&quot;good&quot;<sp/>quality,<sp/>and</highlight></codeline>
<codeline lineno="894"><highlight class="comment"><sp/>*<sp/>when<sp/>divided<sp/>by<sp/>2,<sp/>&quot;very<sp/>good&quot;<sp/>quality.</highlight></codeline>
<codeline lineno="895"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="896"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1ae84dde12a88313ba543559a0b47a0f6b" kindref="member">std_luminance_qtab</ref>[64]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/>16,<sp/><sp/>11,<sp/><sp/>10,<sp/><sp/>16,<sp/><sp/>24,<sp/><sp/>40,<sp/><sp/>51,<sp/><sp/>61,</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>12,<sp/><sp/>12,<sp/><sp/>14,<sp/><sp/>19,<sp/><sp/>26,<sp/><sp/>58,<sp/><sp/>60,<sp/><sp/>55,</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/>14,<sp/><sp/>13,<sp/><sp/>16,<sp/><sp/>24,<sp/><sp/>40,<sp/><sp/>57,<sp/><sp/>69,<sp/><sp/>56,</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/>14,<sp/><sp/>17,<sp/><sp/>22,<sp/><sp/>29,<sp/><sp/>51,<sp/><sp/>87,<sp/><sp/>80,<sp/><sp/>62,</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/>18,<sp/><sp/>22,<sp/><sp/>37,<sp/><sp/>56,<sp/><sp/>68,<sp/>109,<sp/>103,<sp/><sp/>77,</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/>24,<sp/><sp/>35,<sp/><sp/>55,<sp/><sp/>64,<sp/><sp/>81,<sp/>104,<sp/>113,<sp/><sp/>92,</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>49,<sp/><sp/>64,<sp/><sp/>78,<sp/><sp/>87,<sp/>103,<sp/>121,<sp/>120,<sp/>101,</highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/>72,<sp/><sp/>92,<sp/><sp/>95,<sp/><sp/>98,<sp/>112,<sp/>100,<sp/>103,<sp/><sp/>99</highlight></codeline>
<codeline lineno="905"><highlight class="normal">};</highlight></codeline>
<codeline lineno="906"><highlight class="normal"></highlight></codeline>
<codeline lineno="907"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__jpeg_8c_1ad2f4a42ca000c47da6601c4e4961ca21" kindref="member">std_chrominance_qtab</ref>[64]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/>17,<sp/><sp/>18,<sp/><sp/>24,<sp/><sp/>47,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/>18,<sp/><sp/>21,<sp/><sp/>26,<sp/><sp/>66,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/>24,<sp/><sp/>26,<sp/><sp/>56,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/>47,<sp/><sp/>66,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99,<sp/><sp/>99</highlight></codeline>
<codeline lineno="916"><highlight class="normal">};</highlight></codeline>
<codeline lineno="917"><highlight class="normal"></highlight></codeline>
<codeline lineno="918"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Convert<sp/>a<sp/>user-specified<sp/>quality<sp/>rating<sp/>to<sp/>a<sp/>percentage<sp/>scaling<sp/>factor</highlight></codeline>
<codeline lineno="919"><highlight class="comment"><sp/>*<sp/>for<sp/>an<sp/>underlying<sp/>quantization<sp/>table,<sp/>using<sp/>our<sp/>recommended<sp/>scaling<sp/>curve.</highlight></codeline>
<codeline lineno="920"><highlight class="comment"><sp/>*<sp/>The<sp/>input<sp/>&apos;quality&apos;<sp/>factor<sp/>should<sp/>be<sp/>0<sp/>(terrible)<sp/>to<sp/>100<sp/>(very<sp/>good).</highlight></codeline>
<codeline lineno="921"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="922"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a1f334a653fa5b816422207282e7db4eb" kindref="member">hpm_jpege_quality_scaling</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>quality)</highlight></codeline>
<codeline lineno="923"><highlight class="normal">{</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Safety<sp/>limit<sp/>on<sp/>quality<sp/>factor.<sp/><sp/>Convert<sp/>0<sp/>to<sp/>1<sp/>to<sp/>avoid<sp/>zero<sp/>divide.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(quality<sp/>&lt;=<sp/>0)</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quality<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(quality<sp/>&gt;<sp/>100)</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quality<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>basic<sp/>table<sp/>is<sp/>used<sp/>as-is<sp/>(scaling<sp/>100)<sp/>for<sp/>a<sp/>quality<sp/>of<sp/>50.</highlight></codeline>
<codeline lineno="931"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Qualities<sp/>50..100<sp/>are<sp/>converted<sp/>to<sp/>scaling<sp/>percentage<sp/>200<sp/>-<sp/>2*Q;</highlight></codeline>
<codeline lineno="932"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>note<sp/>that<sp/>at<sp/>Q=100<sp/>the<sp/>scaling<sp/>is<sp/>0,<sp/>which<sp/>will<sp/>cause<sp/>jpeg_add_quant_table</highlight></codeline>
<codeline lineno="933"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>to<sp/>make<sp/>all<sp/>the<sp/>table<sp/>entries<sp/>1<sp/>(hence,<sp/>minimum<sp/>quantization<sp/>loss).</highlight></codeline>
<codeline lineno="934"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Qualities<sp/>1..50<sp/>are<sp/>converted<sp/>to<sp/>scaling<sp/>percentage<sp/>5000/Q.</highlight></codeline>
<codeline lineno="935"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(quality<sp/>&lt;<sp/>50)</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quality<sp/>=<sp/>5000<sp/>/<sp/>quality;</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quality<sp/>=<sp/>200<sp/>-<sp/>quality<sp/>*<sp/>2;</highlight></codeline>
<codeline lineno="940"><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>quality;</highlight></codeline>
<codeline lineno="942"><highlight class="normal">}</highlight></codeline>
<codeline lineno="943"><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a70ad627d6c48bb3c8664d81c41baabeb" kindref="member">hpm_jpege_scale_qtab</ref>(uint8_t<sp/>*qtab_scaled,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*qtab_basic,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>quality)</highlight></codeline>
<codeline lineno="945"><highlight class="normal">{</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>temp;</highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Convert<sp/>user<sp/>0-100<sp/>rating<sp/>to<sp/>percentage<sp/>scaling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>scale_factor<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a1f334a653fa5b816422207282e7db4eb" kindref="member">hpm_jpege_quality_scaling</ref>(quality);</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>64;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>((long)qtab_basic[i]<sp/>*<sp/>scale_factor<sp/>+<sp/>50L)<sp/>/<sp/>100L;</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>limit<sp/>the<sp/>values<sp/>to<sp/>the<sp/>valid<sp/>range<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp<sp/>&lt;=<sp/>0L)</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>1L;</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp<sp/>&gt;<sp/>255L)</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>255L;<sp/></highlight><highlight class="comment">/*<sp/>limit<sp/>to<sp/>baseline<sp/>range<sp/>if<sp/>requested<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtab_scaled[i]<sp/>=<sp/>(uint8_t)temp;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="960"><highlight class="normal">}</highlight></codeline>
<codeline lineno="961"><highlight class="normal"></highlight></codeline>
<codeline lineno="962"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a5652e3e39a26f68b76555947e4e6caef" kindref="member">hpm_jpege_get_qtab_luminance</ref>(uint8_t<sp/>*qtab_zig_zag,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>quality)</highlight></codeline>
<codeline lineno="963"><highlight class="normal">{</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a70ad627d6c48bb3c8664d81c41baabeb" kindref="member">hpm_jpege_scale_qtab</ref>(qtab_zig_zag,<sp/><ref refid="hpm__jpeg_8c_1ae84dde12a88313ba543559a0b47a0f6b" kindref="member">std_luminance_qtab</ref>,<sp/>quality);</highlight></codeline>
<codeline lineno="965"><highlight class="normal">}</highlight></codeline>
<codeline lineno="966"><highlight class="normal"></highlight></codeline>
<codeline lineno="967"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1acac5b67987b106721ece9ac1e0d2d788" kindref="member">hpm_jpege_get_qtab_chrominance</ref>(uint8_t<sp/>*qtab_zig_zag,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>quality)</highlight></codeline>
<codeline lineno="968"><highlight class="normal">{</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a70ad627d6c48bb3c8664d81c41baabeb" kindref="member">hpm_jpege_scale_qtab</ref>(qtab_zig_zag,<sp/><ref refid="hpm__jpeg_8c_1ad2f4a42ca000c47da6601c4e4961ca21" kindref="member">std_chrominance_qtab</ref>,<sp/>quality);</highlight></codeline>
<codeline lineno="970"><highlight class="normal">}</highlight></codeline>
<codeline lineno="971"><highlight class="normal"></highlight></codeline>
<codeline lineno="972"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a0b01665f2101695dd4d4ec52e2ff812f" kindref="member">hpm_jpeg_fill_jpeg_info_to_file</ref>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*buf,<sp/>uint32_t<sp/>len)</highlight></codeline>
<codeline lineno="973"><highlight class="normal">{</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a70c4c755e9aa0e754139e45cd1febf7f" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*sos_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a53ed23ffee40702e2743852de4f95bbc" kindref="member">sos_info</ref>;</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1afcb30f396a4270323f2e6f3eb27d0029" kindref="member">hpm_jpeg_std_tab_t</ref><sp/>*std_tab<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a1332ae76669c58158f5f23d9b7b087a2" kindref="member">std_tab</ref>;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref><sp/>*cfg<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a0029725cac091b732bff88f7ef1ce89a" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a497c1f9287dbaca17b7f13e7891a15d3" kindref="member">hpm_jpeg_file_t</ref><sp/>*jpeg_file<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>;</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*pos<sp/>=<sp/>(uint8_t<sp/>*)buf;</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="982"><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="984"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Reserve<sp/>for<sp/>jpeg<sp/>head</highlight></codeline>
<codeline lineno="985"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>1024;</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="988"><highlight class="normal"></highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="990"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>sos</highlight></codeline>
<codeline lineno="991"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>(sos_info-&gt;<ref refid="structhpm__jpeg__sos__info_1a3247a923abfcd2085fae65370215e16d" kindref="member">ls</ref><sp/>+<sp/>2);</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a98df55d31c2011763c8430963d39eabd" kindref="member">hpm_jpeg_set_sos_info_to_buf</ref>(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>,<sp/>sos_info);</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="997"><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="999"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>dht</highlight></codeline>
<codeline lineno="1000"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sos_info-&gt;<ref refid="structhpm__jpeg__sos__info_1af942af4b45f6e9e7fbe8d21b229c58c3" kindref="member">ns</ref><sp/>==<sp/>3)<sp/>{</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[1];</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[1]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[1],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a5d50611a981b9ee8350b25659d9fb1ee" kindref="member">dht_ac</ref>[1],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[1]);</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"></highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[1];</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[1]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[1],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1abb707678f15bd455fc805cf7d7624b9a" kindref="member">dht_dc</ref>[1],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[1]);</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"></highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[0];</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[0]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[0],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a5d50611a981b9ee8350b25659d9fb1ee" kindref="member">dht_ac</ref>[0],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[0]);</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"></highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[0];</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[0]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[0],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1abb707678f15bd455fc805cf7d7624b9a" kindref="member">dht_dc</ref>[0],<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[0]);</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1020"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>sof0</highlight></codeline>
<codeline lineno="1021"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1aebb26489ad4da49a7c61a24b2cb1b2d6" kindref="member">lf</ref><sp/>+<sp/>2);</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a920176c9a3bcc833180066a1ac1b1429" kindref="member">sof0</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a5f4c5af1eac3cc9d302e5121313c0f12" kindref="member">hpm_jpeg_set_sof0_info_to_buf</ref>(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a920176c9a3bcc833180066a1ac1b1429" kindref="member">sof0</ref>,<sp/>sof0_info);</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"></highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1029"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>dqt</highlight></codeline>
<codeline lineno="1030"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a927394f2e7a891185ba18c51bb4266f7" kindref="member">nf</ref><sp/>==<sp/>3)<sp/>{</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>69;</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][0]<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a2e6f4c4acebf180b7e6fcd6e085f9c5d" kindref="member">JPEG_MARKER_DQT</ref>;</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][2]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][3]<sp/>=<sp/>67;</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][4]<sp/>=<sp/>1;<sp/></highlight><highlight class="comment">/*<sp/>Pq,<sp/>Tq<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1acac5b67987b106721ece9ac1e0d2d788" kindref="member">hpm_jpege_get_qtab_chrominance</ref>(&amp;info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[1][5],<sp/>cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a1f767eba93d53bd44da8bc7fadbb4255" kindref="member">jpeg_quality</ref>);</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"></highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>69;</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0]<sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][0]<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a2e6f4c4acebf180b7e6fcd6e085f9c5d" kindref="member">JPEG_MARKER_DQT</ref>;</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][2]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][3]<sp/>=<sp/>67;</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][4]<sp/>=<sp/>0;<sp/></highlight><highlight class="comment">/*<sp/>Pq,<sp/>Tq<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a5652e3e39a26f68b76555947e4e6caef" kindref="member">hpm_jpege_get_qtab_luminance</ref>(&amp;info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0][5],<sp/>cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a1f767eba93d53bd44da8bc7fadbb4255" kindref="member">jpeg_quality</ref>);</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1052"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>app0</highlight></codeline>
<codeline lineno="1053"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a3e0dfa4cd8cd90e551ffb4adddb98196" kindref="member">app0_len</ref>;</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ae2c716c18bbd0c61235849395a15a5a9" kindref="member">app0</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ae2c716c18bbd0c61235849395a15a5a9" kindref="member">app0</ref>,<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a133cc1d3d7bb55cb6cbf03a7cc958e6d" kindref="member">app0</ref>,<sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a3e0dfa4cd8cd90e551ffb4adddb98196" kindref="member">app0_len</ref>);</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"></highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1059"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Fill<sp/>soi</highlight></codeline>
<codeline lineno="1060"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>-=<sp/>2;</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref>[0]<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref>[1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a6a73d744a065090aa9e890b8547304e9" kindref="member">JPEG_MARKER_SOI</ref>;</highlight></codeline>
<codeline lineno="1065"><highlight class="normal"></highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1067"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Recode<sp/>head<sp/>length</highlight></codeline>
<codeline lineno="1068"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/>jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref><sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref>;</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/>jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref><sp/>=<sp/>((uint32_t)info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref><sp/>-<sp/>(uint32_t)info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref>);</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"></highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>soi<sp/>start:<sp/>0x%x\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref>);</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>head<sp/>length:<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>);</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"></highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1076"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"></highlight></codeline>
<codeline lineno="1078"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a18212764ba2d5bafcfd73bffa2d67d89" kindref="member">hpm_jpeg_get_jpeg_info_from_file</ref>(<ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*info,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*buf,<sp/>uint32_t<sp/>len)</highlight></codeline>
<codeline lineno="1079"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*pos<sp/>=<sp/>(uint8_t<sp/>*)buf;</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*pos_eof<sp/>=<sp/>pos<sp/>+<sp/>len;</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>marker_len;</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>marker;</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>is_ac;</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>htid;</highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>qtid;</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(info,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref>));</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"></highlight></codeline>
<codeline lineno="1090"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pos<sp/>&lt;<sp/>pos_eof<sp/>&amp;&amp;<sp/>!info-&gt;sos<sp/>&amp;&amp;<sp/>!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*pos++<sp/>==<sp/>0xff)<sp/>{</highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>*pos++;</highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker_len<sp/>=<sp/>*pos;</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker_len<sp/>=<sp/>marker_len&lt;&lt;8<sp/>|<sp/>*(pos<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(marker)<sp/>{</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a6a73d744a065090aa9e890b8547304e9" kindref="member">JPEG_MARKER_SOI</ref>:</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref><sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a3eb6e3444f79d449058145a01872f4b3" kindref="member">JPEG_MARKER_APP0</ref>:</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ae2c716c18bbd0c61235849395a15a5a9" kindref="member">app0</ref><sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>marker_len;</highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ace1cba21e90c695ff4ab9a944cf5b861" kindref="member">JPEG_MARKER_DHT</ref>:</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_ac<sp/>=<sp/>(*(pos<sp/>+<sp/>2))&gt;&gt;4<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>htid<sp/>=<sp/>(*(pos<sp/>+<sp/>2))<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_ac<sp/>&gt;<sp/>1<sp/>||<sp/>htid<sp/>&gt;<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a119a8ac5ed606c11a58115e54582a9f2" kindref="member">HPM_JPEG_RET_MARKER_ERR</ref>;</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_ac)<sp/>{</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[htid]<sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[htid]<sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>marker_len;</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a2e6f4c4acebf180b7e6fcd6e085f9c5d" kindref="member">JPEG_MARKER_DQT</ref>:</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qtid<sp/>=<sp/>(*(pos<sp/>+<sp/>2))<sp/>&amp;<sp/>0x0f;</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(qtid<sp/>&gt;<sp/>3)<sp/>{</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a119a8ac5ed606c11a58115e54582a9f2" kindref="member">HPM_JPEG_RET_MARKER_ERR</ref>;</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[qtid]<sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>marker_len;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1aaf78d4b02fd283b9fbd481e49036331d" kindref="member">JPEG_MARKER_SOF0</ref>:</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a920176c9a3bcc833180066a1ac1b1429" kindref="member">sof0</ref><sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>marker_len;</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a0369b1ea05269cf6fd5421459362ad88" kindref="member">JPEG_MARKER_SOS</ref>:</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref><sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>marker_len;</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1af8a211b377fa3170d083fa645def7a52" kindref="member">JPEG_MARKER_EOI</ref>:</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref><sp/>=<sp/>pos<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0xff:</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos--;</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"></highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>=<sp/>(uint8_t<sp/>*)buf;</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/>pos_eof<sp/>=<sp/>pos<sp/>+<sp/>len<sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"></highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pos<sp/>&lt;<sp/>pos_eof<sp/>&amp;&amp;<sp/>!info-&gt;eoi)<sp/>{</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*pos_eof<sp/>==<sp/>0xff)<sp/>{</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>*(pos_eof<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(marker<sp/>==<sp/><ref refid="hpm__jpeg_8c_1af8a211b377fa3170d083fa645def7a52" kindref="member">JPEG_MARKER_EOI</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref><sp/>=<sp/>pos_eof;</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos_eof--;</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"></highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>[0])<sp/>{</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>can&apos;t<sp/>find<sp/>DQT\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9916b204d20b8601b74db4f78ac8179e" kindref="member">HPM_JPEG_RET_JPEG_FILE_ERROR</ref>;</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"></highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>can&apos;t<sp/>find<sp/>EOI\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9916b204d20b8601b74db4f78ac8179e" kindref="member">HPM_JPEG_RET_JPEG_FILE_ERROR</ref>;</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"></highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[0])<sp/>{</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>can&apos;t<sp/>find<sp/>DHT<sp/>AC\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9916b204d20b8601b74db4f78ac8179e" kindref="member">HPM_JPEG_RET_JPEG_FILE_ERROR</ref>;</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"></highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[0])<sp/>{</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>can&apos;t<sp/>find<sp/>DHT<sp/>DC\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9916b204d20b8601b74db4f78ac8179e" kindref="member">HPM_JPEG_RET_JPEG_FILE_ERROR</ref>;</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"></highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg<sp/>can&apos;t<sp/>find<sp/>SOS\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a9916b204d20b8601b74db4f78ac8179e" kindref="member">HPM_JPEG_RET_JPEG_FILE_ERROR</ref>;</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"></highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/>marker_len<sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>[2]&lt;&lt;8<sp/>|<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>[3];</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref><sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref><sp/>+<sp/>2<sp/>+<sp/>marker_len;<sp/></highlight><highlight class="comment">/*<sp/>skip<sp/>sos<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a3679b1b6c079709a8e325043af642512" kindref="member">ecs_len</ref><sp/>=<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref><sp/>-<sp/>info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref><sp/>+<sp/>2;<sp/></highlight><highlight class="comment">/*<sp/>include<sp/>EOI<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1186"><highlight class="normal"></highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1188"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"></highlight></codeline>
<codeline lineno="1190"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a985250cb3ede902c6679d80a18280e7f" kindref="member">hpm_jpeg_get_pixel_size</ref>(<ref refid="hpm__jpeg_8h_1a1a37698ef48fb9339bc31c69cbc2d42a" kindref="member">hpm_jpeg_image_format_t</ref><sp/>format)</highlight></codeline>
<codeline lineno="1191"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a1a37698ef48fb9339bc31c69cbc2d42a" kindref="member">hpm_jpeg_image_format_t</ref><sp/>format;</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/>tab[6]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{2,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a163fa55a52bc03ac0319cb193ba5f260" kindref="member">HPM_JPEG_IMAGE_FORMAT_RGB565</ref>},</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{4,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a78848c5019cbbb719d234efa0523f091" kindref="member">HPM_JPEG_IMAGE_FORMAT_ARGB8888</ref>},</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{4,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a02d11c00a430b0745d5ef1b3f02b9f9b" kindref="member">HPM_JPEG_IMAGE_FORMAT_BGRA8888</ref>},</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{2,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a5c744012b319aebc32c60dc6d47f170a" kindref="member">HPM_JPEG_IMAGE_FORMAT_YUYV422</ref>},</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{2,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713af25ed5557a3ca0f7ea08dbc20c640b5c" kindref="member">HPM_JPEG_IMAGE_FORMAT_UYVY422</ref>},</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{1,<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713ad10d2a7fe497190bf0270d39f14e6680" kindref="member">HPM_JPEG_IMAGE_FORMAT_Y8</ref>},</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"></highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint32_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(tab);<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(format<sp/>==<sp/>tab[i].format)</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tab[i].size;</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"></highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1210"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"></highlight></codeline>
<codeline lineno="1212"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a45ec5e3154016d7961d6f9badd5214dc" kindref="member">hpm_jpeg_decode_image_buf_init</ref>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1213"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1afe8913c260b533f03381b9200c43b6d9" kindref="member">hpm_jpeg_decode_cfg_t</ref><sp/>*cfg<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1a0a443440319cd84199463a2640e4c780" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1afbb7cf4eae02fd1796d0d370bf1f337f" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1a3750a2a63f17793cac647be7371990fe" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pixel_size;</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>buf_len;</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*alloced_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_width;</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_height;</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_stride;</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"></highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/>pixel_size<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a985250cb3ede902c6679d80a18280e7f" kindref="member">hpm_jpeg_get_pixel_size</ref>(cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8437a58b138db7a6a17b80567c2bcace" kindref="member">out_format</ref>);</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pixel_size)<sp/>{</highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;pixel<sp/>size<sp/>incorrect\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"></highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"></highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8437a58b138db7a6a17b80567c2bcace" kindref="member">out_format</ref>;</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref><sp/>=<sp/>sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>;</highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref><sp/>=<sp/>sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>;</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_width<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__decode__job_1a12fe82361198b54148000366c7ec5bf2" kindref="member">x_align</ref>);</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_height<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__decode__job_1acd1a2d17f00385408ee4fbcfa396b7e0" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_stride<sp/>=<sp/>pixel_size<sp/>*<sp/>aligned_width;</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8f8f2234d6dfcb5beacae2d3aa134305" kindref="member">out_image_stride</ref><sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/>cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8f8f2234d6dfcb5beacae2d3aa134305" kindref="member">out_image_stride</ref><sp/>&lt;<sp/>aligned_stride)<sp/>{</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;out_image_stride(%u)<sp/>too<sp/>small\n&quot;</highlight><highlight class="normal">,<sp/>cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8f8f2234d6dfcb5beacae2d3aa134305" kindref="member">out_image_stride</ref>);</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1250"><highlight class="normal"></highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8f8f2234d6dfcb5beacae2d3aa134305" kindref="member">out_image_stride</ref><sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>=<sp/>pixel_size<sp/>*<sp/>aligned_width;</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__decode__cfg_1a8f8f2234d6dfcb5beacae2d3aa134305" kindref="member">out_image_stride</ref>;</highlight></codeline>
<codeline lineno="1255"><highlight class="normal"></highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/>buf_len<sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>*<sp/>aligned_height;</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>buf_len;</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"></highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>&lt;<sp/>buf_len)<sp/>{</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;force<sp/>direct<sp/>buf<sp/>%u<sp/>bytes<sp/>too<sp/>small,<sp/>at<sp/>least<sp/>%u<sp/>bytes<sp/>are<sp/>needed\n&quot;</highlight><highlight class="normal">,<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>,<sp/>buf_len);</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref><sp/>=<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"></highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_len<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(buf_len,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/>alloced_len<sp/>=<sp/>aligned_len<sp/>+<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/>alloced_buf<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(alloced_len);</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!alloced_buf)<sp/>{</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc(%u)<sp/>failed\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)alloced_len);</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a8066c3ea75a283792dc555f2abe0e55d" kindref="member">HPM_JPEG_RET_MALLOC_ERR</ref>;</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>alloced_buf;</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>((uint32_t)alloced_buf,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a0531698a38a4efa1727c0afbf45fa732" kindref="member">hpm_jpeg_cache_invalid</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>);</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/>image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref><sp/>=<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"></highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1284"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"></highlight></codeline>
<codeline lineno="1286"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ad2cd5153994a82aca83d70fc700678be" kindref="member">hpm_jpeg_decode_image_buf_deinit</ref>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1287"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"></highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(image_buf,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref>));</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"></highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1297"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"></highlight></codeline>
<codeline lineno="1299"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a9475c7ddb9db94ae7ad42f42c9fc1019" kindref="member">hpm_jpeg_encode_file_buf_init</ref>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1300"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a497c1f9287dbaca17b7f13e7891a15d3" kindref="member">hpm_jpeg_file_t</ref><sp/>*jpeg_file<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>;</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>buf_len;</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*alloced_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"></highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/>buf_len<sp/>=<sp/>1024<sp/>+<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"></highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/>jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>&lt;<sp/>buf_len)<sp/>{</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;force<sp/>direct<sp/>buf<sp/>%u<sp/>bytes<sp/>too<sp/>small,<sp/>at<sp/>least<sp/>%u<sp/>bytes<sp/>are<sp/>needed\n&quot;</highlight><highlight class="normal">,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>,<sp/>buf_len);</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jpeg_file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref><sp/>=<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"></highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"></highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"></highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_len<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(buf_len,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/>alloced_len<sp/>=<sp/>aligned_len<sp/>+<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"></highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1332"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>The<sp/>original<sp/>memory<sp/>is<sp/>used<sp/>if<sp/>encode<sp/>is<sp/>restart<sp/>and<sp/>memory<sp/>size<sp/>isn&apos;t<sp/>change.</highlight></codeline>
<codeline lineno="1333"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alloced_len<sp/>!=<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alloced_buf<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(alloced_len);</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!alloced_buf)<sp/>{</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc(%u)<sp/>failed\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)alloced_len);</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a8066c3ea75a283792dc555f2abe0e55d" kindref="member">HPM_JPEG_RET_MALLOC_ERR</ref>;</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>alloced_buf;</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>((uint32_t)alloced_buf,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1351"><highlight class="normal"></highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a0531698a38a4efa1727c0afbf45fa732" kindref="member">hpm_jpeg_cache_invalid</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>);</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"></highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1355"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a8ef2bdbdd2777d705e048b5f4ff1e36a" kindref="member">hpm_jpeg_encode_file_buf_deinit</ref>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1358"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1364"><highlight class="normal"></highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(file_buf,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref>));</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1368"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"></highlight></codeline>
<codeline lineno="1370"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1acbdfe1ecff1e917b393ec8391eb4c6de" kindref="member">hpm_jpeg_interrupt_enable</ref>(<ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx)</highlight></codeline>
<codeline lineno="1371"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga0e35231581c3be97db0e365cde2a5aa4" kindref="member">jpeg_enable_irq</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1ga382e5545d8daae654d1d7c36e71caf6e" kindref="member">JPEG_EVENT_OUT_DMA_FINISH</ref><sp/>|<sp/><ref refid="group__Jpeg__interface_1gac73eaf5cc012963cf97558d9ebf0cc2e" kindref="member">JPEG_EVENT_ERROR</ref>);</highlight></codeline>
<codeline lineno="1373"><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1375"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"></highlight></codeline>
<codeline lineno="1377"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a370ac81b962b66140571ae740b197231" kindref="member">hpm_jpeg_decode_config_and_start</ref>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1378"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1afbb7cf4eae02fd1796d0d370bf1f337f" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*jpeg_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1a284e4df28b319f6f53d0d4a633b66a83" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1a3750a2a63f17793cac647be7371990fe" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structjpeg__job__config__t" kindref="compound">jpeg_job_config_t</ref><sp/>config<sp/>=<sp/>{0};</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"></highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a163fa55a52bc03ac0319cb193ba5f260" kindref="member">HPM_JPEG_IMAGE_FORMAT_RGB565</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa4b34179da8d7c6a438e39ebc0253278f" kindref="member">jpeg_pixel_format_rgb565</ref>;</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga1685f528ff4d90d82794250b9cc1af0d" kindref="member">JPEG_BYTE_ORDER_2301</ref>;</highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a78848c5019cbbb719d234efa0523f091" kindref="member">HPM_JPEG_IMAGE_FORMAT_ARGB8888</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa2b8b8fe46c195ec0de4676b482ace5eb" kindref="member">jpeg_pixel_format_argb8888</ref>;</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a02d11c00a430b0745d5ef1b3f02b9f9b" kindref="member">HPM_JPEG_IMAGE_FORMAT_BGRA8888</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa2b8b8fe46c195ec0de4676b482ace5eb" kindref="member">jpeg_pixel_format_argb8888</ref>;</highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga37b17a63480d0a94e4681d73cd196b69" kindref="member">JPEG_BYTE_ORDER_0123</ref>;</highlight></codeline>
<codeline lineno="1396"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a5c744012b319aebc32c60dc6d47f170a" kindref="member">HPM_JPEG_IMAGE_FORMAT_YUYV422</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa223deffd88dc7a21e8397b0a3638120c" kindref="member">jpeg_pixel_format_yuv422h1p</ref>;</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713af25ed5557a3ca0f7ea08dbc20c640b5c" kindref="member">HPM_JPEG_IMAGE_FORMAT_UYVY422</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa223deffd88dc7a21e8397b0a3638120c" kindref="member">jpeg_pixel_format_yuv422h1p</ref>;</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga1685f528ff4d90d82794250b9cc1af0d" kindref="member">JPEG_BYTE_ORDER_2301</ref>;</highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713ad10d2a7fe497190bf0270d39f14e6680" kindref="member">HPM_JPEG_IMAGE_FORMAT_Y8</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a09f521b7fd64c63a439e23cf9577aec2" kindref="member">out_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa3422665554771f1c6451dcfa51549b5a" kindref="member">jpeg_pixel_format_y8</ref>;</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Image<sp/>out<sp/>format<sp/>[%u]<sp/>can&apos;t<sp/>be<sp/>supported\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref>);</highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"></highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1aee133b41cc4d3053bb711663148bbcfb" kindref="member">enable_ycbcr</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"></highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea71cd4ed2b6a30976dc94bf849762dfe5" kindref="member">HPM_JPEG_SAMPLING_FORMAT_420</ref>)</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga7c320594b28e9fe00512436d2df8569b" kindref="member">JPEG_SUPPORTED_FORMAT_420</ref>;</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeaf4c3d1779b4044b80aad48658906a321" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422H</ref>)</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gae24d5a3c44d25e27446897948836ac4f" kindref="member">JPEG_SUPPORTED_FORMAT_422H</ref>;</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea010728d72728307221c3ea8203434b8a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422V</ref>)</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga22dc2568cb4e390c7a13ad44567b2aab" kindref="member">JPEG_SUPPORTED_FORMAT_422V</ref>;</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeac7a0b7d48d2e894b7c3cf30c8753f7ad" kindref="member">HPM_JPEG_SAMPLING_FORMAT_444</ref>)</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga0a73b9370eba5d7ca8cfb2c186bad725" kindref="member">JPEG_SUPPORTED_FORMAT_444</ref>;</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>)</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gaa8d1d65837c8d7c0056fd59004cdab6c" kindref="member">JPEG_SUPPORTED_FORMAT_400</ref>;</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;sampling<sp/>[%u]<sp/>can&apos;t<sp/>be<sp/>supported\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref>);</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1426"><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a122d30120d6ae1e81401a56b0993a939" kindref="member">width_in_pixel</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__decode__job_1a12fe82361198b54148000366c7ec5bf2" kindref="member">x_align</ref>);</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a87c3f7774262d33898e573d01eff6135" kindref="member">height_in_pixel</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__decode__job_1acd1a2d17f00385408ee4fbcfa396b7e0" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1adfe8d1ce86a7778fd19d0eca3f7cc508" kindref="member">in_buffer</ref><sp/>=<sp/>(uint32_t)jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref>;</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a61d26eac50535a32f4d109ceaaf39597" kindref="member">out_buffer</ref><sp/>=<sp/>(uint32_t)image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a1dcb53b3337be82b3751fd233715dd2c" kindref="member">stride</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>;</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"></highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga54945116d7d8d0b5c4a408cfdfa3bcbd" kindref="member">jpeg_start_decode</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/>&amp;config,<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a3679b1b6c079709a8e325043af642512" kindref="member">ecs_len</ref>);</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1acbdfe1ecff1e917b393ec8391eb4c6de" kindref="member">hpm_jpeg_interrupt_enable</ref>(ctx);</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"></highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1438"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1af557c0b6eed74f0881e39dd890b07700" kindref="member">hpm_jpeg_encode_config_and_start</ref>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1441"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref><sp/>*cfg<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a0029725cac091b732bff88f7ef1ce89a" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1ac73006109fc7c611b78c6aedd1face7b" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*jpeg_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a70c4c755e9aa0e754139e45cd1febf7f" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structjpeg__job__config__t" kindref="compound">jpeg_job_config_t</ref><sp/>config<sp/>=<sp/>{0};</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"></highlight></codeline>
<codeline lineno="1451"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a163fa55a52bc03ac0319cb193ba5f260" kindref="member">HPM_JPEG_IMAGE_FORMAT_RGB565</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa4b34179da8d7c6a438e39ebc0253278f" kindref="member">jpeg_pixel_format_rgb565</ref>;</highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a78848c5019cbbb719d234efa0523f091" kindref="member">HPM_JPEG_IMAGE_FORMAT_ARGB8888</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa2b8b8fe46c195ec0de4676b482ace5eb" kindref="member">jpeg_pixel_format_argb8888</ref>;</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a02d11c00a430b0745d5ef1b3f02b9f9b" kindref="member">HPM_JPEG_IMAGE_FORMAT_BGRA8888</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa2b8b8fe46c195ec0de4676b482ace5eb" kindref="member">jpeg_pixel_format_argb8888</ref>;</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga37b17a63480d0a94e4681d73cd196b69" kindref="member">JPEG_BYTE_ORDER_0123</ref>;</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713a5c744012b319aebc32c60dc6d47f170a" kindref="member">HPM_JPEG_IMAGE_FORMAT_YUYV422</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa223deffd88dc7a21e8397b0a3638120c" kindref="member">jpeg_pixel_format_yuv422h1p</ref>;</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713af25ed5557a3ca0f7ea08dbc20c640b5c" kindref="member">HPM_JPEG_IMAGE_FORMAT_UYVY422</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa223deffd88dc7a21e8397b0a3638120c" kindref="member">jpeg_pixel_format_yuv422h1p</ref>;</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga1685f528ff4d90d82794250b9cc1af0d" kindref="member">JPEG_BYTE_ORDER_2301</ref>;</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a30e0af64f77ffd7363446338cf49c713ad10d2a7fe497190bf0270d39f14e6680" kindref="member">HPM_JPEG_IMAGE_FORMAT_Y8</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a8b6bb09b12cd563703329f51c402a3f2" kindref="member">in_pixel_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gga81f0371bcd94753ae19bce37847fb65fa3422665554771f1c6451dcfa51549b5a" kindref="member">jpeg_pixel_format_y8</ref>;</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a7b6ac491c5c63314db231dc48aa3430d" kindref="member">in_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Image<sp/>out<sp/>format<sp/>[%u]<sp/>can&apos;t<sp/>be<sp/>supported\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref>);</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"></highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1aee133b41cc4d3053bb711663148bbcfb" kindref="member">enable_ycbcr</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1475"><highlight class="normal"></highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea71cd4ed2b6a30976dc94bf849762dfe5" kindref="member">HPM_JPEG_SAMPLING_FORMAT_420</ref>)</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga7c320594b28e9fe00512436d2df8569b" kindref="member">JPEG_SUPPORTED_FORMAT_420</ref>;</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeaf4c3d1779b4044b80aad48658906a321" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422H</ref>)</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gae24d5a3c44d25e27446897948836ac4f" kindref="member">JPEG_SUPPORTED_FORMAT_422H</ref>;</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea010728d72728307221c3ea8203434b8a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_422V</ref>)</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga22dc2568cb4e390c7a13ad44567b2aab" kindref="member">JPEG_SUPPORTED_FORMAT_422V</ref>;</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaeac7a0b7d48d2e894b7c3cf30c8753f7ad" kindref="member">HPM_JPEG_SAMPLING_FORMAT_444</ref>)</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga0a73b9370eba5d7ca8cfb2c186bad725" kindref="member">JPEG_SUPPORTED_FORMAT_444</ref>;</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1a9de11074fafdd8b485df13a5fd2ebeaea0006d402d119d53e0c3127fc2926138a" kindref="member">HPM_JPEG_SAMPLING_FORMAT_400</ref>)</highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1ae2c9313e989740cd2e72f22d99290b3c" kindref="member">jpeg_format</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1gaa8d1d65837c8d7c0056fd59004cdab6c" kindref="member">JPEG_SUPPORTED_FORMAT_400</ref>;</highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;sampling<sp/>[%u]<sp/>can&apos;t<sp/>be<sp/>supported\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref>);</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1490"><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1acdb8eb20e2eb18e351f1917c372bd174" kindref="member">out_byte_order</ref><sp/>=<sp/><ref refid="group__Jpeg__interface_1ga007f468ce90e1aa93e6c095e49c8fc2f" kindref="member">JPEG_BYTE_ORDER_3210</ref>;</highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a122d30120d6ae1e81401a56b0993a939" kindref="member">width_in_pixel</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a1a60f5008ad2175d8ec2fa33d4aa797a" kindref="member">x</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__encode__job_1aec128b6676cfe520ca9e0423290ba609" kindref="member">x_align</ref>);</highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a87c3f7774262d33898e573d01eff6135" kindref="member">height_in_pixel</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(sof0_info-&gt;<ref refid="structhpm__jpeg__sof0__info_1a087009fb5631d6181accce0973fe5cb2" kindref="member">y</ref>,<sp/>job-&gt;<ref refid="structhpm__jpeg__encode__job_1a6c8d91ad8b2d0beb275dbe7f44f43c3d" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a61d26eac50535a32f4d109ceaaf39597" kindref="member">out_buffer</ref><sp/>=<sp/>(uint32_t)jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a88d73672b68805e577b192c82f2dbca8" kindref="member">ecs</ref>;</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1adfe8d1ce86a7778fd19d0eca3f7cc508" kindref="member">in_buffer</ref><sp/>=<sp/>(uint32_t)image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/>config.<ref refid="structjpeg__job__config__t_1a1dcb53b3337be82b3751fd233715dd2c" kindref="member">stride</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>;</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"></highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga50902f03c37747a8c6f13366921b0fba" kindref="member">jpeg_start_encode</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/>&amp;config);</highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1acbdfe1ecff1e917b393ec8391eb4c6de" kindref="member">hpm_jpeg_interrupt_enable</ref>(ctx);</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"></highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1502"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"></highlight></codeline>
<codeline lineno="1504"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1ac13301c1018964fc75a261176632ac50" kindref="member">hpm_jpeg_decode_init_tabs</ref>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1505"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref><sp/>*core_htab<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1ace4e7425eccfb4f48e839f36a34aec35" kindref="member">core_htab</ref>;</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref><sp/>*core_qtab<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1aaffc379d54b40a0e48a16179e263c92b" kindref="member">core_qtab</ref>;</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"></highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga2877e6ef22225e670632a1ebdd990e16" kindref="member">jpeg_enable</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a34fd7fdadb374a31f035067861cd43ac" kindref="member">jpeg_table_huffmin</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>));</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a71bfe656917a2bee46f8501c06333634" kindref="member">jpeg_table_huffbase</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>));</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a61960a9e7c836c2f95baff963b32b188" kindref="member">jpeg_table_huffsymb</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>));</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a36bc535f88cfa2419673d0cc3dba83a2" kindref="member">jpeg_table_huffenc</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>));</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a8b53695f2d7029f78ce798fe90377c6d" kindref="member">jpeg_table_qmem</ref>,<sp/>(uint8_t<sp/>*)(core_qtab-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_qtab-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>));</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gaaf35df19e281c79ffac0df8d297c9f21" kindref="member">jpeg_disable</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"></highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1521"><highlight class="normal"></highlight></codeline>
<codeline lineno="1522"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a1586712d4b9e3c90bc9bb3c417ca917b" kindref="member">hpm_jpeg_encode_init_tabs</ref>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1523"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ab64c5a3ff8f4fe72ace112440106e292" kindref="member">hpm_jpeg_core_htab_t</ref><sp/>*core_htab<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a809008f6375f0ad1e1fb744fac544076" kindref="member">core_htab</ref>;</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a3afdc95154d174de4dca8b25c662ed83" kindref="member">hpm_jpeg_core_qtab_t</ref><sp/>*core_qtab<sp/>=<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a5522f067a588a6f83c75301bdce59da6" kindref="member">core_qtab</ref>;</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"></highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga2877e6ef22225e670632a1ebdd990e16" kindref="member">jpeg_enable</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a34fd7fdadb374a31f035067861cd43ac" kindref="member">jpeg_table_huffmin</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a533a06eda9e04736703511bff873b066" kindref="member">huffmin</ref>));</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a71bfe656917a2bee46f8501c06333634" kindref="member">jpeg_table_huffbase</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a86acf6b0b676ef4f1ab22f1bdd6354f0" kindref="member">huffbase</ref>));</highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a61960a9e7c836c2f95baff963b32b188" kindref="member">jpeg_table_huffsymb</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a72fdc35334f4132b1f6b53b0e5bbd05b" kindref="member">huffsymb</ref>));</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a36bc535f88cfa2419673d0cc3dba83a2" kindref="member">jpeg_table_huffenc</ref>,<sp/>(uint8_t<sp/>*)(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_htab-&gt;<ref refid="structhpm__jpeg__core__htab_1a95af5ff7296898c854c5c7d9cf957095" kindref="member">huffenc</ref>));</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gae3b3e404e365c5bf4d4ccf28de62d7c3" kindref="member">jpeg_fill_table</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/><ref refid="group__Jpeg__interface_1gga5f6ee13a4bf1e9df59d56d2a315b7a14a8b53695f2d7029f78ce798fe90377c6d" kindref="member">jpeg_table_qmem</ref>,<sp/>(uint8_t<sp/>*)(core_qtab-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>),<sp/><ref refid="group__common__interface_1ga25f003de16c08a4888b69f619d70f427" kindref="member">ARRAY_SIZE</ref>(core_qtab-&gt;<ref refid="structhpm__jpeg__core__qtab_1a9f82cec530a8ab654c24a9fa38e78f05" kindref="member">qmem</ref>));</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1gaaf35df19e281c79ffac0df8d297c9f21" kindref="member">jpeg_disable</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"></highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1538"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1539"><highlight class="normal"></highlight></codeline>
<codeline lineno="1540"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a7152984d67dfa27bffebe0a4fb37596b" kindref="member">hpm_jpeg_start_next_job</ref>(<ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx)</highlight></codeline>
<codeline lineno="1541"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job;</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*djob;</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*ejob;</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*next_job;</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"></highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_job<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a382b709af09267c647207d2f67d9b1aa" kindref="member">jpeg_list_node_get</ref>(&amp;ctx-&gt;<ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>);</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>djob<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ejob<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga31f3752442feb2f832b6f15b78763ed9" kindref="member">jpeg_init</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job<sp/>&amp;&amp;<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>==<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129eaf5778f6c28727e5e4e8b71d0f2aec210" kindref="member">HPM_JPEG_CODEC_DECODE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref>;</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ac13301c1018964fc75a261176632ac50" kindref="member">hpm_jpeg_decode_init_tabs</ref>(djob);</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a370ac81b962b66140571ae740b197231" kindref="member">hpm_jpeg_decode_config_and_start</ref>(djob);</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a96abbe62998f8094c6f4ffcfc48c313b" kindref="member">HPM_JPEG_JOB_STATUS_START_FAILED</ref>;</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>)</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>((<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job);</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>;</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job<sp/>&amp;&amp;<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>==<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" kindref="member">HPM_JPEG_CODEC_ENCODE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref>;</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a1586712d4b9e3c90bc9bb3c417ca917b" kindref="member">hpm_jpeg_encode_init_tabs</ref>(ejob);</highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1af557c0b6eed74f0881e39dd890b07700" kindref="member">hpm_jpeg_encode_config_and_start</ref>(ejob);</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a96abbe62998f8094c6f4ffcfc48c313b" kindref="member">HPM_JPEG_JOB_STATUS_START_FAILED</ref>;</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>)</highlight></codeline>
<codeline lineno="1573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>((<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job);</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>;</highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job)<sp/>{</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1578"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Unknown<sp/>codec<sp/>type</highlight></codeline>
<codeline lineno="1579"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1afe5e4c8bd3907b66dbd28c0c53f59ccc" kindref="member">HPM_JPEG_RET_STATUS_ERR</ref>;</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a96abbe62998f8094c6f4ffcfc48c313b" kindref="member">HPM_JPEG_JOB_STATUS_START_FAILED</ref>;</highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>)</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>((<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job);</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(next_job<sp/>&amp;&amp;<sp/>ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>);</highlight></codeline>
<codeline lineno="1586"><highlight class="normal"></highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>=<sp/>next_job;</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"></highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1591"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1592"><highlight class="normal"></highlight></codeline>
<codeline lineno="1593"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>JPEG_INFO_DUMP()<sp/>\</highlight></codeline>
<codeline lineno="1594"><highlight class="preprocessor">{\</highlight></codeline>
<codeline lineno="1595"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;file_buf-&gt;is_direct:<sp/>0x%x\n&quot;,<sp/>(uint32_t)file_buf-&gt;is_direct);\</highlight></codeline>
<codeline lineno="1596"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;file_buf-&gt;alloced_buf:<sp/>0x%x\n&quot;,<sp/>(uint32_t)file_buf-&gt;alloced_buf);\</highlight></codeline>
<codeline lineno="1597"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;file_buf-&gt;alloced_len:<sp/>%u\n&quot;,<sp/>(uint32_t)file_buf-&gt;alloced_len);\</highlight></codeline>
<codeline lineno="1598"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;file_buf-&gt;aligned_buf:<sp/>0x%x\n&quot;,<sp/>(uint32_t)file_buf-&gt;aligned_buf);\</highlight></codeline>
<codeline lineno="1599"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;file_buf-&gt;aligned_len:<sp/>%u\n&quot;,<sp/>(uint32_t)file_buf-&gt;aligned_len);\</highlight></codeline>
<codeline lineno="1600"><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="1601"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image_buf-&gt;is_direct:<sp/>0x%x\n&quot;,<sp/>(uint32_t)image_buf-&gt;is_direct);\</highlight></codeline>
<codeline lineno="1602"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image_buf-&gt;alloced_buf:<sp/>0x%x\n&quot;,<sp/>(uint32_t)image_buf-&gt;alloced_buf);\</highlight></codeline>
<codeline lineno="1603"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image_buf-&gt;alloced_len:<sp/>%u\n&quot;,<sp/>(uint32_t)image_buf-&gt;alloced_len);\</highlight></codeline>
<codeline lineno="1604"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image_buf-&gt;aligned_buf:<sp/>0x%x\n&quot;,<sp/>(uint32_t)image_buf-&gt;aligned_buf);\</highlight></codeline>
<codeline lineno="1605"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image_buf-&gt;aligned_len:<sp/>%u\n&quot;,<sp/>(uint32_t)image_buf-&gt;aligned_len);\</highlight></codeline>
<codeline lineno="1606"><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="1607"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image-&gt;format:<sp/>%u\n&quot;,<sp/>(uint32_t)image-&gt;format);\</highlight></codeline>
<codeline lineno="1608"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image-&gt;height:<sp/>%u\n&quot;,<sp/>(uint32_t)image-&gt;height);\</highlight></codeline>
<codeline lineno="1609"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image-&gt;width:<sp/>%u\n&quot;,<sp/>(uint32_t)image-&gt;width);\</highlight></codeline>
<codeline lineno="1610"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image-&gt;stride:<sp/>%u\n&quot;,<sp/>(uint32_t)image-&gt;stride);\</highlight></codeline>
<codeline lineno="1611"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;image-&gt;image_buf:<sp/>0x%x\n&quot;,<sp/>(uint32_t)image-&gt;image_buf);\</highlight></codeline>
<codeline lineno="1612"><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="1613"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;soi:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1614"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;soi,\</highlight></codeline>
<codeline lineno="1615"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;soi<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1616"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;soi<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1617"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;app0:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1618"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;app0,\</highlight></codeline>
<codeline lineno="1619"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;app0<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1620"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;app0<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1621"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dqt[0]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1622"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dqt[0],\</highlight></codeline>
<codeline lineno="1623"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[0]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1624"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[0]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1625"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dqt[1]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1626"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dqt[1],\</highlight></codeline>
<codeline lineno="1627"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[1]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1628"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[1]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1629"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dqt[2]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1630"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dqt[2],\</highlight></codeline>
<codeline lineno="1631"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[2]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[2]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1632"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dqt[2]<sp/>?<sp/><sp/>jpeg_info-&gt;dqt[2]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1633"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;sof0:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1634"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;sof0,\</highlight></codeline>
<codeline lineno="1635"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;sof0<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1636"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;sof0<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1637"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dht_dc[0]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1638"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dht_dc[0],\</highlight></codeline>
<codeline lineno="1639"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_dc[0]<sp/>?<sp/>jpeg_info-&gt;dht_dc[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1640"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_dc[0]<sp/>?<sp/>jpeg_info-&gt;dht_dc[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1641"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dht_ac[0]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1642"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dht_ac[0],\</highlight></codeline>
<codeline lineno="1643"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_ac[0]<sp/>?<sp/>jpeg_info-&gt;dht_ac[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1644"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_ac[0]<sp/>?<sp/>jpeg_info-&gt;dht_ac[0]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1645"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dht_dc[1]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1646"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dht_dc[1],\</highlight></codeline>
<codeline lineno="1647"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_dc[1]<sp/>?<sp/>jpeg_info-&gt;dht_dc[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1648"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_dc[1]<sp/>?<sp/>jpeg_info-&gt;dht_dc[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1649"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;dht_ac[1]:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1650"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;dht_ac[1],\</highlight></codeline>
<codeline lineno="1651"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_ac[1]<sp/>?<sp/>jpeg_info-&gt;dht_ac[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0),\</highlight></codeline>
<codeline lineno="1652"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;dht_ac[1]<sp/>?<sp/>jpeg_info-&gt;dht_ac[1]<sp/>-<sp/>jpeg_info-&gt;soi<sp/>:<sp/>0));\</highlight></codeline>
<codeline lineno="1653"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;sos:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1654"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;sos,\</highlight></codeline>
<codeline lineno="1655"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;sos<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1656"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;sos<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1657"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;ecs:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1658"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;ecs,\</highlight></codeline>
<codeline lineno="1659"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;ecs<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1660"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;ecs<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1661"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;ecs_len:<sp/>%u\n&quot;,<sp/>(uint32_t)jpeg_info-&gt;ecs_len);\</highlight></codeline>
<codeline lineno="1662"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;jpeg_info-&gt;eoi:<sp/>0x%x,<sp/>offset:<sp/>%u[0x%x]\n&quot;,\</highlight></codeline>
<codeline lineno="1663"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)jpeg_info-&gt;eoi,\</highlight></codeline>
<codeline lineno="1664"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;eoi<sp/>-<sp/>jpeg_info-&gt;soi),\</highlight></codeline>
<codeline lineno="1665"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)(jpeg_info-&gt;eoi<sp/>-<sp/>jpeg_info-&gt;soi));\</highlight></codeline>
<codeline lineno="1666"><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="1667"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>x:<sp/>%u\n&quot;,<sp/>sof0_info-&gt;x);\</highlight></codeline>
<codeline lineno="1668"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>y:<sp/>%u\n&quot;,<sp/>sof0_info-&gt;y);\</highlight></codeline>
<codeline lineno="1669"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>nf:<sp/>%u\n&quot;,<sp/>sof0_info-&gt;nf);\</highlight></codeline>
<codeline lineno="1670"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>for<sp/>(uint32_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>sof0_info-&gt;nf;<sp/>i++)<sp/>{\</highlight></codeline>
<codeline lineno="1671"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>component[%u].c:<sp/>%u\n&quot;,<sp/>i,<sp/>sof0_info-&gt;component[i].c);\</highlight></codeline>
<codeline lineno="1672"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>component[%u].h:<sp/>%u\n&quot;,<sp/>i,<sp/>sof0_info-&gt;component[i].h);\</highlight></codeline>
<codeline lineno="1673"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>component[%u].v:<sp/>%u\n&quot;,<sp/>i,<sp/>sof0_info-&gt;component[i].v);\</highlight></codeline>
<codeline lineno="1674"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sof0<sp/>component[%u].tq:<sp/>%u\n&quot;,<sp/>i,<sp/>sof0_info-&gt;component[i].tq);\</highlight></codeline>
<codeline lineno="1675"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="1676"><highlight class="preprocessor">\</highlight></codeline>
<codeline lineno="1677"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sos<sp/>ns:<sp/>%u\n&quot;,<sp/>sos_info-&gt;ns);\</highlight></codeline>
<codeline lineno="1678"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>for<sp/>(uint32_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>sos_info-&gt;ns;<sp/>i++)<sp/>{\</highlight></codeline>
<codeline lineno="1679"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sos<sp/>component[%u].cs:<sp/>%u\n&quot;,<sp/>i,<sp/>sos_info-&gt;component[i].cs);\</highlight></codeline>
<codeline lineno="1680"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sos<sp/>component[%u].ta:<sp/>%u\n&quot;,<sp/>i,<sp/>sos_info-&gt;component[i].ta);\</highlight></codeline>
<codeline lineno="1681"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HPM_JPEG_DLOG(&quot;sos<sp/>component[%u].td:<sp/>%u\n&quot;,<sp/>i,<sp/>sos_info-&gt;component[i].td);\</highlight></codeline>
<codeline lineno="1682"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/>\</highlight></codeline>
<codeline lineno="1683"><highlight class="preprocessor">}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1684"><highlight class="normal"></highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*<ref refid="hpm__jpeg_8c_1a0843845165be9c19f1f32adc18d9b361" kindref="member">hpm_jpeg_decode_job_alloc</ref>(<ref refid="hpm__jpeg_8h_1afe8913c260b533f03381b9200c43b6d9" kindref="member">hpm_jpeg_decode_cfg_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="1686"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job;</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*job;</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"></highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref>));</highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!base_job)<sp/>{</highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc(%u)<sp/>failed\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref>));</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1695"><highlight class="normal"></highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(base_job,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref>));</highlight></codeline>
<codeline lineno="1697"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a2d2ad3b33af487c242b26d4710213792" kindref="member">jpeg_list_node_init</ref>(&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="1698"><highlight class="normal"></highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/>job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)base_job;</highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(&amp;job-&gt;<ref refid="structhpm__jpeg__decode__job_1a0a443440319cd84199463a2640e4c780" kindref="member">cfg</ref>,<sp/>cfg,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8h_1afe8913c260b533f03381b9200c43b6d9" kindref="member">hpm_jpeg_decode_cfg_t</ref>));</highlight></codeline>
<codeline lineno="1701"><highlight class="normal"></highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129eaf5778f6c28727e5e4e8b71d0f2aec210" kindref="member">HPM_JPEG_CODEC_DECODE</ref>;</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref><sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"></highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job;</highlight></codeline>
<codeline lineno="1706"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1afc042d61b8b7c53f4aaae00ece47fcfb" kindref="member">hpm_jpeg_decode_job_fill_file</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a497c1f9287dbaca17b7f13e7891a15d3" kindref="member">hpm_jpeg_file_t</ref><sp/>*file,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>direct)</highlight></codeline>
<codeline lineno="1709"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1aa8ac6c05199d33187f176546612ad544" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*alloced_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1718"><highlight class="normal"></highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file<sp/>||<sp/>!file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref><sp/>||<sp/>!file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;parameter<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"></highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref><sp/>||</highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref><sp/>||</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref><sp/>||</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;job<sp/>is<sp/>busying\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1afe5e4c8bd3907b66dbd28c0c53f59ccc" kindref="member">HPM_JPEG_RET_STATUS_ERR</ref>;</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"></highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref>;</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"></highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"></highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!direct)<sp/>{</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>aligned_len<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alloced_len<sp/>=<sp/>aligned_len<sp/>+<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alloced_buf<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(alloced_len);</highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!alloced_buf)<sp/>{</highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc(%u)<sp/>failed\n&quot;</highlight><highlight class="normal">,<sp/>(uint32_t)alloced_len);</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1a8066c3ea75a283792dc555f2abe0e55d" kindref="member">HPM_JPEG_RET_MALLOC_ERR</ref>;</highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1751"><highlight class="normal"></highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>alloced_buf;</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>((uint32_t)alloced_buf,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"></highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref>,<sp/>file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>);</highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1af83f4cfc02bdc77d781b359d6bfc5f6d" kindref="member">hpm_jpeg_cache_writeback</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>);</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1aa922ef4ee717eff509e92f12d296f65e" kindref="member">jpeg_buf</ref>;</highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"></highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>file-&gt;<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="1766"><highlight class="normal"></highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96afa0d494f5279e48cffacedadf6ab1070" kindref="member">HPM_JPEG_JOB_STATUS_FILLED</ref>;</highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"></highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"></highlight></codeline>
<codeline lineno="1773"><highlight class="normal">ERROR1:</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a160151db0e97dc9b28f5b2655a74d7b2" kindref="member">HPM_JPEG_JOB_STATUS_FILL_FAILED</ref>;</highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"></highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1779"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"></highlight></codeline>
<codeline lineno="1781"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a1486d7b943ceb3c30d8f6708bc12a8aa" kindref="member">hpm_jpeg_decode_job_force_direct_image_buf</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*buf,<sp/>uint32_t<sp/>len)</highlight></codeline>
<codeline lineno="1782"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"></highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!buf<sp/>||<sp/>!len)<sp/>{</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;parameter<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"></highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>len;</highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>buf;</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>len;</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1798"><highlight class="normal"></highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1800"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"></highlight></codeline>
<codeline lineno="1802"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a73b80d4eaa4b6ecd80f5b89fb2bfb095" kindref="member">hpm_jpeg_decode_job_start</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/><ref refid="hpm__jpeg_8h_1a449bfc8615bb44afab138bc380043301" kindref="member">hpm_jpeg_job_state_cb_t</ref><sp/>cb)</highlight></codeline>
<codeline lineno="1803"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1aa8ac6c05199d33187f176546612ad544" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1afbb7cf4eae02fd1796d0d370bf1f337f" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*jpeg_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1a284e4df28b319f6f53d0d4a633b66a83" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1a3750a2a63f17793cac647be7371990fe" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*sos_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1a20ffeacbadde2eda4df7f670b2b524ee" kindref="member">sos_info</ref>;</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1815"><highlight class="normal"></highlight></codeline>
<codeline lineno="1816"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref><sp/>||</highlight></codeline>
<codeline lineno="1817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref><sp/>||</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref><sp/>||</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;job<sp/>is<sp/>busying\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1afe5e4c8bd3907b66dbd28c0c53f59ccc" kindref="member">HPM_JPEG_RET_STATUS_ERR</ref>;</highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"></highlight></codeline>
<codeline lineno="1824"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1825"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref>;</highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1827"><highlight class="normal"></highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref><sp/>=<sp/>cb;</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"></highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a18212764ba2d5bafcfd73bffa2d67d89" kindref="member">hpm_jpeg_get_jpeg_info_from_file</ref>(jpeg_info,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref>);</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"></highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a831720ff74acfc2cc4f612d3f5929118" kindref="member">hpm_jpeg_get_sof0_info_from_buf</ref>(jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a920176c9a3bcc833180066a1ac1b1429" kindref="member">sof0</ref>,<sp/>sof0_info);</highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"></highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ac87967e3bca3b46e0f2b1926657c598f" kindref="member">hpm_jpeg_get_sos_info_from_buf</ref>(jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1aa0dc681730064f0ab0c316187f27230b" kindref="member">sos</ref>,<sp/>sos_info);</highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"></highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a382b75d648cc5cd667fbee63f38768be" kindref="member">hpm_jpeg_get_sampling_format_from_sof0_info</ref>(sof0_info,<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref>);</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1845"><highlight class="normal"></highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1aa1d5574d7706ee0bdf85e93624b6b3a1" kindref="member">hpm_jpeg_get_align_pixel</ref>(_job-&gt;<ref refid="structhpm__jpeg__decode__job_1abdb1d5de0c8bacbcb90b0a56c882bb4a" kindref="member">sampling</ref>,<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1a12fe82361198b54148000366c7ec5bf2" kindref="member">x_align</ref>,<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1acd1a2d17f00385408ee4fbcfa396b7e0" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"></highlight></codeline>
<codeline lineno="1850"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a35dfe446431b1063b135d8919276d25d" kindref="member">hpm_jpeg_create_qtab_for_core</ref>(&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1aaffc379d54b40a0e48a16179e263c92b" kindref="member">core_qtab</ref>,<sp/>0,<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>);</highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"></highlight></codeline>
<codeline lineno="1854"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a75a283e51949683300d51e90cb2b0ab5" kindref="member">hpm_jpeg_create_htab_for_core</ref>(&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1ace4e7425eccfb4f48e839f36a34aec35" kindref="member">core_htab</ref>,<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[0],</highlight></codeline>
<codeline lineno="1855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[1],<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[0],</highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[1]);</highlight></codeline>
<codeline lineno="1857"><highlight class="normal"></highlight></codeline>
<codeline lineno="1858"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="1860"><highlight class="normal"></highlight></codeline>
<codeline lineno="1861"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a45ec5e3154016d7961d6f9badd5214dc" kindref="member">hpm_jpeg_decode_image_buf_init</ref>(_job);</highlight></codeline>
<codeline lineno="1862"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="1863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="1864"><highlight class="normal"></highlight></codeline>
<codeline lineno="1865"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a9addf5a0e792abfcaa21708aa670332c" kindref="member">JPEG_INFO_DUMP</ref>();</highlight></codeline>
<codeline lineno="1866"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)image;</highlight></codeline>
<codeline lineno="1867"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)image_buf;</highlight></codeline>
<codeline lineno="1868"><highlight class="normal"></highlight></codeline>
<codeline lineno="1869"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>=<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>;</highlight></codeline>
<codeline lineno="1872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga31f3752442feb2f832b6f15b78763ed9" kindref="member">jpeg_init</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="1873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ac13301c1018964fc75a261176632ac50" kindref="member">hpm_jpeg_decode_init_tabs</ref>(job);</highlight></codeline>
<codeline lineno="1874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a370ac81b962b66140571ae740b197231" kindref="member">hpm_jpeg_decode_config_and_start</ref>(_job);</highlight></codeline>
<codeline lineno="1875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="1878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1879"><highlight class="normal"></highlight></codeline>
<codeline lineno="1880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>;</highlight></codeline>
<codeline lineno="1881"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add0fb006d7a62ff3fb1bedf08d7d4d0f" kindref="member">jpeg_list_add_tail</ref>(&amp;ctx-&gt;<ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>,<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="1883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref>;</highlight></codeline>
<codeline lineno="1884"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1885"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1886"><highlight class="normal"></highlight></codeline>
<codeline lineno="1887"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1888"><highlight class="normal"></highlight></codeline>
<codeline lineno="1889"><highlight class="normal">ERROR2:</highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1ad2cd5153994a82aca83d70fc700678be" kindref="member">hpm_jpeg_decode_image_buf_deinit</ref>(_job);</highlight></codeline>
<codeline lineno="1891"><highlight class="normal">ERROR1:</highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a96abbe62998f8094c6f4ffcfc48c313b" kindref="member">HPM_JPEG_JOB_STATUS_START_FAILED</ref>;</highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1895"><highlight class="normal"></highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1897"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1898"><highlight class="normal"></highlight></codeline>
<codeline lineno="1899"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a8ea786b9f9dce82fd6bbba7e997ba1b7" kindref="member">hpm_jpeg_decode_job_stop</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1900"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1901"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="1903"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1904"><highlight class="normal"></highlight></codeline>
<codeline lineno="1905"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>==<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a7152984d67dfa27bffebe0a4fb37596b" kindref="member">hpm_jpeg_start_next_job</ref>(ctx);</highlight></codeline>
<codeline lineno="1908"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a6ff2f9e8c06aaa86dd2d118f3b3f65ff" kindref="member">jpeg_list_del</ref>(&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="1910"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1911"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a491d1ab0c652a83d4064ab6ae9a3194a" kindref="member">HPM_JPEG_JOB_STATUS_STOPPED</ref>;</highlight></codeline>
<codeline lineno="1912"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="1913"><highlight class="normal"></highlight></codeline>
<codeline lineno="1914"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1915"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1916"><highlight class="normal"></highlight></codeline>
<codeline lineno="1917"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a35b1610d4c623e8e579c196507a1007f" kindref="member">hpm_jpeg_decode_job_get_info</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/><ref refid="hpm__jpeg_8h_1a32e4c27f3a3d9d48fae1f1cc6164feaf" kindref="member">hpm_jpeg_decode_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="1918"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1921"><highlight class="normal"></highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__decode__info_1abe7f61b7d56d12ca159ac4186dc877c6" kindref="member">hw_status</ref><sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1af54263f4e80dcfaddaffe820fcb71cd4" kindref="member">hw_status</ref>;</highlight></codeline>
<codeline lineno="1923"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__decode__info_1ac4aa02dec10fa896604899f8c9c63646" kindref="member">status</ref><sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref>;</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__decode__info_1a824815c3b4c4ee5d266da16cf43ab2ea" kindref="member">image</ref><sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1afbb7cf4eae02fd1796d0d370bf1f337f" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1925"><highlight class="normal"></highlight></codeline>
<codeline lineno="1926"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1927"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"></highlight></codeline>
<codeline lineno="1929"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a6fea9f315e8e7678030e4adf1fcb8327" kindref="member">hpm_jpeg_decode_job_free</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="1930"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1932"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1aa8ac6c05199d33187f176546612ad544" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1934"><highlight class="normal"></highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8ea786b9f9dce82fd6bbba7e997ba1b7" kindref="member">hpm_jpeg_decode_job_stop</ref>(job);</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"></highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1939"><highlight class="normal"></highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="1942"><highlight class="normal"></highlight></codeline>
<codeline lineno="1943"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(job);</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"></highlight></codeline>
<codeline lineno="1945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1946"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"></highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*<ref refid="hpm__jpeg_8c_1a1a7bcd85acb1b80910add26e789dba94" kindref="member">hpm_jpeg_encode_job_alloc</ref>(<ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="1949"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1950"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job;</highlight></codeline>
<codeline lineno="1951"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*job;</highlight></codeline>
<codeline lineno="1952"><highlight class="normal"></highlight></codeline>
<codeline lineno="1953"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref>));</highlight></codeline>
<codeline lineno="1954"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!base_job)<sp/>{</highlight></codeline>
<codeline lineno="1955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc<sp/>failed\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1957"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1958"><highlight class="normal"></highlight></codeline>
<codeline lineno="1959"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(base_job,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref>));</highlight></codeline>
<codeline lineno="1960"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a2d2ad3b33af487c242b26d4710213792" kindref="member">jpeg_list_node_init</ref>(&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="1961"><highlight class="normal"></highlight></codeline>
<codeline lineno="1962"><highlight class="normal"><sp/><sp/><sp/><sp/>job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)base_job;</highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/>memcpy(&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a0029725cac091b732bff88f7ef1ce89a" kindref="member">cfg</ref>,<sp/>cfg,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref>));</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"></highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" kindref="member">HPM_JPEG_CODEC_ENCODE</ref>;</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref><sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"></highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aa1d5574d7706ee0bdf85e93624b6b3a1" kindref="member">hpm_jpeg_get_align_pixel</ref>(cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref>,<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1aec128b6676cfe520ca9e0423290ba609" kindref="member">x_align</ref>,<sp/>&amp;job-&gt;<ref refid="structhpm__jpeg__encode__job_1a6c8d91ad8b2d0beb275dbe7f44f43c3d" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="1969"><highlight class="normal"></highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job;</highlight></codeline>
<codeline lineno="1971"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1972"><highlight class="normal"></highlight></codeline>
<codeline lineno="1973"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a5d25f2af1f8b1a1b093e65439e5e1f15" kindref="member">hpm_jpeg_encode_job_fill_image</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>direct)</highlight></codeline>
<codeline lineno="1974"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1975"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1976"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="1977"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="1978"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*job_image<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ac73006109fc7c611b78c6aedd1face7b" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="1979"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>src_stride;</highlight></codeline>
<codeline lineno="1980"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_stride;</highlight></codeline>
<codeline lineno="1981"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>image_stride;</highlight></codeline>
<codeline lineno="1982"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_width;</highlight></codeline>
<codeline lineno="1983"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_height;</highlight></codeline>
<codeline lineno="1984"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pixel_size;</highlight></codeline>
<codeline lineno="1985"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*alloced_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1986"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>alloced_len;</highlight></codeline>
<codeline lineno="1987"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>aligned_len;</highlight></codeline>
<codeline lineno="1988"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="1990"><highlight class="normal"></highlight></codeline>
<codeline lineno="1991"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!image)<sp/>{</highlight></codeline>
<codeline lineno="1992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;parameter<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="1994"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1995"><highlight class="normal"></highlight></codeline>
<codeline lineno="1996"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref><sp/>||</highlight></codeline>
<codeline lineno="1997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref><sp/>||</highlight></codeline>
<codeline lineno="1998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref><sp/>||</highlight></codeline>
<codeline lineno="1999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;job<sp/>is<sp/>busying\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1afe5e4c8bd3907b66dbd28c0c53f59ccc" kindref="member">HPM_JPEG_RET_STATUS_ERR</ref>;</highlight></codeline>
<codeline lineno="2002"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2003"><highlight class="normal"></highlight></codeline>
<codeline lineno="2004"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2005"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref>;</highlight></codeline>
<codeline lineno="2006"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2007"><highlight class="normal"></highlight></codeline>
<codeline lineno="2008"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_width<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref>,<sp/>_job-&gt;<ref refid="structhpm__jpeg__encode__job_1aec128b6676cfe520ca9e0423290ba609" kindref="member">x_align</ref>);</highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_height<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>,<sp/>_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a6c8d91ad8b2d0beb275dbe7f44f43c3d" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"><sp/><sp/><sp/><sp/>pixel_size<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a985250cb3ede902c6679d80a18280e7f" kindref="member">hpm_jpeg_get_pixel_size</ref>(image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref>);</highlight></codeline>
<codeline lineno="2011"><highlight class="normal"><sp/><sp/><sp/><sp/>src_stride<sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref><sp/>*<sp/>pixel_size;</highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/><sp/>aligned_stride<sp/>=<sp/>aligned_width<sp/>*<sp/>pixel_size;</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"></highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(direct<sp/>&amp;&amp;<sp/>(aligned_width<sp/>!=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref><sp/>||<sp/>aligned_height<sp/>!=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>))<sp/>{</highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Width<sp/>must<sp/>align<sp/>to<sp/>%u<sp/>pixels<sp/>if<sp/>direct<sp/>Mode<sp/>is<sp/>used!!!\n&quot;</highlight><highlight class="normal">,<sp/>_job-&gt;<ref refid="structhpm__jpeg__encode__job_1aec128b6676cfe520ca9e0423290ba609" kindref="member">x_align</ref>);</highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Height<sp/>must<sp/>align<sp/>to<sp/>%u<sp/>pixels<sp/>if<sp/>direct<sp/>Mode<sp/>is<sp/>used!!!\n&quot;</highlight><highlight class="normal">,<sp/>_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a6c8d91ad8b2d0beb275dbe7f44f43c3d" kindref="member">y_align</ref>);</highlight></codeline>
<codeline lineno="2017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="2018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2019"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2020"><highlight class="normal"></highlight></codeline>
<codeline lineno="2021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(direct<sp/>&amp;&amp;<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>&lt;<sp/>aligned_stride)<sp/>{</highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Stride<sp/>is<sp/>too<sp/>small,<sp/>at<sp/>least<sp/>%u<sp/>are<sp/>needed\n&quot;</highlight><highlight class="normal">,<sp/>aligned_stride);</highlight></codeline>
<codeline lineno="2023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="2024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2025"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2026"><highlight class="normal"></highlight></codeline>
<codeline lineno="2027"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>&lt;<sp/>src_stride)<sp/>{</highlight></codeline>
<codeline lineno="2028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;Stride<sp/>is<sp/>too<sp/>small,<sp/>at<sp/>least<sp/>%u<sp/>are<sp/>needed\n&quot;</highlight><highlight class="normal">,<sp/>src_stride);</highlight></codeline>
<codeline lineno="2029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="2030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2031"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2032"><highlight class="normal"></highlight></codeline>
<codeline lineno="2033"><highlight class="normal"><sp/><sp/><sp/><sp/>src_stride<sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>?<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>:<sp/>src_stride;</highlight></codeline>
<codeline lineno="2034"><highlight class="normal"><sp/><sp/><sp/><sp/>image_stride<sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>?<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>:<sp/>aligned_stride;</highlight></codeline>
<codeline lineno="2035"><highlight class="normal"><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1a077708327120f5b0cb434f30001f8f5b" kindref="member">format</ref>;</highlight></codeline>
<codeline lineno="2036"><highlight class="normal"><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>;</highlight></codeline>
<codeline lineno="2037"><highlight class="normal"><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref>;</highlight></codeline>
<codeline lineno="2038"><highlight class="normal"></highlight></codeline>
<codeline lineno="2039"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(direct)<sp/>{</highlight></codeline>
<codeline lineno="2040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>image_stride<sp/>*<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>;</highlight></codeline>
<codeline lineno="2041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="2043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2044"><highlight class="normal"></highlight></codeline>
<codeline lineno="2045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref><sp/>=<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>=<sp/>image_stride;</highlight></codeline>
<codeline lineno="2047"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>aligned_len<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>(image_stride<sp/>*<sp/>aligned_height,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alloced_len<sp/>=<sp/>aligned_len<sp/>+<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref><sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"></highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"></highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alloced_buf<sp/>=<sp/><ref refid="hpm__jpeg_8c_1ad220aeab43a86c25364ba29e5052f754" kindref="member">hpm_jpeg_malloc</ref>(alloced_len);</highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!alloced_buf)<sp/>{</highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;malloc<sp/>failed\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><sp/><ref refid="hpm__jpeg_8h_1a8066c3ea75a283792dc555f2abe0e55d" kindref="member">HPM_JPEG_RET_MALLOC_ERR</ref>;</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2063"><highlight class="normal"></highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>image_stride<sp/>*<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>;</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref><sp/>=<sp/>alloced_len;</highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref><sp/>=<sp/>alloced_buf;</highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<ref refid="hpm__jpeg_8c_1a0062f81036994d52f0296486c1dcd504" kindref="member">HPM_JPEG_ROUNDUP</ref>((uint32_t)alloced_buf,<sp/><ref refid="hpm__jpeg_8c_1aa65ec11e874a1eca23815b730429d966" kindref="member">HPM_JPEG_CACHE_LINE</ref>);</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>aligned_len;</highlight></codeline>
<codeline lineno="2069"><highlight class="normal"></highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref><sp/>=<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>;</highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>=<sp/>image_stride;</highlight></codeline>
<codeline lineno="2072"><highlight class="normal"></highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*src8<sp/>=<sp/>(uint8_t<sp/>*)image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*dst8<sp/>=<sp/>(uint8_t<sp/>*)job_image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>h;</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(h<sp/>=<sp/>0;<sp/>h<sp/>&lt;<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>;<sp/>h++)<sp/>{</highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(dst8,<sp/>src8,<sp/>src_stride);</highlight></codeline>
<codeline lineno="2078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src8<sp/>+=<sp/>src_stride;</highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dst8<sp/>+=<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>;</highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"></highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2083"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>fill<sp/>pixel<sp/>to<sp/>jpeg<sp/>block<sp/>align</highlight></codeline>
<codeline lineno="2084"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(;<sp/>h<sp/>&lt;<sp/>aligned_height;<sp/>h++)<sp/>{</highlight></codeline>
<codeline lineno="2086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(dst8,<sp/>0x00,<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>);</highlight></codeline>
<codeline lineno="2087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dst8<sp/>+=<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>;</highlight></codeline>
<codeline lineno="2088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2089"><highlight class="normal"></highlight></codeline>
<codeline lineno="2090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_stride<sp/>!=<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>diff<sp/>=<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref><sp/>-<sp/>image_stride;</highlight></codeline>
<codeline lineno="2092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dst8<sp/>=<sp/>(uint8_t<sp/>*)job_image-&gt;<ref refid="structhpm__jpeg__image_1aa93faebb5850ff20c8b45fdfbf54e70d" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dst8<sp/>+=<sp/>image_stride;</highlight></codeline>
<codeline lineno="2094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(h<sp/>=<sp/>0;<sp/>h<sp/>&lt;<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>;<sp/>h++)<sp/>{</highlight></codeline>
<codeline lineno="2095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(dst8,<sp/>0x00,<sp/>diff);</highlight></codeline>
<codeline lineno="2096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dst8<sp/>+=<sp/>job_image-&gt;<ref refid="structhpm__jpeg__image_1a4d678661daa70a3ca3292239f139efb0" kindref="member">stride</ref>;</highlight></codeline>
<codeline lineno="2097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1af83f4cfc02bdc77d781b359d6bfc5f6d" kindref="member">hpm_jpeg_cache_writeback</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>);</highlight></codeline>
<codeline lineno="2100"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2101"><highlight class="normal"></highlight></codeline>
<codeline lineno="2102"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2103"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96afa0d494f5279e48cffacedadf6ab1070" kindref="member">HPM_JPEG_JOB_STATUS_FILLED</ref>;</highlight></codeline>
<codeline lineno="2104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2105"><highlight class="normal"></highlight></codeline>
<codeline lineno="2106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="2107"><highlight class="normal"></highlight></codeline>
<codeline lineno="2108"><highlight class="normal">ERROR1:</highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a160151db0e97dc9b28f5b2655a74d7b2" kindref="member">HPM_JPEG_JOB_STATUS_FILL_FAILED</ref>;</highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"></highlight></codeline>
<codeline lineno="2113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="2114"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2115"><highlight class="normal"></highlight></codeline>
<codeline lineno="2116"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a0a215809c6d5ee36da23945a4b9b4857" kindref="member">hpm_jpeg_encode_job_force_direct_file_buf</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*file_buf,<sp/>uint32_t<sp/>len)</highlight></codeline>
<codeline lineno="2117"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2118"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*_file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"></highlight></codeline>
<codeline lineno="2122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file_buf<sp/>||<sp/>!len)<sp/>{</highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;parameter<sp/>error\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"></highlight></codeline>
<codeline lineno="2127"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/>_file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a22cc35b2e8e15831e5375ed995ed2f91" kindref="member">is_direct</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2129"><highlight class="normal"><sp/><sp/><sp/><sp/>_file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a261eecb704819d88022a46c24df3b2d7" kindref="member">len</ref><sp/>=<sp/>len;</highlight></codeline>
<codeline lineno="2130"><highlight class="normal"><sp/><sp/><sp/><sp/>_file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref><sp/>=<sp/>file_buf;</highlight></codeline>
<codeline lineno="2131"><highlight class="normal"><sp/><sp/><sp/><sp/>_file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref><sp/>=<sp/>len;</highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"></highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2135"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2136"><highlight class="normal"></highlight></codeline>
<codeline lineno="2137"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1aadef0d233f1d42a7298a4609fca228ea" kindref="member">hpm_jpeg_encode_job_start</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/><ref refid="hpm__jpeg_8h_1a449bfc8615bb44afab138bc380043301" kindref="member">hpm_jpeg_job_state_cb_t</ref><sp/>cb)</highlight></codeline>
<codeline lineno="2138"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2139"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2141"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a90ee0d815ef841173b0c2fc99eebfa0a" kindref="member">hpm_jpeg_encode_cfg_t</ref><sp/>*cfg<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a0029725cac091b732bff88f7ef1ce89a" kindref="member">cfg</ref>;</highlight></codeline>
<codeline lineno="2142"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="2143"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="2144"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2145"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a2c423a17f7edaa994c5607831a132c71" kindref="member">hpm_jpeg_image_t</ref><sp/>*image<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ac73006109fc7c611b78c6aedd1face7b" kindref="member">image</ref>;</highlight></codeline>
<codeline lineno="2146"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1afcb30f396a4270323f2e6f3eb27d0029" kindref="member">hpm_jpeg_std_tab_t</ref><sp/>*std_tab<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a1332ae76669c58158f5f23d9b7b087a2" kindref="member">std_tab</ref>;</highlight></codeline>
<codeline lineno="2147"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add652305e0600172d63536c2f27483a4" kindref="member">hpm_jpeg_jpeg_info_t</ref><sp/>*jpeg_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>;</highlight></codeline>
<codeline lineno="2148"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8dbb4c3a8fbe5db582a8c60f0da8823f" kindref="member">hpm_jpeg_sof0_info_t</ref><sp/>*sof0_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a70c4c755e9aa0e754139e45cd1febf7f" kindref="member">sof0_info</ref>;</highlight></codeline>
<codeline lineno="2149"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a53656c908ab0b60ffe7ca91e38704322" kindref="member">hpm_jpeg_sos_info_t</ref><sp/>*sos_info<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a53ed23ffee40702e2743852de4f95bbc" kindref="member">sos_info</ref>;</highlight></codeline>
<codeline lineno="2150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2151"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="2152"><highlight class="normal"></highlight></codeline>
<codeline lineno="2153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a5ee84484b993b1a1380ddef461f6475c" kindref="member">HPM_JPEG_JOB_STATUS_FILLING</ref><sp/>||</highlight></codeline>
<codeline lineno="2154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref><sp/>||</highlight></codeline>
<codeline lineno="2155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref><sp/>||</highlight></codeline>
<codeline lineno="2156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>==<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;job<sp/>is<sp/>busying\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1afe5e4c8bd3907b66dbd28c0c53f59ccc" kindref="member">HPM_JPEG_RET_STATUS_ERR</ref>;</highlight></codeline>
<codeline lineno="2159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2160"><highlight class="normal"></highlight></codeline>
<codeline lineno="2161"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2162"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a9c05bea7791a6027f42a6edf0c4d4750" kindref="member">HPM_JPEG_JOB_STATUS_STARTING</ref>;</highlight></codeline>
<codeline lineno="2163"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2164"><highlight class="normal"></highlight></codeline>
<codeline lineno="2165"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref><sp/>=<sp/>cb;</highlight></codeline>
<codeline lineno="2166"><highlight class="normal"></highlight></codeline>
<codeline lineno="2167"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1afbaf9ddd49f017d1d516a283a9f5ff3d" kindref="member">hpm_jpeg_init_sof0_info</ref>(sof0_info,<sp/>cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref>,<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad0490b24ef5dcbb3a5e222a9f12aeed3" kindref="member">width</ref>,<sp/>image-&gt;<ref refid="structhpm__jpeg__image_1ad003ae32e5eebffe62a0e4c39d1a5548" kindref="member">height</ref>);</highlight></codeline>
<codeline lineno="2168"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2170"><highlight class="normal"></highlight></codeline>
<codeline lineno="2171"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1aa883dd00e119b98ecbb9624ccad70c62" kindref="member">hpm_jpeg_init_sos_info</ref>(sos_info,<sp/>cfg-&gt;<ref refid="structhpm__jpeg__encode__cfg_1a7c25af7b9284fe675f2fca2babd61f79" kindref="member">jpeg_sampling</ref>);</highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR1;</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"></highlight></codeline>
<codeline lineno="2175"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a9475c7ddb9db94ae7ad42f42c9fc1019" kindref="member">hpm_jpeg_encode_file_buf_init</ref>(_job);</highlight></codeline>
<codeline lineno="2176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="2178"><highlight class="normal"></highlight></codeline>
<codeline lineno="2179"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a133cc1d3d7bb55cb6cbf03a7cc958e6d" kindref="member">app0</ref><sp/>=<sp/><ref refid="hpm__jpeg_8c_1a4e56ff9dba9d3bb7eb4c9f54614ef715" kindref="member">std_app0</ref>;</highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a3e0dfa4cd8cd90e551ffb4adddb98196" kindref="member">app0_len</ref><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a4e56ff9dba9d3bb7eb4c9f54614ef715" kindref="member">std_app0</ref>);</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a5d50611a981b9ee8350b25659d9fb1ee" kindref="member">dht_ac</ref>[0]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1aa14a4df26e39ce2ffb78932edc94af1e" kindref="member">jpeg_std_htab_ac0</ref>;</highlight></codeline>
<codeline lineno="2182"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[0]<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1aa14a4df26e39ce2ffb78932edc94af1e" kindref="member">jpeg_std_htab_ac0</ref>);</highlight></codeline>
<codeline lineno="2183"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a5d50611a981b9ee8350b25659d9fb1ee" kindref="member">dht_ac</ref>[1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a5505b6e481418cbd352b76e74bfae2f4" kindref="member">jpeg_std_htab_ac1</ref>;</highlight></codeline>
<codeline lineno="2184"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1aee98eae8e8f93338dd6aa3d7df7bffa7" kindref="member">dht_ac_len</ref>[1]<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a5505b6e481418cbd352b76e74bfae2f4" kindref="member">jpeg_std_htab_ac1</ref>);</highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1abb707678f15bd455fc805cf7d7624b9a" kindref="member">dht_dc</ref>[0]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0dedcffc5574889b0336aa5f77d03b32" kindref="member">jpeg_std_htab_dc0</ref>;</highlight></codeline>
<codeline lineno="2186"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[0]<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a0dedcffc5574889b0336aa5f77d03b32" kindref="member">jpeg_std_htab_dc0</ref>);</highlight></codeline>
<codeline lineno="2187"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1abb707678f15bd455fc805cf7d7624b9a" kindref="member">dht_dc</ref>[1]<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0b27b28313ea1667de6bb485faa17b54" kindref="member">jpeg_std_htab_dc1</ref>;</highlight></codeline>
<codeline lineno="2188"><highlight class="normal"><sp/><sp/><sp/><sp/>std_tab-&gt;<ref refid="structhpm__jpeg__std__tab_1a91d0712632307e934fbb4fcb1a24f6f2" kindref="member">dht_dc_len</ref>[1]<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1a0b27b28313ea1667de6bb485faa17b54" kindref="member">jpeg_std_htab_dc1</ref>);</highlight></codeline>
<codeline lineno="2189"><highlight class="normal"></highlight></codeline>
<codeline lineno="2190"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a0b01665f2101695dd4d4ec52e2ff812f" kindref="member">hpm_jpeg_fill_jpeg_info_to_file</ref>(_job,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1ab815fabfe5d174d06575be9d55b09b52" kindref="member">aligned_buf</ref>,<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a3d08e342fd64f3cbc150b9a317b2bcba" kindref="member">aligned_len</ref>);</highlight></codeline>
<codeline lineno="2191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="2193"><highlight class="normal"></highlight></codeline>
<codeline lineno="2194"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a127228db265744fcc9c701f5de1944da" kindref="member">has_valid_qhtab</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a35dfe446431b1063b135d8919276d25d" kindref="member">hpm_jpeg_create_qtab_for_core</ref>(&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a5522f067a588a6f83c75301bdce59da6" kindref="member">core_qtab</ref>,<sp/>1,<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1a0634af33268eec86eb39d78365baa2e6" kindref="member">dqt</ref>);</highlight></codeline>
<codeline lineno="2196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="2198"><highlight class="normal"></highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a75a283e51949683300d51e90cb2b0ab5" kindref="member">hpm_jpeg_create_htab_for_core</ref>(&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a809008f6375f0ad1e1fb744fac544076" kindref="member">core_htab</ref>,<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[0],</highlight></codeline>
<codeline lineno="2200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1af45162fa1562fb6080dfad6bf744ab3a" kindref="member">dht_ac</ref>[1],<sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[0],</highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jpeg_info-&gt;<ref refid="structhpm__jpeg__jpeg__info_1ab4001a7da747d44031a2c212716949a7" kindref="member">dht_dc</ref>[1]);</highlight></codeline>
<codeline lineno="2202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)</highlight></codeline>
<codeline lineno="2203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"></highlight></codeline>
<codeline lineno="2205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a127228db265744fcc9c701f5de1944da" kindref="member">has_valid_qhtab</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2206"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2207"><highlight class="normal"></highlight></codeline>
<codeline lineno="2208"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a9addf5a0e792abfcaa21708aa670332c" kindref="member">JPEG_INFO_DUMP</ref>();</highlight></codeline>
<codeline lineno="2209"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)image_buf;</highlight></codeline>
<codeline lineno="2210"><highlight class="normal"></highlight></codeline>
<codeline lineno="2211"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>=<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>;</highlight></codeline>
<codeline lineno="2214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga31f3752442feb2f832b6f15b78763ed9" kindref="member">jpeg_init</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a1586712d4b9e3c90bc9bb3c417ca917b" kindref="member">hpm_jpeg_encode_init_tabs</ref>(_job);</highlight></codeline>
<codeline lineno="2216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="hpm__jpeg_8c_1af557c0b6eed74f0881e39dd890b07700" kindref="member">hpm_jpeg_encode_config_and_start</ref>(_job);</highlight></codeline>
<codeline lineno="2217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>!=<sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>ERROR2;</highlight></codeline>
<codeline lineno="2220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a7515fe7bd5eaf08496f84082ef28b402" kindref="member">HPM_JPEG_JOB_STATUS_PROCESSING</ref>;</highlight></codeline>
<codeline lineno="2222"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1add0fb006d7a62ff3fb1bedf08d7d4d0f" kindref="member">jpeg_list_add_tail</ref>(&amp;ctx-&gt;<ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>,<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="2224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96aff19103fe07cd43a9245b2a30c9244d6" kindref="member">HPM_JPEG_JOB_STATUS_WAITING</ref>;</highlight></codeline>
<codeline lineno="2225"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2226"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2227"><highlight class="normal"></highlight></codeline>
<codeline lineno="2228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="2229"><highlight class="normal"></highlight></codeline>
<codeline lineno="2230"><highlight class="normal">ERROR2:</highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a8ef2bdbdd2777d705e048b5f4ff1e36a" kindref="member">hpm_jpeg_encode_file_buf_deinit</ref>(_job);</highlight></codeline>
<codeline lineno="2232"><highlight class="normal">ERROR1:</highlight></codeline>
<codeline lineno="2233"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2234"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a96abbe62998f8094c6f4ffcfc48c313b" kindref="member">HPM_JPEG_JOB_STATUS_START_FAILED</ref>;</highlight></codeline>
<codeline lineno="2235"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2237"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2238"><highlight class="normal"></highlight></codeline>
<codeline lineno="2239"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a093ed42cff59fd57affebca830f17bb3" kindref="member">hpm_jpeg_encode_job_stop</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="2240"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2241"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a7a593a8943e484cbcbf7fcb248302300" kindref="member">ctx</ref>;</highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"></highlight></codeline>
<codeline lineno="2245"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>==<sp/>&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a7152984d67dfa27bffebe0a4fb37596b" kindref="member">hpm_jpeg_start_next_job</ref>(ctx);</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a6ff2f9e8c06aaa86dd2d118f3b3f65ff" kindref="member">jpeg_list_del</ref>(&amp;base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a09bbf3248dbcc532adf1c1ff8dc41c01" kindref="member">list</ref>);</highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2251"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a491d1ab0c652a83d4064ab6ae9a3194a" kindref="member">HPM_JPEG_JOB_STATUS_STOPPED</ref>;</highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"></highlight></codeline>
<codeline lineno="2254"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2255"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2256"><highlight class="normal"></highlight></codeline>
<codeline lineno="2257"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a6b72cc7ac158fdd2d60f5ec85e98b680" kindref="member">hpm_jpeg_encode_job_get_info</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/><ref refid="hpm__jpeg_8h_1a03e1820e1c496e5c0225b46d79234626" kindref="member">hpm_jpeg_encode_info_t</ref><sp/>*info)</highlight></codeline>
<codeline lineno="2258"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2260"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2261"><highlight class="normal"></highlight></codeline>
<codeline lineno="2262"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__encode__info_1a2a1227136f970c006646a15961d731a8" kindref="member">hw_status</ref><sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1af54263f4e80dcfaddaffe820fcb71cd4" kindref="member">hw_status</ref>;</highlight></codeline>
<codeline lineno="2263"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__encode__info_1adabd99eb47201a087a6b5a78dd979dff" kindref="member">status</ref><sp/>=<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref>;</highlight></codeline>
<codeline lineno="2264"><highlight class="normal"><sp/><sp/><sp/><sp/>info-&gt;<ref refid="structhpm__jpeg__encode__info_1af8a3b4aea3a47803f1f0e944b869a584" kindref="member">file</ref><sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>;</highlight></codeline>
<codeline lineno="2265"><highlight class="normal"></highlight></codeline>
<codeline lineno="2266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2268"><highlight class="normal"></highlight></codeline>
<codeline lineno="2269"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a2596dfd49a4756fd1826365972a92484" kindref="member">hpm_jpeg_encode_job_free</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="2270"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2271"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="2273"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf<sp/>=<sp/>&amp;_job-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2274"><highlight class="normal"></highlight></codeline>
<codeline lineno="2275"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a093ed42cff59fd57affebca830f17bb3" kindref="member">hpm_jpeg_encode_job_stop</ref>(job);</highlight></codeline>
<codeline lineno="2276"><highlight class="normal"></highlight></codeline>
<codeline lineno="2277"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="2279"><highlight class="normal"></highlight></codeline>
<codeline lineno="2280"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="2282"><highlight class="normal"></highlight></codeline>
<codeline lineno="2283"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(job);</highlight></codeline>
<codeline lineno="2284"><highlight class="normal"></highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2286"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"></highlight></codeline>
<codeline lineno="2288"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a354c8c610e024196c78a52cb290bee9b" kindref="member">hpm_jpeg_job_set_user_data</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*user_data)</highlight></codeline>
<codeline lineno="2289"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2291"><highlight class="normal"></highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aea25ebd07312cfea12a6d4522060bf99" kindref="member">user_data</ref><sp/>=<sp/>user_data;</highlight></codeline>
<codeline lineno="2293"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"></highlight></codeline>
<codeline lineno="2295"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="hpm__jpeg_8c_1ae3b489225acf45c1e0459bc6086557fd" kindref="member">hpm_jpeg_job_get_user_data</ref>(<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*job)</highlight></codeline>
<codeline lineno="2296"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2297"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)job;</highlight></codeline>
<codeline lineno="2298"><highlight class="normal"></highlight></codeline>
<codeline lineno="2299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aea25ebd07312cfea12a6d4522060bf99" kindref="member">user_data</ref>;</highlight></codeline>
<codeline lineno="2300"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2301"><highlight class="normal"></highlight></codeline>
<codeline lineno="2302"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a670206a8b793bbaf206e2d920d12de20" kindref="member">hpm_jpeg_init</ref>(<ref refid="hpm__jpeg_8h_1aacd9859eebabd0a5e5a99d2cee178a65" kindref="member">hpm_jpeg_cfg_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="2303"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2304"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="2305"><highlight class="normal"></highlight></codeline>
<codeline lineno="2306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cfg)<sp/>{</highlight></codeline>
<codeline lineno="2307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1af0d54eba1e94679e9c585024d4af8596" kindref="member">HPM_JPEG_ELOG</ref>(</highlight><highlight class="stringliteral">&quot;cfg<sp/>is<sp/>NULL!!!\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1a292655e9c7b7d4a5bf97aed3e1310521" kindref="member">HPM_JPEG_RET_PARA_ERR</ref>;</highlight></codeline>
<codeline lineno="2309"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2310"><highlight class="normal"></highlight></codeline>
<codeline lineno="2311"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(ctx,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref>));</highlight></codeline>
<codeline lineno="2312"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1ac66db72b9264264e5e5ff21194524b40" kindref="member">jpeg_base</ref>;</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a92e2a5638b90d2986a36f7775aa9838b" kindref="member">malloc</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1adf701d20d2860f1fcbd42a54a0b5d547" kindref="member">malloc</ref>;</highlight></codeline>
<codeline lineno="2314"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a9e76a4fcfdfa0693a9f8c5402b0446c1" kindref="member">free</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1a7d74fc77ace613ebef3365ecd509e1a2" kindref="member">free</ref>;</highlight></codeline>
<codeline lineno="2315"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1a8360b9b59221c7a55304431a3f884226" kindref="member">cache_line_size</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1a244793694bb39bcf10711914962bdc54" kindref="member">cache_line_size</ref>;</highlight></codeline>
<codeline lineno="2316"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae5660a56fcbc95ee7feb84ef40420075" kindref="member">cache_invalidate</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1a20603f0b98437141e78c7a28a8aeffbf" kindref="member">cache_invalidate</ref>;</highlight></codeline>
<codeline lineno="2317"><highlight class="normal"><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ad74446f5b2d2c482cdfc7e63279e34e2" kindref="member">cache_writeback</ref><sp/>=<sp/>cfg-&gt;<ref refid="structhpm__jpeg__cfg_1a38bc337baf2cce4d357f930b71773a9d" kindref="member">cache_writeback</ref>;</highlight></codeline>
<codeline lineno="2318"><highlight class="normal"></highlight></codeline>
<codeline lineno="2319"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a2d2ad3b33af487c242b26d4710213792" kindref="member">jpeg_list_node_init</ref>(&amp;ctx-&gt;<ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>);</highlight></codeline>
<codeline lineno="2320"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga31f3752442feb2f832b6f15b78763ed9" kindref="member">jpeg_init</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="2321"><highlight class="normal"></highlight></codeline>
<codeline lineno="2322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2323"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2324"><highlight class="normal"></highlight></codeline>
<codeline lineno="2325"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a81ef76ccbb2bf1c746d5802143c4bede" kindref="member">hpm_jpeg_deinit</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2326"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2327"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="2328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*file_buf;</highlight></codeline>
<codeline lineno="2329"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a89c389f47da3015cb994ca6f02a5d06f" kindref="member">hpm_jpeg_buf_t</ref><sp/>*image_buf;</highlight></codeline>
<codeline lineno="2330"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job;</highlight></codeline>
<codeline lineno="2331"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*djob;</highlight></codeline>
<codeline lineno="2332"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*ejob;</highlight></codeline>
<codeline lineno="2333"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aef09c9cc11c821066d10f1f04625ea2b" kindref="member">jpeg_list_t</ref><sp/>*next_job;</highlight></codeline>
<codeline lineno="2334"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="2335"><highlight class="normal"></highlight></codeline>
<codeline lineno="2336"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2337"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga1b68ae13f410f3b2a26fa7924076915b" kindref="member">jpeg_reset</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="2338"><highlight class="normal"></highlight></codeline>
<codeline lineno="2339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_job<sp/>=<sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>;</highlight></codeline>
<codeline lineno="2342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="2343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_job<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a382b709af09267c647207d2f67d9b1aa" kindref="member">jpeg_list_node_get</ref>(&amp;ctx-&gt;<ref refid="structhpm__jpeg__context_1a2a7c3627ab1fb5b40edfcf836d574faf" kindref="member">wait_jobs</ref>);</highlight></codeline>
<codeline lineno="2345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2346"><highlight class="normal"></highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>djob<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1adb3f48ba2582a56b9e447b440668220b" kindref="member">hpm_jpeg_decode_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="2348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ejob<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="2349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)next_job;</highlight></codeline>
<codeline lineno="2350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="2351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="2352"><highlight class="normal"></highlight></codeline>
<codeline lineno="2353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job<sp/>&amp;&amp;<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>==<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129eaf5778f6c28727e5e4e8b71d0f2aec210" kindref="member">HPM_JPEG_CODEC_DECODE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf<sp/>=<sp/>&amp;djob-&gt;<ref refid="structhpm__jpeg__decode__job_1aa8ac6c05199d33187f176546612ad544" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf<sp/>=<sp/>&amp;djob-&gt;<ref refid="structhpm__jpeg__decode__job_1ad41bc782971a5b3d66abd8203240120f" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job<sp/>&amp;&amp;<sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>==<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" kindref="member">HPM_JPEG_CODEC_ENCODE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_buf<sp/>=<sp/>&amp;ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1a61cbaa7434587f4f54423c005128b522" kindref="member">file_buf</ref>;</highlight></codeline>
<codeline lineno="2358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image_buf<sp/>=<sp/>&amp;ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1ab7a58e28c6cef99ff59e70f731009656" kindref="member">image_buf</ref>;</highlight></codeline>
<codeline lineno="2359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2360"><highlight class="normal"></highlight></codeline>
<codeline lineno="2361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(image_buf<sp/>&amp;&amp;<sp/>image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="2362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(image_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="2363"><highlight class="normal"></highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_buf<sp/>&amp;&amp;<sp/>file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a88fac48e9fd641ba20c045b1a1fc9817" kindref="member">alloced_len</ref>)</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(file_buf-&gt;<ref refid="structhpm__jpeg__buf_1a585d7bb133188e244bba3e0f564ee59a" kindref="member">alloced_buf</ref>);</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"></highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_job)</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a83866a99495718dfffc666be80f39835" kindref="member">hpm_jpeg_free</ref>(next_job);</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(next_job);</highlight></codeline>
<codeline lineno="2370"><highlight class="normal"></highlight></codeline>
<codeline lineno="2371"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(ctx,<sp/>0x00,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref>));</highlight></codeline>
<codeline lineno="2372"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2373"><highlight class="normal"></highlight></codeline>
<codeline lineno="2374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8h_1acc752e90236b12f83fabb7e062f5c5c4" kindref="member">HPM_JPEG_RET_OK</ref>;</highlight></codeline>
<codeline lineno="2375"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2376"><highlight class="normal"></highlight></codeline>
<codeline lineno="2377"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__jpeg_8c_1a3567cdecfe96c2e53d6666053b56e497" kindref="member">hpm_jpeg_isr</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2378"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2379"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1adca5844be62bd9643e715322a5eeee9e" kindref="member">hpm_jpeg_context_t</ref><sp/>*ctx<sp/>=<sp/>&amp;<ref refid="structhpm__jpeg__context" kindref="compound">hpm_jpeg_context</ref>;</highlight></codeline>
<codeline lineno="2380"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*ejob;</highlight></codeline>
<codeline lineno="2381"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*base_job;</highlight></codeline>
<codeline lineno="2382"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>status;</highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>lock;</highlight></codeline>
<codeline lineno="2384"><highlight class="normal"></highlight></codeline>
<codeline lineno="2385"><highlight class="normal"><sp/><sp/><sp/><sp/>ejob<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1aafa24216804322fda87721b175205417" kindref="member">hpm_jpeg_encode_job_t</ref><sp/>*)ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>;</highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job<sp/>=<sp/>(<ref refid="hpm__jpeg_8c_1abe99fbc063814ed71bafcf88879efeeb" kindref="member">hpm_jpeg_base_job_t</ref><sp/>*)ctx-&gt;<ref refid="structhpm__jpeg__context_1ae3a9bd7f1cb54c870c39cdbb8ac4fb2f" kindref="member">work_job</ref>;</highlight></codeline>
<codeline lineno="2387"><highlight class="normal"></highlight></codeline>
<codeline lineno="2388"><highlight class="normal"><sp/><sp/><sp/><sp/>status<sp/>=<sp/><ref refid="group__Jpeg__interface_1ga3713a8d8aa3311decc3146c4a504d58a" kindref="member">jpeg_get_status</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="2389"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__Jpeg__interface_1ga211981033925f7c40c95329a2ac03f70" kindref="member">jpeg_clear_status</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>,<sp/>status);</highlight></codeline>
<codeline lineno="2390"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(</highlight><highlight class="stringliteral">&quot;hw_status:<sp/>0x%08x\n&quot;</highlight><highlight class="normal">,<sp/>status);</highlight></codeline>
<codeline lineno="2391"><highlight class="normal"></highlight></codeline>
<codeline lineno="2392"><highlight class="normal"><sp/><sp/><sp/><sp/>lock<sp/>=<sp/><ref refid="hpm__jpeg_8c_1a8fab3f902950d0cc40b5e5b2a9c8472e" kindref="member">hpm_jpeg_lock</ref>();</highlight></codeline>
<codeline lineno="2393"><highlight class="normal"><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1af54263f4e80dcfaddaffe820fcb71cd4" kindref="member">hw_status</ref><sp/>=<sp/>status;</highlight></codeline>
<codeline lineno="2394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>&amp;<sp/><ref refid="HPM6700_2ip_2hpm__jpeg__regs_8h_1a3abf2aa6c46e54c6de6ff98c48e3bb3f" kindref="member">JPEG_STAT_OUT_DMA_TRANSFER_DONE_MASK</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(</highlight><highlight class="stringliteral">&quot;status:<sp/>FINISHED\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96a1e52f4622a09f254a1a3b8f48479c11b" kindref="member">HPM_JPEG_JOB_STATUS_FINISHED</ref>;</highlight></codeline>
<codeline lineno="2397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1a444a95537c73c9362d6ffd5769d253ee" kindref="member">codec_type</ref><sp/>==<sp/><ref refid="hpm__jpeg_8c_1ab688032ab56d0ac7fcb05c8a88f1129ea43b2b8a2440a8c08aad49e6cbe0785a3" kindref="member">HPM_JPEG_CODEC_ENCODE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>.<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref><sp/>+=<sp/><ref refid="group__Jpeg__interface_1ga0ce6a67c3eaa1d7fad544ac2028c66c1" kindref="member">jpeg_get_encoded_length</ref>(ctx-&gt;<ref refid="structhpm__jpeg__context_1a39ed6c7d5ab2f2ef578795c38fe63b53" kindref="member">jpeg_base</ref>);</highlight></codeline>
<codeline lineno="2399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>.<ref refid="structhpm__jpeg__jpeg__info_1a998df0267476930baa4213ba66431363" kindref="member">eoi</ref><sp/>=<sp/>ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1affa9fc02f8546a82ccd192e64544de6f" kindref="member">jpeg_info</ref>.<ref refid="structhpm__jpeg__jpeg__info_1a1da871c92560ff7d7bfe824db5c3b479" kindref="member">soi</ref><sp/>+<sp/>ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>.<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref><sp/>-<sp/>2;</highlight></codeline>
<codeline lineno="2400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8h_1a6d580485b404deb1054453fdefd9968a" kindref="member">HPM_JPEG_DLOG</ref>(</highlight><highlight class="stringliteral">&quot;jpeg_file.len:<sp/>%u\n&quot;</highlight><highlight class="normal">,<sp/>ejob-&gt;<ref refid="structhpm__jpeg__encode__job_1ad92568a4a748289ffe3c044040086556" kindref="member">jpeg_file</ref>.<ref refid="structhpm__jpeg__jpeg__file_1a75b5d928bf0547167ce12287f9e0b781" kindref="member">len</ref>);</highlight></codeline>
<codeline lineno="2401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2402"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1abf38e93efc100dbf45845bd68a1743e5" kindref="member">status</ref><sp/>=<sp/><ref refid="hpm__jpeg_8h_1afdc1593c61b9b2f7ac78e2b40c036d96adb98e66be1c55bc235f28d133b847dd4" kindref="member">HPM_JPEG_JOB_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="2404"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2405"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a06de4faac055862250f47941314c926c" kindref="member">hpm_jpeg_unlock</ref>(lock);</highlight></codeline>
<codeline lineno="2406"><highlight class="normal"></highlight></codeline>
<codeline lineno="2407"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>)</highlight></codeline>
<codeline lineno="2408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base_job-&gt;<ref refid="structhpm__jpeg__base__job_1aa36a4524bfcff95a9824dddc6996c700" kindref="member">cb</ref>((<ref refid="hpm__jpeg_8h_1ac633ca1bb547e99044405c0a295e1359" kindref="member">hpm_jpeg_job_t</ref><sp/>*)base_job);</highlight></codeline>
<codeline lineno="2409"><highlight class="normal"></highlight></codeline>
<codeline lineno="2410"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__jpeg_8c_1a7152984d67dfa27bffebe0a4fb37596b" kindref="member">hpm_jpeg_start_next_job</ref>(ctx);</highlight></codeline>
<codeline lineno="2411"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="components/jpeg/hpm_jpeg.c"/>
  </compounddef>
</doxygen>
