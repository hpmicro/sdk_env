<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__mcl__control_8c" kind="file" language="C++">
    <compoundname>hpm_mcl_control.c</compoundname>
    <includes refid="hpm__mcl__control_8h" local="yes">hpm_mcl_control.h</includes>
    <includes refid="hpm__mcl__math_8h" local="yes">hpm_mcl_math.h</includes>
    <incdepgraph>
      <node id="4">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c</label>
        <link refid="hpm__mcl__control_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>hpm_mcl_control.h</label>
        <link refid="hpm__mcl__control_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>hpm_mcl_cfg.h</label>
        <link refid="hpm__mcl__cfg_8h"/>
      </node>
      <node id="3">
        <label>hpm_mcl_common.h</label>
        <link refid="hpm__mcl__common_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>hpm_mcl_math.h</label>
        <link refid="hpm__mcl__math_8h"/>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>hpm_mcl_physical.h</label>
        <link refid="hpm__mcl__physical_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>assert.h</label>
      </node>
      <node id="13">
        <label>math.h</label>
      </node>
      <node id="6">
        <label>stdbool.h</label>
      </node>
      <node id="7">
        <label>stdint.h</label>
      </node>
      <node id="14">
        <label>stdio.h</label>
      </node>
      <node id="9">
        <label>stdlib.h</label>
      </node>
      <node id="8">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="func">
      <memberdef kind="function" id="hpm__mcl__control_8c_1af15b6aafc29d742ba76eb172b1e78e1e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>float</type>
        <definition>float hpm_mcl_control_sin</definition>
        <argsstring>(float x)</argsstring>
        <name>hpm_mcl_control_sin</name>
        <param>
          <type>float</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="11" column="7" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="11" bodyend="14"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a9eed8b13d0fe7d33d27a316c00bf5e1b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>float</type>
        <definition>float hpm_mcl_control_cos</definition>
        <argsstring>(float x)</argsstring>
        <name>hpm_mcl_control_cos</name>
        <param>
          <type>float</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="16" column="7" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="16" bodyend="19"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a4a47b8d6f48b4b5d674250bc92200630" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>float</type>
        <definition>float hpm_mcl_control_arctan</definition>
        <argsstring>(float y, float x)</argsstring>
        <name>hpm_mcl_control_arctan</name>
        <param>
          <type>float</type>
          <declname>y</declname>
        </param>
        <param>
          <type>float</type>
          <declname>x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="21" column="7" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="21" bodyend="24"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ac8498b3ed22bd88368f0be757d70d83d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_clarke</definition>
        <argsstring>(float ia, float ib, float ic, float *alpha, float *beta)</argsstring>
        <name>hpm_mcl_control_clarke</name>
        <param>
          <type>float</type>
          <declname>ia</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ib</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ic</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>beta</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para>&lt; sqrt(3)/3</para>
<para>&lt; sqrt(3)/3</para>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="26" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="26" bodyend="36"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a01da966f300642cb6ac7e6804ad8c634" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_park</definition>
        <argsstring>(float alpha, float beta, float sin_x, float cos_x, float *d, float *q)</argsstring>
        <name>hpm_mcl_control_park</name>
        <param>
          <type>float</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>beta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>sin_x</declname>
        </param>
        <param>
          <type>float</type>
          <declname>cos_x</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>d</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>q</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="38" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="38" bodyend="47"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_pi</definition>
        <argsstring>(float ref, float sens, mcl_control_pid_t *pid_x, float *output)</argsstring>
        <name>hpm_mcl_control_pi</name>
        <param>
          <type>float</type>
          <declname>ref</declname>
        </param>
        <param>
          <type>float</type>
          <declname>sens</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref> *</type>
          <declname>pid_x</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>output</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="49" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="49" bodyend="63"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a0cabfa5f4552500da32d846b1b3b6b81" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_inv_park</definition>
        <argsstring>(float d, float q, float sin_x, float cos_x, float *alpha, float *beta)</argsstring>
        <name>hpm_mcl_control_inv_park</name>
        <param>
          <type>float</type>
          <declname>d</declname>
        </param>
        <param>
          <type>float</type>
          <declname>q</declname>
        </param>
        <param>
          <type>float</type>
          <declname>sin_x</declname>
        </param>
        <param>
          <type>float</type>
          <declname>cos_x</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>beta</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="65" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="65" bodyend="74"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a609133c55635515e61fa49f43fb809a2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_svpwm</definition>
        <argsstring>(float alpha, float beta, float vbus, mcl_control_svpwm_duty_t *duty)</argsstring>
        <name>hpm_mcl_control_svpwm</name>
        <param>
          <type>float</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>beta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>vbus</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__svpwm__duty__t" kindref="compound">mcl_control_svpwm_duty_t</ref> *</type>
          <declname>duty</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para>&lt; sqrt(3)</para>
<para>&lt; sqrt(3)/3</para>
<para>&lt; sqrt(3)</para>
<para>&lt; sqrt(3)</para>
<para>&lt; sqrt(3)/3</para>
<para>&lt; sqrt(3)/3</para>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="76" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="76" bodyend="196"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a01a9191032b7ee3d3f90e64a1a7dc34b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_step_svpwm</definition>
        <argsstring>(float alpha, float beta, float vbus, mcl_control_svpwm_duty_t *duty)</argsstring>
        <name>hpm_mcl_control_step_svpwm</name>
        <param>
          <type>float</type>
          <declname>alpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>beta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>vbus</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__svpwm__duty__t" kindref="compound">mcl_control_svpwm_duty_t</ref> *</type>
          <declname>duty</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="198" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="198" bodyend="230"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1aa7987101435cf854990afd69c05cf98b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_get_block_sector</definition>
        <argsstring>(hall_phase_t hall, uint8_t u, uint8_t v, uint8_t w, uint8_t *sector)</argsstring>
        <name>hpm_mcl_control_get_block_sector</name>
        <param>
          <type><ref refid="hpm__mcl__physical_8h_1a30438820b803592257436214687dd98c" kindref="member">hall_phase_t</ref></type>
          <declname>hall</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>u</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>v</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>w</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>sector</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="232" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="232" bodyend="245"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a42a4c2f5b4e4b1f69a86dbd79afcef20" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>float</type>
        <definition>float hpm_mcl_control_lowpass_filter</definition>
        <argsstring>(float input, float *mem, float k)</argsstring>
        <name>hpm_mcl_control_lowpass_filter</name>
        <param>
          <type>float</type>
          <declname>input</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>mem</declname>
        </param>
        <param>
          <type>float</type>
          <declname>k</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="247" column="7" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="247" bodyend="255"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a10b660cbdcbdce5810505826631b3294" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_dead_area_polarity_detection</definition>
        <argsstring>(mcl_control_dead_area_compensation_t *dead_area, float id, float iq, float theta, float deadtime, float ts, mcl_control_dead_area_pwm_offset_t *pwm_out)</argsstring>
        <name>hpm_mcl_control_dead_area_polarity_detection</name>
        <param>
          <type><ref refid="structmcl__control__dead__area__compensation__t" kindref="compound">mcl_control_dead_area_compensation_t</ref> *</type>
          <declname>dead_area</declname>
        </param>
        <param>
          <type>float</type>
          <declname>id</declname>
        </param>
        <param>
          <type>float</type>
          <declname>iq</declname>
        </param>
        <param>
          <type>float</type>
          <declname>theta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>deadtime</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ts</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__dead__area__pwm__offset__t" kindref="compound">mcl_control_dead_area_pwm_offset_t</ref> *</type>
          <declname>pwm_out</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="257" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="257" bodyend="300"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a62798bfab381ef9dcdd7c81e9b6849c1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_mcl_control_smc_init</definition>
        <argsstring>(mcl_control_smc_t *smc_cfg)</argsstring>
        <name>hpm_mcl_control_smc_init</name>
        <param>
          <type><ref refid="structmcl__control__smc__t" kindref="compound">mcl_control_smc_t</ref> *</type>
          <declname>smc_cfg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="302" column="6" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="302" bodyend="308"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ab2ce88265e3ee34eb6856db36b630206" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_mcl_control_smc_process</definition>
        <argsstring>(mcl_control_smc_t *smc_cfg, float ualpha, float ubeta, float ialpha, float ibeta)</argsstring>
        <name>hpm_mcl_control_smc_process</name>
        <param>
          <type><ref refid="structmcl__control__smc__t" kindref="compound">mcl_control_smc_t</ref> *</type>
          <declname>smc_cfg</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ualpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ubeta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ialpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ibeta</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="310" column="6" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="310" bodyend="357"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a82b6227c01040c551206748da75169cb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_offline_param_detection_rs</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection, float ialpha, float ibeta, float *ud, float *uq)</argsstring>
        <name>hpm_mcl_control_offline_param_detection_rs</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ialpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ibeta</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>ud</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>uq</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="359" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="359" bodyend="377"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a0929f0daa5d559fb6784e1c56ed99506" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_offline_param_detection_ld</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection, float ialpha, float ibeta, float *ud, float *uq)</argsstring>
        <name>hpm_mcl_control_offline_param_detection_ld</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ialpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ibeta</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>ud</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>uq</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="379" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="379" bodyend="402"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a092a4c5c7263aa81d6dbd643e4a09d8a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_offline_param_detection_lq</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection, float ialpha, float ibeta, float *ud, float *uq)</argsstring>
        <name>hpm_mcl_control_offline_param_detection_lq</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ialpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ibeta</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>ud</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>uq</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="404" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="404" bodyend="424"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1afa8322e3055d0bfed528e12f860ad0e6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_offline_param_detection_ls</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection)</argsstring>
        <name>hpm_mcl_control_offline_param_detection_ls</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="426" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="426" bodyend="431"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a7817c0ee134ce2c78aed2c001d88994a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_offline_param_detection_flux</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection, float ialpha, float ibeta, float ualpha, float ubeta, float *ref_d, float *ref_q)</argsstring>
        <name>hpm_mcl_control_offline_param_detection_flux</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ialpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ibeta</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ualpha</declname>
        </param>
        <param>
          <type>float</type>
          <declname>ubeta</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>ref_d</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>ref_q</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="433" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="433" bodyend="457"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ac99d062321c4d9458be17e1966f08b15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_detection_init</definition>
        <argsstring>(mcl_control_offline_param_detection_t *detection)</argsstring>
        <name>hpm_mcl_control_detection_init</name>
        <param>
          <type><ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref> *</type>
          <declname>detection</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="459" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="459" bodyend="476"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ae9a162eee97e535cfb0009e8ca5eace0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_pid_to_3p3z</definition>
        <argsstring>(mcl_control_pid_cfg_t *cfg_pid, mcl_clc_coeff_cfg_t *cfg_3p3z)</argsstring>
        <name>hpm_mcl_pid_to_3p3z</name>
        <param>
          <type><ref refid="structmcl__control__pid__cfg__t" kindref="compound">mcl_control_pid_cfg_t</ref> *</type>
          <declname>cfg_pid</declname>
        </param>
        <param>
          <type><ref refid="structmcl__clc__coeff__cfg__t" kindref="compound">mcl_clc_coeff_cfg_t</ref> *</type>
          <declname>cfg_3p3z</declname>
        </param>
        <briefdescription>
<para>Convert a 3p3z controller to a pid controller. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pid</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="structmcl__control__pid__cfg__t" kindref="compound">mcl_control_pid_cfg_t</ref> </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>p3z3</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="structmcl__clc__coeff__cfg__t" kindref="compound">mcl_clc_coeff_cfg_t</ref> </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref> </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
<para>The relationship between the 3p3z coefficients and the P, I, and D gains of the basic PID is obtained by the standard discrete transform method, and the final result given here. Principle View Knowledge Base.</para>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="478" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="478" bodyend="495"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1acd8ced301aebbfa79203b9eb616942f6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_delta_pid</definition>
        <argsstring>(float setpoint, float feedback, mcl_control_pid_t *pid_x, float *output)</argsstring>
        <name>hpm_mcl_delta_pid</name>
        <param>
          <type>float</type>
          <declname>setpoint</declname>
        </param>
        <param>
          <type>float</type>
          <declname>feedback</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref> *</type>
          <declname>pid_x</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>output</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Calculates the output of a Delta PID controller.</para>
<para>This function implements a Delta PID (Proportional-Integral-Derivative) controller calculation to determine the controller&apos;s output value based on the setpoint and feedback values. The PID controller adjusts the output value using proportional (P), integral (I), and derivative (D) terms to minimize the error between the setpoint and feedback values.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>setpoint</parametername>
</parameternamelist>
<parameterdescription>
<para>The desired output value of the system. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>feedback</parametername>
</parameternamelist>
<parameterdescription>
<para>The actual output value of the system. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pid_x</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the PID controller structure containing the configuration and state. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>output</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to store the calculated controller output value. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns a status code indicating whether the function executed successfully.</para>
</simplesect>
Note:<itemizedlist>
<listitem><para>This function assumes that the PID controller structure <computeroutput><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref></computeroutput> is properly initialized.</para>
</listitem><listitem><para>The function internally limits the output value to ensure it does not exceed the configured minimum and maximum output values. </para>
</listitem></itemizedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="497" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="497" bodyend="524"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ab2e17529888204fa31e5adc963f5f340" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_position_pid</definition>
        <argsstring>(float setpoint, float feedback, mcl_control_pid_t *pid_x, float *output)</argsstring>
        <name>hpm_mcl_position_pid</name>
        <param>
          <type>float</type>
          <declname>setpoint</declname>
        </param>
        <param>
          <type>float</type>
          <declname>feedback</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref> *</type>
          <declname>pid_x</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>output</declname>
        </param>
        <briefdescription>
<para>Calculate the output of a Positional PID controller. </para>
        </briefdescription>
        <detaileddescription>
<para>This function implements a typical PID (Proportional-Integral-Derivative) controller to compute the control signal based on the setpoint and feedback. The PID controller optimizes the control process by adjusting three parameters: proportional gain (KP), integral gain (KI), and derivative gain (KD). The proportional term responds quickly to the error, the integral term eliminates steady-state error, and the derivative term predicts and reduces overshoot.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>setpoint</parametername>
</parameternamelist>
<parameterdescription>
<para>The setpoint, i.e., the desired output value </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>feedback</parametername>
</parameternamelist>
<parameterdescription>
<para>The feedback signal, representing the actual output value </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pid_x</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the PID controller structure, containing the configuration and state </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>output</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the output control signal </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref> The execution status, indicating whether the PID calculation was successful </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="526" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="526" bodyend="549"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_pid_init</definition>
        <argsstring>(mcl_control_pid_t *pid_x)</argsstring>
        <name>hpm_mcl_pid_init</name>
        <param>
          <type><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref> *</type>
          <declname>pid_x</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="551" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="551" bodyend="561"/>
      </memberdef>
      <memberdef kind="function" id="hpm__mcl__control_8c_1ac5ad3b4585f403299ae01f45d207c4be" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref></type>
        <definition>hpm_mcl_stat_t hpm_mcl_control_init</definition>
        <argsstring>(mcl_control_t *control, mcl_control_cfg_t *cfg)</argsstring>
        <name>hpm_mcl_control_init</name>
        <param>
          <type><ref refid="structmcl__control__t" kindref="compound">mcl_control_t</ref> *</type>
          <declname>control</declname>
        </param>
        <param>
          <type><ref refid="structmcl__control__cfg__t" kindref="compound">mcl_control_cfg_t</ref> *</type>
          <declname>cfg</declname>
        </param>
        <briefdescription>
<para>Initialise the operating data for the control function. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>control</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="structmcl__control__t" kindref="compound">mcl_control_t</ref> </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>cfg</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="structmcl__control__cfg__t" kindref="compound">mcl_control_cfg_t</ref> </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref> </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
<para>Data initialisation</para>
<para>function initialisation</para>
        </inbodydescription>
        <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" line="563" column="16" bodyfile="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c" bodystart="563" bodyend="636"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2023-2024<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__mcl__control_8h" kindref="compound">hpm_mcl_control.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__mcl__math_8h" kindref="compound">hpm_mcl_math.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1af15b6aafc29d742ba76eb172b1e78e1e" kindref="member">hpm_mcl_control_sin</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>x)</highlight></codeline>
<codeline lineno="12"><highlight class="normal">{</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sinf(x);</highlight></codeline>
<codeline lineno="14"><highlight class="normal">}</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1a9eed8b13d0fe7d33d27a316c00bf5e1b" kindref="member">hpm_mcl_control_cos</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>x)</highlight></codeline>
<codeline lineno="17"><highlight class="normal">{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cosf(x);</highlight></codeline>
<codeline lineno="19"><highlight class="normal">}</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1a4a47b8d6f48b4b5d674250bc92200630" kindref="member">hpm_mcl_control_arctan</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>y,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>x)</highlight></codeline>
<codeline lineno="22"><highlight class="normal">{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>atan2((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)y,<sp/>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)x);</highlight></codeline>
<codeline lineno="24"><highlight class="normal">}</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1ac8498b3ed22bd88368f0be757d70d83d" kindref="member">hpm_mcl_control_clarke</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ia,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ib,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ic,</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*beta)</highlight></codeline>
<codeline lineno="28"><highlight class="normal">{</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)ic;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(alpha<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(beta<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>*alpha<sp/>=<sp/>ia;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>*beta<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1ae12d8b94312e73a6173c1795d22060b5" kindref="member">SQRT3_DIV3</ref><sp/>*<sp/>ia<sp/>+<sp/>(<ref refid="hpm__mcl__math_8h_1ae12d8b94312e73a6173c1795d22060b5" kindref="member">SQRT3_DIV3</ref><sp/>*<sp/>2)<sp/>*<sp/>ib;</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="36"><highlight class="normal">}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a01da966f300642cb6ac7e6804ad8c634" kindref="member">hpm_mcl_control_park</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sin_x,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cos_x,</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*d,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*q)</highlight></codeline>
<codeline lineno="40"><highlight class="normal">{</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(d<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(q<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>*d<sp/>=<sp/>cos_x<sp/>*<sp/>alpha<sp/>+<sp/>sin_x<sp/>*<sp/>beta;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>*q<sp/>=<sp/>-sin_x<sp/>*<sp/>alpha<sp/>+<sp/>cos_x<sp/>*beta;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ref,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sens,<sp/><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref><sp/>*pid_x,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*output)</highlight></codeline>
<codeline lineno="50"><highlight class="normal">{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(output<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>ref<sp/>-<sp/>sens;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>+=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1ae966118fd3c63526bfc08ecc47772dfa" kindref="member">ki</ref><sp/>*<sp/>err;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1aaca77d4ce3940f6eb7a5bb42c79b85a7" kindref="member">integral_min</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a25f80da6d2ab4efbd6ecd901a0c40e2b" kindref="member">integral_max</ref>);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1afa3fc5569e20165c08a3c2dcf6aad484" kindref="member">kp</ref><sp/>*<sp/>err<sp/>+<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref>;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(val,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1af1844dcc8bfb77310a5ee5b0617b96c4" kindref="member">output_min</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a99e499ec651f04c5f32e1b5e776e2136" kindref="member">output_max</ref>);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>*output<sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="63"><highlight class="normal">}</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a0cabfa5f4552500da32d846b1b3b6b81" kindref="member">hpm_mcl_control_inv_park</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>d,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>q,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sin_x,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cos_x,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*beta)</highlight></codeline>
<codeline lineno="67"><highlight class="normal">{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(alpha<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(beta<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/>*alpha<sp/>=<sp/>cos_x<sp/>*<sp/>d<sp/>-<sp/>sin_x<sp/>*<sp/>q;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>*beta<sp/>=<sp/>sin_x<sp/>*<sp/>d<sp/>+<sp/>cos_x<sp/>*<sp/>q;</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal">}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a609133c55635515e61fa49f43fb809a2" kindref="member">hpm_mcl_control_svpwm</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>vbus,<sp/><ref refid="structmcl__control__svpwm__duty__t" kindref="compound">mcl_control_svpwm_duty_t</ref><sp/>*duty)</highlight></codeline>
<codeline lineno="77"><highlight class="normal">{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val0,<sp/>val1;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val2,<sp/>val3;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val4,<sp/>val5,<sp/>val6;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578ab" kindref="member">mcl_svpwm_sector_t</ref><sp/>sector;</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(duty<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(vbus<sp/>!=<sp/>0,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a5df83cb02f3d9deca64a321eca8158b9" kindref="member">mcl_invalid_argument</ref>);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>vbus<sp/>=<sp/>1<sp/>/<sp/>(vbus<sp/>*<sp/>2<sp/>/<sp/>3);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>alpha<sp/>=<sp/>alpha<sp/>*<sp/>vbus;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>beta<sp/>=<sp/>beta<sp/>*<sp/>vbus;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alpha<sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val0<sp/>=<sp/>beta<sp/>/<sp/>alpha;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val0<sp/>=<sp/>beta<sp/>/<sp/>0.0000001f;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beta<sp/>!=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val1<sp/>=<sp/>alpha<sp/>/<sp/>beta;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val1<sp/>=<sp/>alpha<sp/>/<sp/>0.0000001f;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beta<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alpha<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(val0<sp/>&lt;<sp/><ref refid="hpm__mcl__math_8h_1ae42978afd835c3a1f70d409a1b5f5a39" kindref="member">SQRT3</ref>)<sp/>{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba45aab34f77315b4ba058127d038261e7" kindref="member">svpwm_sector1</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba73603b44f8129396eebac59fb4c22af1" kindref="member">svpwm_sector2</ref>;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(val1<sp/>&gt;<sp/>-<ref refid="hpm__mcl__math_8h_1ae12d8b94312e73a6173c1795d22060b5" kindref="member">SQRT3_DIV3</ref>)<sp/>{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba73603b44f8129396eebac59fb4c22af1" kindref="member">svpwm_sector2</ref>;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba58486ea1b13987d5e0f7f0001f8c6fea" kindref="member">svpwm_sector3</ref>;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alpha<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(val0<sp/>&lt;<sp/>-<ref refid="hpm__mcl__math_8h_1ae42978afd835c3a1f70d409a1b5f5a39" kindref="member">SQRT3</ref>)<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba446dee188f1ae9a886b7561777c8d495" kindref="member">svpwm_sector5</ref>;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba97774181fea53849464ec98a13589dbc" kindref="member">svpwm_sector6</ref>;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(val0<sp/>&lt;<sp/><ref refid="hpm__mcl__math_8h_1ae42978afd835c3a1f70d409a1b5f5a39" kindref="member">SQRT3</ref>)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba922a780edc1f269dcb40a83ba8cbd054" kindref="member">svpwm_sector4</ref>;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba446dee188f1ae9a886b7561777c8d495" kindref="member">svpwm_sector5</ref>;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>val2<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1ae12d8b94312e73a6173c1795d22060b5" kindref="member">SQRT3_DIV3</ref><sp/>*<sp/>beta;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>val3<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1ae12d8b94312e73a6173c1795d22060b5" kindref="member">SQRT3_DIV3</ref><sp/>*<sp/>2<sp/>*<sp/>beta;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(sector)<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba45aab34f77315b4ba058127d038261e7" kindref="member">svpwm_sector1</ref>:</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>(alpha<sp/>-<sp/>val2);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>-<sp/>val3)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>+=<sp/>val5;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val4<sp/>+<sp/>val3;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val4;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba73603b44f8129396eebac59fb4c22af1" kindref="member">svpwm_sector2</ref>:</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>alpha<sp/>+<sp/>val2;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val2<sp/>=<sp/>val2<sp/>-<sp/>alpha;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>-<sp/>val2)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val2<sp/>+=<sp/>val5;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val2<sp/>+<sp/>val4;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val2;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba58486ea1b13987d5e0f7f0001f8c6fea" kindref="member">svpwm_sector3</ref>:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>-alpha<sp/>-<sp/>val2;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>-<sp/>val3)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val3<sp/>+=<sp/>val5;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val3<sp/>+<sp/>val4;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val3;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba922a780edc1f269dcb40a83ba8cbd054" kindref="member">svpwm_sector4</ref>:</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>val2<sp/>-<sp/>alpha;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>+<sp/>val3)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val3<sp/>=<sp/>val5<sp/>-<sp/>val3;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val3<sp/>+<sp/>val4;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val3;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba446dee188f1ae9a886b7561777c8d495" kindref="member">svpwm_sector5</ref>:</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>alpha<sp/>-<sp/>val2;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val2<sp/>=<sp/>-val2<sp/>-<sp/>alpha;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>-<sp/>val2)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val2<sp/>+=<sp/>val5;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val2<sp/>+<sp/>val4;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val2;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8h_1ae0ddf6f0d86ac2a8d353efa1dcb578aba97774181fea53849464ec98a13589dbc" kindref="member">svpwm_sector6</ref>:</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>=<sp/>val2<sp/>+<sp/>alpha;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val5<sp/>=<sp/>(1<sp/>-<sp/>val4<sp/>+<sp/>val3)<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val4<sp/>+=<sp/>val5;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val6<sp/>=<sp/>val4<sp/>-<sp/>val3;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>val5;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>val6;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>val4;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a81d8d2c1d98431e5240c2a905c7efbe7" kindref="member">a</ref>,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a2849582bb926e3a0553a377afd79ab72" kindref="member">b</ref>,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1af8a0013f571f1f93718c0a31b3ce7e7c" kindref="member">c</ref>,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="196"><highlight class="normal">}</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a01a9191032b7ee3d3f90e64a1a7dc34b" kindref="member">hpm_mcl_control_step_svpwm</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>vbus,<sp/><ref refid="structmcl__control__svpwm__duty__t" kindref="compound">mcl_control_svpwm_duty_t</ref><sp/>*duty)</highlight></codeline>
<codeline lineno="199"><highlight class="normal">{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ta0on<sp/>=<sp/>0,<sp/>ta1on<sp/>=<sp/>0,<sp/>tb0on<sp/>=<sp/>0,<sp/>tb1on<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(duty<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(vbus<sp/>!=<sp/>0,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a5df83cb02f3d9deca64a321eca8158b9" kindref="member">mcl_invalid_argument</ref>);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>vbus<sp/>=<sp/>1<sp/>/<sp/>(vbus<sp/>*<sp/>2<sp/>/<sp/>3);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>alpha<sp/>=<sp/>alpha<sp/>*<sp/>vbus;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>beta<sp/>=<sp/>beta<sp/>*<sp/>vbus;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alpha<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ta1on<sp/>=<sp/>alpha;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ta0on<sp/>=<sp/>-alpha;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beta<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tb1on<sp/>=<sp/>beta;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tb0on<sp/>=<sp/>-beta;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(ta0on,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(ta1on,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(tb0on,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(tb1on,<sp/>0,<sp/>1);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1ab2c66c206139557c2688fc7a70374d86" kindref="member">a0</ref><sp/>=<sp/>ta0on;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a39008d74143f0dfbf7180b870b434800" kindref="member">a1</ref><sp/>=<sp/>ta1on;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a79fe7f9dd8294f3b732e6762a207b498" kindref="member">b0</ref><sp/>=<sp/>tb0on;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>duty-&gt;<ref refid="structmcl__control__svpwm__duty__t_1a6fe42c3d035c4604a806911c8c040d33" kindref="member">b1</ref><sp/>=<sp/>tb1on;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="230"><highlight class="normal">}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1aa7987101435cf854990afd69c05cf98b" kindref="member">hpm_mcl_control_get_block_sector</ref>(<ref refid="hpm__mcl__physical_8h_1a30438820b803592257436214687dd98c" kindref="member">hall_phase_t</ref><sp/>hall,<sp/>uint8_t<sp/>u,<sp/>uint8_t<sp/>v,<sp/>uint8_t<sp/>w,<sp/>uint8_t<sp/>*sector)</highlight></codeline>
<codeline lineno="233"><highlight class="normal">{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>hall_tbl_120[8]<sp/>=<sp/>{0,<sp/>4,<sp/>2,<sp/>3,<sp/>6,<sp/>5,<sp/>1,<sp/>0};</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>hall_tbl_60[8]<sp/>=<sp/>{0,<sp/>5,<sp/>4,<sp/>3,<sp/>6,<sp/>1,<sp/>2,<sp/>0};</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hall<sp/>==<sp/><ref refid="hpm__mcl__physical_8h_1a30438820b803592257436214687dd98ca4634d8e3296e7cec2ae243fc680bca42" kindref="member">phase_120</ref>)<sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sector<sp/>=<sp/>hall_tbl_120[(u&lt;&lt;2)<sp/>|<sp/>(v&lt;&lt;1)<sp/>|<sp/>w];</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hall<sp/>==<sp/><ref refid="hpm__mcl__physical_8h_1a30438820b803592257436214687dd98ca66389c5c531861f353fa0b055a87f6d4" kindref="member">phase_60</ref>)<sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sector<sp/>=<sp/>hall_tbl_60[(u&lt;&lt;2)<sp/>|<sp/>(v&lt;&lt;1)<sp/>|<sp/>w];</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a5df83cb02f3d9deca64a321eca8158b9" kindref="member">mcl_invalid_argument</ref>);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="245"><highlight class="normal">}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1a42a4c2f5b4e4b1f69a86dbd79afcef20" kindref="member">hpm_mcl_control_lowpass_filter</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>input,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*mem,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k)</highlight></codeline>
<codeline lineno="248"><highlight class="normal">{</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>output;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>output<sp/>=<sp/>k<sp/>*<sp/>input<sp/>+<sp/>(1<sp/>-<sp/>k)<sp/>*<sp/>(*mem);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>*mem<sp/>=<sp/>output;</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>output;</highlight></codeline>
<codeline lineno="255"><highlight class="normal">}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a10b660cbdcbdce5810505826631b3294" kindref="member">hpm_mcl_control_dead_area_polarity_detection</ref>(<ref refid="structmcl__control__dead__area__compensation__t" kindref="compound">mcl_control_dead_area_compensation_t</ref><sp/>*dead_area,</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>iq,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>theta,</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deadtime,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ts,<sp/><ref refid="structmcl__control__dead__area__pwm__offset__t" kindref="compound">mcl_control_dead_area_pwm_offset_t</ref><sp/>*pwm_out)</highlight></codeline>
<codeline lineno="260"><highlight class="normal">{</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>out_d,<sp/>out_q,<sp/>sens_theta;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>int8_t<sp/>ia<sp/>=<sp/>0,<sp/>ib<sp/>=<sp/>0,<sp/>ic<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>out_q<sp/>=<sp/><ref refid="hpm__mcl__control_8c_1a42a4c2f5b4e4b1f69a86dbd79afcef20" kindref="member">hpm_mcl_control_lowpass_filter</ref>(iq,<sp/>&amp;dead_area-&gt;<ref refid="structmcl__control__dead__area__compensation__t_1acaa71caaedcaa3e1ac134f18d125e056" kindref="member">q_mem</ref>,<sp/>dead_area-&gt;<ref refid="structmcl__control__dead__area__compensation__t_1adfec889310a26a5dbd0c6049481c1d40" kindref="member">cfg</ref>.<ref refid="structmcl__control__dead__area__compensation__cfg__t_1a688f08655d930c19b0c9f837eb406ba6" kindref="member">lowpass_k</ref>);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/>out_d<sp/>=<sp/><ref refid="hpm__mcl__control_8c_1a42a4c2f5b4e4b1f69a86dbd79afcef20" kindref="member">hpm_mcl_control_lowpass_filter</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/>&amp;dead_area-&gt;<ref refid="structmcl__control__dead__area__compensation__t_1abf10c804e75a5c6a11ace86cadcf366e" kindref="member">d_mem</ref>,<sp/>dead_area-&gt;<ref refid="structmcl__control__dead__area__compensation__t_1adfec889310a26a5dbd0c6049481c1d40" kindref="member">cfg</ref>.<ref refid="structmcl__control__dead__area__compensation__cfg__t_1a688f08655d930c19b0c9f837eb406ba6" kindref="member">lowpass_k</ref>);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>sens_theta<sp/>=<sp/>atan2f(out_q,<sp/>out_d);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>theta<sp/>+=<sp/>sens_theta;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>theta<sp/>=<sp/><ref refid="hpm__mcl__common_8h_1a2d3879a27c6198a449b63fcbbbbd9496" kindref="member">MCL_ANGLE_MOD_X</ref>(0,<sp/><ref refid="hpm__mcl__common_8h_1a6fce632c323de12d2a5a9cbe15534e69" kindref="member">MCL_2PI</ref>,<sp/>theta);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(11.0f<sp/>/<sp/>6)))<sp/>||<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(1.0f<sp/>/<sp/>6))))<sp/>{</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(1.0f<sp/>/<sp/>6)))<sp/>&amp;&amp;<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(1.0f<sp/>/<sp/>2))))<sp/>{</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(1.0f<sp/>/<sp/>2)))<sp/>&amp;&amp;<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(5.0f<sp/>/<sp/>6))))<sp/>{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(5.0f<sp/>/<sp/>6)))<sp/>&amp;&amp;<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(7.0f<sp/>/<sp/>6))))<sp/>{</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(7.0f<sp/>/<sp/>6)))<sp/>&amp;&amp;<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(3.0f<sp/>/<sp/>2))))<sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((theta<sp/>&gt;=<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(3.0f<sp/>/<sp/>2)))<sp/>&amp;&amp;<sp/>(theta<sp/>&lt;<sp/>(<ref refid="hpm__mcl__common_8h_1a990c966fff97d73cb5835a41156d6327" kindref="member">MCL_PI</ref><sp/>*<sp/>(11.0f<sp/>/<sp/>6))))<sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ia<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ib<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>pwm_out-&gt;<ref refid="structmcl__control__dead__area__pwm__offset__t_1a85d4720ea52e6136f658e4c172a1e0db" kindref="member">a_offset</ref><sp/>=<sp/>2.0f<sp/>*<sp/>deadtime<sp/>*<sp/>ia<sp/>/<sp/>ts;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>pwm_out-&gt;<ref refid="structmcl__control__dead__area__pwm__offset__t_1a4050b7eb8b6eba0fc6e3199f48c42515" kindref="member">b_offset</ref><sp/>=<sp/>2.0f<sp/>*<sp/>deadtime<sp/>*<sp/>ib<sp/>/<sp/>ts;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>pwm_out-&gt;<ref refid="structmcl__control__dead__area__pwm__offset__t_1a702a9ad305c5e6b7c6a3537a68b8f02c" kindref="member">c_offset</ref><sp/>=<sp/>2.0f<sp/>*<sp/>deadtime<sp/>*<sp/>ic<sp/>/<sp/>ts;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="300"><highlight class="normal">}</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1a62798bfab381ef9dcdd7c81e9b6849c1" kindref="member">hpm_mcl_control_smc_init</ref>(<ref refid="structmcl__control__smc__t" kindref="compound">mcl_control_smc_t</ref><sp/>*smc_cfg)</highlight></codeline>
<codeline lineno="303"><highlight class="normal">{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aaa852984361d1323994962a71e2c04e3" kindref="member">smc_g</ref><sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1a93dfa3c1164cac5f181f1c2613af691b" kindref="member">sample_ts</ref><sp/>/</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1a036fdc6699cb4b123c80f1cae7d56ded" kindref="member">inductor</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a6f9bf4e949a20e0b04f088e44b0df626" kindref="member">smc_f</ref><sp/>=<sp/>1<sp/>-<sp/>(smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1a0b82eef78f3d146a4e40e011b2082fae" kindref="member">res</ref><sp/>/<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1a036fdc6699cb4b123c80f1cae7d56ded" kindref="member">inductor</ref>)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1a93dfa3c1164cac5f181f1c2613af691b" kindref="member">sample_ts</ref>;</highlight></codeline>
<codeline lineno="308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__control_8c_1ab2ce88265e3ee34eb6856db36b630206" kindref="member">hpm_mcl_control_smc_process</ref>(<ref refid="structmcl__control__smc__t" kindref="compound">mcl_control_smc_t</ref><sp/>*smc_cfg,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ualpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ubeta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ialpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ibeta)</highlight></codeline>
<codeline lineno="311"><highlight class="normal">{</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alhpa_err;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>beta_err;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>speed;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sens,<sp/>ref;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ae30f9f1f5cee87bc25dc7a169ed299cc" kindref="member">ialpha_mem</ref><sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a6f9bf4e949a20e0b04f088e44b0df626" kindref="member">smc_f</ref><sp/>*</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ae30f9f1f5cee87bc25dc7a169ed299cc" kindref="member">ialpha_mem</ref><sp/>+<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aaa852984361d1323994962a71e2c04e3" kindref="member">smc_g</ref><sp/>*</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ualpha<sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1aeee2f5094cc093dac1af308ab505dad0" kindref="member">alpha_cal</ref><sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a08a1224c3b5938ef4d7208d05eb6dbc0" kindref="member">zalpha_cal</ref>);</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a9de8147eb415d59969d3bb76be78b8ad" kindref="member">ibeta_mem</ref><sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a6f9bf4e949a20e0b04f088e44b0df626" kindref="member">smc_f</ref><sp/>*</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a9de8147eb415d59969d3bb76be78b8ad" kindref="member">ibeta_mem</ref><sp/>+<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aaa852984361d1323994962a71e2c04e3" kindref="member">smc_g</ref><sp/>*</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ubeta<sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ad9b524791c6d5d3e55372fe94f542df3" kindref="member">beta_cal</ref><sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a3f2be1e2b6b3c043403fca5b74c58eb2" kindref="member">zbeta_cal</ref>);</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/>alhpa_err<sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ae30f9f1f5cee87bc25dc7a169ed299cc" kindref="member">ialpha_mem</ref><sp/>-<sp/>ialpha;</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>beta_err<sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a9de8147eb415d59969d3bb76be78b8ad" kindref="member">ibeta_mem</ref><sp/>-<sp/>ibeta;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fabs(alhpa_err)<sp/>&lt;<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aed579432d79414977de0849c71c0735b" kindref="member">zero</ref>)<sp/>{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a08a1224c3b5938ef4d7208d05eb6dbc0" kindref="member">zalpha_cal</ref><sp/>=<sp/>2<sp/>*<sp/>alhpa_err<sp/>*<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alhpa_err<sp/>&gt;=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aed579432d79414977de0849c71c0735b" kindref="member">zero</ref>)<sp/>{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a08a1224c3b5938ef4d7208d05eb6dbc0" kindref="member">zalpha_cal</ref><sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(alhpa_err<sp/>&lt;=<sp/>-smc_cfg-&gt;cfg.factor.zero)<sp/>{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a08a1224c3b5938ef4d7208d05eb6dbc0" kindref="member">zalpha_cal</ref><sp/>=<sp/>-smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fabs(beta_err)<sp/>&lt;<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aed579432d79414977de0849c71c0735b" kindref="member">zero</ref>)<sp/>{</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a3f2be1e2b6b3c043403fca5b74c58eb2" kindref="member">zbeta_cal</ref><sp/>=<sp/>2<sp/>*<sp/>alhpa_err<sp/>*<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beta_err<sp/>&gt;=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1aed579432d79414977de0849c71c0735b" kindref="member">zero</ref>)<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a3f2be1e2b6b3c043403fca5b74c58eb2" kindref="member">zbeta_cal</ref><sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(beta_err<sp/>&lt;=<sp/>-smc_cfg-&gt;cfg.factor.zero)<sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a3f2be1e2b6b3c043403fca5b74c58eb2" kindref="member">zbeta_cal</ref><sp/>=<sp/>-smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1a25b74f01f497b70d707706e6c95cef45" kindref="member">ksmc</ref>;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1aeee2f5094cc093dac1af308ab505dad0" kindref="member">alpha_cal</ref><sp/>=<sp/>(1<sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1abd473088788ea3790b479adbf8545da1" kindref="member">filter_coeff</ref>)<sp/>*</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1aeee2f5094cc093dac1af308ab505dad0" kindref="member">alpha_cal</ref><sp/>+<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1abd473088788ea3790b479adbf8545da1" kindref="member">filter_coeff</ref><sp/>*</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a08a1224c3b5938ef4d7208d05eb6dbc0" kindref="member">zalpha_cal</ref>;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ad9b524791c6d5d3e55372fe94f542df3" kindref="member">beta_cal</ref><sp/>=<sp/>(1<sp/>-<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1abd473088788ea3790b479adbf8545da1" kindref="member">filter_coeff</ref>)<sp/>*</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ad9b524791c6d5d3e55372fe94f542df3" kindref="member">beta_cal</ref><sp/>+<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1abe0e46c4bd465ac24b00641eb623bf27" kindref="member">factor</ref>.<ref refid="structmcl__control__smc__cfg__t_1abd473088788ea3790b479adbf8545da1" kindref="member">filter_coeff</ref><sp/>*</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a3f2be1e2b6b3c043403fca5b74c58eb2" kindref="member">zbeta_cal</ref>;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/>ref<sp/>=<sp/>-smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1aeee2f5094cc093dac1af308ab505dad0" kindref="member">alpha_cal</ref><sp/>*<sp/>cosf(smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref>);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>sens<sp/>=<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1ad9b524791c6d5d3e55372fe94f542df3" kindref="member">beta_cal</ref><sp/>*<sp/>sinf(smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref>);</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>(ref,<sp/>sens,<sp/>&amp;smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a10486cb3f14cc231ea4df09eb3dab348" kindref="member">pll</ref>,<sp/>&amp;speed);</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref><sp/>+=<sp/>speed<sp/>*<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a683990836512dfda4915651668a9ec20" kindref="member">const_data</ref>.<ref refid="structmcl__control__smc__cfg__t_1acab685cd0e92d0248c827a3c2cffa929" kindref="member">loop_ts</ref>;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref><sp/>=<sp/><ref refid="hpm__mcl__common_8h_1a2d3879a27c6198a449b63fcbbbbd9496" kindref="member">MCL_ANGLE_MOD_X</ref>(0,<sp/><ref refid="hpm__mcl__common_8h_1a6fce632c323de12d2a5a9cbe15534e69" kindref="member">MCL_2PI</ref>,<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref>);</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1abc42abc3675edf67a4073ae79f331338" kindref="member">theta</ref><sp/>=<sp/><ref refid="hpm__mcl__common_8h_1a2d3879a27c6198a449b63fcbbbbd9496" kindref="member">MCL_ANGLE_MOD_X</ref>(0,<sp/><ref refid="hpm__mcl__common_8h_1a6fce632c323de12d2a5a9cbe15534e69" kindref="member">MCL_2PI</ref>,<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a5d696836571424522a4d6c6fa57643bc" kindref="member">theta_mem</ref><sp/>+<sp/>smc_cfg-&gt;<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a3ae86e1cd5c5a10c959034f1a60c6f00" kindref="member">theta0</ref>);</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal">}</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a82b6227c01040c551206748da75169cb" kindref="member">hpm_mcl_control_offline_param_detection_rs</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ialpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ibeta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*ud,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*uq)</highlight></codeline>
<codeline lineno="360"><highlight class="normal">{</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>is;</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/>*uq<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/>is<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(ialpha,<sp/>ibeta);</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is<sp/>&gt;=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1aee4b3b4f5969116088e2f1c3aec6310a" kindref="member">current_half_rated</ref>)<sp/>{</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a1c4bc68bb4a2ea58e6e50655765c6da9" kindref="member">rs</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a77eaa01c22b24158af498745a64c26bc" kindref="member">rs</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a6ddc2b3220e2e35507603af7e4eb70a6" kindref="member">ud_mem</ref><sp/>/<sp/>is;</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a77eaa01c22b24158af498745a64c26bc" kindref="member">rs</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a6ddc2b3220e2e35507603af7e4eb70a6" kindref="member">ud_mem</ref><sp/>+=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a2214117978b2cb5f53678b7024ce9cd3" kindref="member">ud_delta</ref>;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ud<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a77eaa01c22b24158af498745a64c26bc" kindref="member">rs</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a6ddc2b3220e2e35507603af7e4eb70a6" kindref="member">ud_mem</ref>;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*ud<sp/>&gt;<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref>)<sp/>{</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1ad04f400eb51c1d0d44cf37ab04555204" kindref="member">mcl_running</ref>;</highlight></codeline>
<codeline lineno="377"><highlight class="normal">}</highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a0929f0daa5d559fb6784e1c56ed99506" kindref="member">hpm_mcl_control_offline_param_detection_ld</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ialpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ibeta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*ud,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*uq)</highlight></codeline>
<codeline lineno="380"><highlight class="normal">{</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>is;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/>*uq<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/>*ud<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref>;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a2a625b3fa4e0f1b9c0b8d2d9dbdbde11" kindref="member">ls</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a85acd94a724d3b696e645ba59c7bbe76" kindref="member">is_last</ref><sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(ialpha,<sp/>ibeta);</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref>++;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>&gt;<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1abc3a5560dd0d37306dd69f154ff1da94" kindref="member">inductor_detection_times</ref>)<sp/>{</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(ialpha,<sp/>ibeta);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__mcl__math_8h_1ad3c8f7ca59f915b889ad9f6c913f165b" kindref="member">MCL_FLOAT_IS_ZERO</ref>(is<sp/>-<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a2a625b3fa4e0f1b9c0b8d2d9dbdbde11" kindref="member">ls</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a85acd94a724d3b696e645ba59c7bbe76" kindref="member">is_last</ref>))<sp/>{</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>;</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a58d38d6bb1b9ef4f37d99f9b639cd7e7" kindref="member">ld</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref><sp/>/<sp/>2<sp/>/<sp/>((is<sp/>-<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a2a625b3fa4e0f1b9c0b8d2d9dbdbde11" kindref="member">ls</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a85acd94a724d3b696e645ba59c7bbe76" kindref="member">is_last</ref>)<sp/>/</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1abc3a5560dd0d37306dd69f154ff1da94" kindref="member">inductor_detection_times</ref><sp/>-<sp/>1)<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a79965123cf87220cb65baf64e7a1af76" kindref="member">detection_loop_ts</ref>));</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1ad04f400eb51c1d0d44cf37ab04555204" kindref="member">mcl_running</ref>;</highlight></codeline>
<codeline lineno="402"><highlight class="normal">}</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a092a4c5c7263aa81d6dbd643e4a09d8a" kindref="member">hpm_mcl_control_offline_param_detection_lq</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ialpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ibeta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*ud,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*uq)</highlight></codeline>
<codeline lineno="405"><highlight class="normal">{</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>is;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/>*ud<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/>*uq<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref>;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a2a625b3fa4e0f1b9c0b8d2d9dbdbde11" kindref="member">ls</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a85acd94a724d3b696e645ba59c7bbe76" kindref="member">is_last</ref><sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(ialpha,<sp/>ibeta);</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref>++;</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>&gt;<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1abc3a5560dd0d37306dd69f154ff1da94" kindref="member">inductor_detection_times</ref>)<sp/>{</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(ialpha,<sp/>ibeta);</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1ac3b47283b82ee67acf1e3e614078609c" kindref="member">lq</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref><sp/>/<sp/>2<sp/>/<sp/>((is<sp/>-<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a2a625b3fa4e0f1b9c0b8d2d9dbdbde11" kindref="member">ls</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a85acd94a724d3b696e645ba59c7bbe76" kindref="member">is_last</ref>)<sp/>/</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1abc3a5560dd0d37306dd69f154ff1da94" kindref="member">inductor_detection_times</ref><sp/>-<sp/>1)<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a79965123cf87220cb65baf64e7a1af76" kindref="member">detection_loop_ts</ref>));</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1ad04f400eb51c1d0d44cf37ab04555204" kindref="member">mcl_running</ref>;</highlight></codeline>
<codeline lineno="424"><highlight class="normal">}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1afa8322e3055d0bfed528e12f860ad0e6" kindref="member">hpm_mcl_control_offline_param_detection_ls</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection)</highlight></codeline>
<codeline lineno="427"><highlight class="normal">{</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a606d9a1b41927ffa7970f1ccc21d7e78" kindref="member">ls</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a58d38d6bb1b9ef4f37d99f9b639cd7e7" kindref="member">ld</ref><sp/>+<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1ac3b47283b82ee67acf1e3e614078609c" kindref="member">lq</ref>;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="431"><highlight class="normal">}</highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a7817c0ee134ce2c78aed2c001d88994a" kindref="member">hpm_mcl_control_offline_param_detection_flux</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ialpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ibeta,</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ualpha,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>ubeta,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*ref_d,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*ref_q)</highlight></codeline>
<codeline lineno="435"><highlight class="normal">{</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>alpha,<sp/>beta,<sp/>flux;</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/>*ref_d<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>*ref_q<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a7fe56ccf9714847884f8fdccab8689ba" kindref="member">vbus</ref>;</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref>++;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a0e93980a2732ed2527197be5e7c8d1da" kindref="member">val0_mem</ref><sp/>+=<sp/>(ualpha<sp/>-<sp/>ialpha<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a1c4bc68bb4a2ea58e6e50655765c6da9" kindref="member">rs</ref>)<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a79965123cf87220cb65baf64e7a1af76" kindref="member">detection_loop_ts</ref>;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1aa6aae975f171df0cf78237a45257e076" kindref="member">val1_mem</ref><sp/>+=<sp/>(ubeta<sp/>-<sp/>ibeta<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a1c4bc68bb4a2ea58e6e50655765c6da9" kindref="member">rs</ref>)<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a79965123cf87220cb65baf64e7a1af76" kindref="member">detection_loop_ts</ref>;</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>alpha<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a0e93980a2732ed2527197be5e7c8d1da" kindref="member">val0_mem</ref><sp/>-<sp/>(ialpha<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a606d9a1b41927ffa7970f1ccc21d7e78" kindref="member">ls</ref>);</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/>beta<sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1aa6aae975f171df0cf78237a45257e076" kindref="member">val1_mem</ref><sp/>-<sp/>(ibeta<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a606d9a1b41927ffa7970f1ccc21d7e78" kindref="member">ls</ref>);</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>flux<sp/>=<sp/><ref refid="hpm__mcl__math_8h_1a308541ba8a72e96eec685a2939b29dc5" kindref="member">MCL_SUM_OF_SQUARE_MODE</ref>(alpha,<sp/>beta);</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a166557b32c08b793a0504314cf320efd" kindref="member">val_filter</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a166557b32c08b793a0504314cf320efd" kindref="member">val_filter</ref><sp/>*<sp/>(1<sp/>-<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a5ffa0b8e66f337c52eab99bdb4b3cfd1" kindref="member">lowpass_k</ref>)<sp/>+</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flux<sp/>*<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a5ffa0b8e66f337c52eab99bdb4b3cfd1" kindref="member">lowpass_k</ref>;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a166557b32c08b793a0504314cf320efd" kindref="member">val_filter</ref><sp/>&gt;<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a35236fba40059a4a7e7890f50f650746" kindref="member">val_filter_mem</ref>)<sp/>{</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a35236fba40059a4a7e7890f50f650746" kindref="member">val_filter_mem</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a166557b32c08b793a0504314cf320efd" kindref="member">val_filter</ref>;</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>&gt;<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1acea1599a02954993cf0f5a0f7fb3231b" kindref="member">cfg</ref>.<ref refid="structmcl__control__offline__param__detection__cfg__t_1a28b7beb9d4ab1d1a807ee0b7dce5a1a9" kindref="member">flux_detection_times</ref>)<sp/>{</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a64b238c8e73abb3b876626c13c050f6b" kindref="member">flux</ref><sp/>=<sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a35236fba40059a4a7e7890f50f650746" kindref="member">val_filter_mem</ref>;</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1ad04f400eb51c1d0d44cf37ab04555204" kindref="member">mcl_running</ref>;</highlight></codeline>
<codeline lineno="457"><highlight class="normal">}</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1ac99d062321c4d9458be17e1966f08b15" kindref="member">hpm_mcl_control_detection_init</ref>(<ref refid="structmcl__control__offline__param__detection__t" kindref="compound">mcl_control_offline_param_detection_t</ref><sp/>*detection)</highlight></codeline>
<codeline lineno="460"><highlight class="normal">{</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(detection<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a64b238c8e73abb3b876626c13c050f6b" kindref="member">flux</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a58d38d6bb1b9ef4f37d99f9b639cd7e7" kindref="member">ld</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1ac3b47283b82ee67acf1e3e614078609c" kindref="member">lq</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a1c4bc68bb4a2ea58e6e50655765c6da9" kindref="member">rs</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1aebfbe8ba7284d1c45d1553db1ec9fc50" kindref="member">result</ref>.<ref refid="structmcl__offline__param__detection__result__t_1a606d9a1b41927ffa7970f1ccc21d7e78" kindref="member">ls</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a0e93980a2732ed2527197be5e7c8d1da" kindref="member">val0_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1aa6aae975f171df0cf78237a45257e076" kindref="member">val1_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a166557b32c08b793a0504314cf320efd" kindref="member">val_filter</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a220e41239af8fe0e76d1f65e270d69d3" kindref="member">flux</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a35236fba40059a4a7e7890f50f650746" kindref="member">val_filter_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1ae56692564f534e33de34d06643cb8878" kindref="member">tick_count</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/>detection-&gt;<ref refid="structmcl__control__offline__param__detection__t_1a77eaa01c22b24158af498745a64c26bc" kindref="member">rs</ref>.<ref refid="structmcl__control__offline__param__detection__t_1a6ddc2b3220e2e35507603af7e4eb70a6" kindref="member">ud_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="476"><highlight class="normal">}</highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1ae9a162eee97e535cfb0009e8ca5eace0" kindref="member">hpm_mcl_pid_to_3p3z</ref>(<ref refid="structmcl__control__pid__cfg__t" kindref="compound">mcl_control_pid_cfg_t</ref><sp/>*cfg_pid,<sp/><ref refid="structmcl__clc__coeff__cfg__t" kindref="compound">mcl_clc_coeff_cfg_t</ref><sp/>*cfg_3p3z)</highlight></codeline>
<codeline lineno="479"><highlight class="normal">{</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a34680410afd6e8b286c011fa87ae0ac7" kindref="member">a0</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a9c9d50e05765daa5d139ddd766e3b7b0" kindref="member">a1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a63603893b01b4c4ec9a24bc29ff5fa0f" kindref="member">b0</ref><sp/>=<sp/>cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1afa3fc5569e20165c08a3c2dcf6aad484" kindref="member">kp</ref><sp/>+<sp/>cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1ae966118fd3c63526bfc08ecc47772dfa" kindref="member">ki</ref><sp/>+<sp/>cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1a580553907a542b72263e7c8385ddb8ab" kindref="member">kd</ref>;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a585a6f858e57f98c0b74ef02c1fd76a0" kindref="member">b1</ref><sp/>=<sp/>-(cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1afa3fc5569e20165c08a3c2dcf6aad484" kindref="member">kp</ref><sp/>+<sp/>2<sp/>*<sp/>cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1a580553907a542b72263e7c8385ddb8ab" kindref="member">kd</ref>);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1ae756ea5ebff27b755446e0ee64280ba7" kindref="member">b2</ref><sp/>=<sp/>cfg_pid-&gt;<ref refid="structmcl__control__pid__cfg__t_1a580553907a542b72263e7c8385ddb8ab" kindref="member">kd</ref>;</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a2735792a5aae87cc3beb80494833dcfb" kindref="member">b3</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/>cfg_3p3z-&gt;<ref refid="structmcl__clc__coeff__cfg__t_1a30599d2220b8e1d6963809ec5765551b" kindref="member">a2</ref><sp/>=<sp/>0.999999f;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="495"><highlight class="normal">}</highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1acd8ced301aebbfa79203b9eb616942f6" kindref="member">hpm_mcl_delta_pid</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>setpoint,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>feedback,<sp/><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref><sp/>*pid_x,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*output)</highlight></codeline>
<codeline lineno="498"><highlight class="normal">{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>the<sp/>output<sp/>pointer<sp/>is<sp/>NULL,<sp/>which<sp/>is<sp/>required<sp/>for<sp/>the<sp/>function<sp/>to<sp/>operate.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(output<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Calculate<sp/>the<sp/>error<sp/>between<sp/>the<sp/>setpoint<sp/>and<sp/>feedback<sp/>values.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>setpoint<sp/>-<sp/>feedback;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Calculate<sp/>the<sp/>PID<sp/>controller<sp/>output<sp/>value<sp/>including<sp/>the<sp/>P,<sp/>I,<sp/>and<sp/>D<sp/>terms.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1afa3fc5569e20165c08a3c2dcf6aad484" kindref="member">kp</ref><sp/>*<sp/>(err<sp/>-<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref>)<sp/>+<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1ae966118fd3c63526bfc08ecc47772dfa" kindref="member">ki</ref><sp/>*<sp/>err<sp/>+</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a580553907a542b72263e7c8385ddb8ab" kindref="member">kd</ref><sp/>*<sp/>(err<sp/>-<sp/>2.0f<sp/>*<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref><sp/>+<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a26fca7ddaa257188874ebc932df82d18" kindref="member">error_n2</ref>);</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Accumulate<sp/>the<sp/>integral<sp/>term<sp/>to<sp/>eliminate<sp/>steady-state<sp/>error.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>+=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref>;</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Limit<sp/>the<sp/>output<sp/>value<sp/>to<sp/>ensure<sp/>it<sp/>does<sp/>not<sp/>exceed<sp/>the<sp/>configured<sp/>output<sp/>range.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(val,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1af1844dcc8bfb77310a5ee5b0617b96c4" kindref="member">output_min</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a99e499ec651f04c5f32e1b5e776e2136" kindref="member">output_max</ref>);</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>the<sp/>error<sp/>values<sp/>for<sp/>the<sp/>next<sp/>computation.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref><sp/>=<sp/>err;</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a26fca7ddaa257188874ebc932df82d18" kindref="member">error_n2</ref><sp/>=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref>;</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>the<sp/>calculated<sp/>output<sp/>value<sp/>in<sp/>the<sp/>output<sp/>variable.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/>*output<sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="522"><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="524"><highlight class="normal">}</highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1ab2e17529888204fa31e5adc963f5f340" kindref="member">hpm_mcl_position_pid</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>setpoint,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>feedback,<sp/><ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref><sp/>*pid_x,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*output)</highlight></codeline>
<codeline lineno="527"><highlight class="normal">{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>val;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>the<sp/>output<sp/>pointer<sp/>is<sp/>NULL,<sp/>which<sp/>is<sp/>required<sp/>for<sp/>the<sp/>function<sp/>to<sp/>operate.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a7987628a9f9662f4891f49c739314062" kindref="member">MCL_ASSERT_OPT</ref>(output<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Calculate<sp/>the<sp/>error<sp/>between<sp/>the<sp/>setpoint<sp/>and<sp/>feedback<sp/>values.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/>err<sp/>=<sp/>setpoint<sp/>-<sp/>feedback;</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Integral<sp/>term,<sp/>accumulates<sp/>the<sp/>error<sp/>to<sp/>reduce<sp/>steady-state<sp/>error<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>+=<sp/>err;</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Limit<sp/>the<sp/>integral<sp/>term<sp/>within<sp/>a<sp/>reasonable<sp/>range<sp/>to<sp/>avoid<sp/>integral<sp/>windup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1aaca77d4ce3940f6eb7a5bb42c79b85a7" kindref="member">integral_min</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a25f80da6d2ab4efbd6ecd901a0c40e2b" kindref="member">integral_max</ref>);</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Calculate<sp/>the<sp/>PID<sp/>output<sp/>value,<sp/>including<sp/>proportional,<sp/>integral,<sp/>and<sp/>derivative<sp/>terms<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/>val<sp/>=<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1afa3fc5569e20165c08a3c2dcf6aad484" kindref="member">kp</ref><sp/>*<sp/>err<sp/>+<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1ae966118fd3c63526bfc08ecc47772dfa" kindref="member">ki</ref><sp/>*<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>+<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a580553907a542b72263e7c8385ddb8ab" kindref="member">kd</ref><sp/>*<sp/>(err<sp/>-<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref>);</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Limit<sp/>the<sp/>output<sp/>value<sp/>within<sp/>the<sp/>configured<sp/>minimum<sp/>and<sp/>maximum<sp/>output<sp/>range<sp/>to<sp/>ensure<sp/>safety<sp/>and<sp/>effectiveness<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a0d2fe1fc9ff86004a80c3d2d0d04dc97" kindref="member">MCL_VALUE_LIMIT</ref>(val,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1af1844dcc8bfb77310a5ee5b0617b96c4" kindref="member">output_min</ref>,<sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a75bcfffb870b85f66ec818f8b64115ce" kindref="member">cfg</ref>.<ref refid="structmcl__control__pid__cfg__t_1a99e499ec651f04c5f32e1b5e776e2136" kindref="member">output_max</ref>);</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>the<sp/>previous<sp/>error<sp/>for<sp/>the<sp/>next<sp/>derivative<sp/>calculation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref><sp/>=<sp/>err;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Assign<sp/>the<sp/>calculated<sp/>output<sp/>value<sp/>to<sp/>the<sp/>output<sp/>parameter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>*output<sp/>=<sp/>val;</highlight></codeline>
<codeline lineno="547"><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="549"><highlight class="normal">}</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" kindref="member">hpm_mcl_pid_init</ref>(<ref refid="structmcl__control__pid__t" kindref="compound">mcl_control_pid_t</ref><sp/>*pid_x)</highlight></codeline>
<codeline lineno="552"><highlight class="normal">{</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(pid_x<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>previous<sp/>and<sp/>pre-previous<sp/>errors<sp/>to<sp/>zero.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a938bfdf4c69d0b91fde5eed08d91284d" kindref="member">error_n1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a26fca7ddaa257188874ebc932df82d18" kindref="member">error_n2</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>integral<sp/>term<sp/>to<sp/>zero<sp/>to<sp/>eliminate<sp/>any<sp/>existing<sp/>integral<sp/>error.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/>pid_x-&gt;<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="561"><highlight class="normal">}</highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><ref refid="hpm__mcl__common_8h_1a572fcb9d78561a8859565bac839c49b1" kindref="member">hpm_mcl_stat_t</ref><sp/><ref refid="hpm__mcl__control_8c_1ac5ad3b4585f403299ae01f45d207c4be" kindref="member">hpm_mcl_control_init</ref>(<ref refid="structmcl__control__t" kindref="compound">mcl_control_t</ref><sp/>*control,<sp/><ref refid="structmcl__control__cfg__t" kindref="compound">mcl_control_cfg_t</ref><sp/>*cfg)</highlight></codeline>
<codeline lineno="564"><highlight class="normal">{</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(control<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(cfg<sp/>!=<sp/>NULL,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a6f9d895ded2188352dee8b236c5e3c37" kindref="member">mcl_invalid_pointer</ref>);</highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref><sp/>=<sp/>cfg;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(<ref refid="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" kindref="member">hpm_mcl_pid_init</ref>(&amp;control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a5ade6933a05a1010c9124b8690f3240d" kindref="member">currentd_pid_cfg</ref>)<sp/>==<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>);</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(<ref refid="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" kindref="member">hpm_mcl_pid_init</ref>(&amp;control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a86d8f95b8712bc1215ad90a0db0e242b" kindref="member">currentq_pid_cfg</ref>)<sp/>==<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>);</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(<ref refid="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" kindref="member">hpm_mcl_pid_init</ref>(&amp;control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1af1b24c35e587d47498a973bc196bf99e" kindref="member">position_pid_cfg</ref>)<sp/>==<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>);</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a64c8542a95d705232b451f0a128a0a35" kindref="member">MCL_ASSERT</ref>(<ref refid="hpm__mcl__control_8c_1a1e92c82c6637aa4d2f8a8896a6e16bca" kindref="member">hpm_mcl_pid_init</ref>(&amp;control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a042076c98233dff462e33c15435003a9" kindref="member">speed_pid_cfg</ref>)<sp/>==<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>,<sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1a4ca0aba09b0cbf341e61c096cfafeb4c" kindref="member">mcl_fail</ref>);</highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a3193f21963c117e50195a44a5f1838a6" kindref="member">dead_area_compensation_cfg</ref>.<ref refid="structmcl__control__dead__area__compensation__t_1abf10c804e75a5c6a11ace86cadcf366e" kindref="member">d_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a3193f21963c117e50195a44a5f1838a6" kindref="member">dead_area_compensation_cfg</ref>.<ref refid="structmcl__control__dead__area__compensation__t_1acaa71caaedcaa3e1ac134f18d125e056" kindref="member">q_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a8dc09de9e91d6b80c1a8714a5aa9c5b2" kindref="member">smc_cfg</ref>.<ref refid="structmcl__control__smc__t_1ae30f9f1f5cee87bc25dc7a169ed299cc" kindref="member">ialpha_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a8dc09de9e91d6b80c1a8714a5aa9c5b2" kindref="member">smc_cfg</ref>.<ref refid="structmcl__control__smc__t_1a9de8147eb415d59969d3bb76be78b8ad" kindref="member">ibeta_mem</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a8dc09de9e91d6b80c1a8714a5aa9c5b2" kindref="member">smc_cfg</ref>.<ref refid="structmcl__control__smc__t_1a4d0fffcdceac029951ff31bc9e3fda04" kindref="member">cfg</ref>.<ref refid="structmcl__control__smc__cfg__t_1a10486cb3f14cc231ea4df09eb3dab348" kindref="member">pll</ref>.<ref refid="structmcl__control__pid__t_1a2b9de3168f37ccf120644b4c755958af" kindref="member">integral</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="583"><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1afa22651ef34b99f12ef1237a25659327" kindref="member">arctan_x</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a4a47b8d6f48b4b5d674250bc92200630" kindref="member">hpm_mcl_control_arctan</ref>;</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2d6882a25e5fb080bfc1565e55d748dc" kindref="member">clarke</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1ac8498b3ed22bd88368f0be757d70d83d" kindref="member">hpm_mcl_control_clarke</ref>;</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9e5d2dc896f78e9dc771dcb8871f756b" kindref="member">cos_x</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a9eed8b13d0fe7d33d27a316c00bf5e1b" kindref="member">hpm_mcl_control_cos</ref>;</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a08c799eb2ac0d3b6f873f9e457d6148e" kindref="member">currentd_pid</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>;</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a44f9eff2dd406030e61edd98a9523a29" kindref="member">currentq_pid</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>;</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a0634a83c6ca32a34dc7fd57be374c841" kindref="member">invpark</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a0cabfa5f4552500da32d846b1b3b6b81" kindref="member">hpm_mcl_control_inv_park</ref>;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a930059d5713310ee764cb3f830a58425" kindref="member">park</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a01da966f300642cb6ac7e6804ad8c634" kindref="member">hpm_mcl_control_park</ref>;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a053b4661b03ca9911388a272507f9b56" kindref="member">position_pid</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2301830c765e490a2dc7698843dea9a1" kindref="member">sin_x</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1af15b6aafc29d742ba76eb172b1e78e1e" kindref="member">hpm_mcl_control_sin</ref>;</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aebfd1670b1135cc3b7ce64646fee2d01" kindref="member">speed_pid</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a10d274023589a13d90b0d81d7e7c5ce4" kindref="member">hpm_mcl_control_pi</ref>;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa27f32d0fd5d4e494d03fac5c8ecb1d8" kindref="member">svpwm</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a609133c55635515e61fa49f43fb809a2" kindref="member">hpm_mcl_control_svpwm</ref>;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a6e5a4f493c5f0ed958e68544e7bc2be5" kindref="member">step_svpwm</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a01a9191032b7ee3d3f90e64a1a7dc34b" kindref="member">hpm_mcl_control_step_svpwm</ref>;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa647bacb8247ff7553dc3ef50403fc32" kindref="member">get_block_sector</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1aa7987101435cf854990afd69c05cf98b" kindref="member">hpm_mcl_control_get_block_sector</ref>;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a1f1446fb373ddaa7d23a1aba7e170f78" kindref="member">dead_area_polarity_detection</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a10b660cbdcbdce5810505826631b3294" kindref="member">hpm_mcl_control_dead_area_polarity_detection</ref>;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af350ecf86d646b068073ad835634c48b" kindref="member">smc_init</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a62798bfab381ef9dcdd7c81e9b6849c1" kindref="member">hpm_mcl_control_smc_init</ref>;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af843d8c7defb92ab21e87fff9d2ae248" kindref="member">smc_process</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1ab2ce88265e3ee34eb6856db36b630206" kindref="member">hpm_mcl_control_smc_process</ref>;</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a797cdcdccdbabfd32ae8ab77cb8a2e15" kindref="member">offline_param_detection_flux</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a7817c0ee134ce2c78aed2c001d88994a" kindref="member">hpm_mcl_control_offline_param_detection_flux</ref>;</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a95b325d0a7cbad5fe04207ecfed9d214" kindref="member">offline_param_detection_ld</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a0929f0daa5d559fb6784e1c56ed99506" kindref="member">hpm_mcl_control_offline_param_detection_ld</ref>;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9d642bb55696e10417f32e47e57c78c5" kindref="member">offline_param_detection_lq</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a092a4c5c7263aa81d6dbd643e4a09d8a" kindref="member">hpm_mcl_control_offline_param_detection_lq</ref>;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa810e04be2430f1be2957823638aa27e" kindref="member">offline_param_detection_rs</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1a82b6227c01040c551206748da75169cb" kindref="member">hpm_mcl_control_offline_param_detection_rs</ref>;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a60b9d93a876eb27d48fd4cba9f90b426" kindref="member">offline_param_detection_ls</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1afa8322e3055d0bfed528e12f860ad0e6" kindref="member">hpm_mcl_control_offline_param_detection_ls</ref>;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1ac9eeebb20288d6703eba99ebcbf0876e" kindref="member">offline_param_detection_init</ref><sp/>=<sp/>&amp;<ref refid="hpm__mcl__control_8c_1ac99d062321c4d9458be17e1966f08b15" kindref="member">hpm_mcl_control_detection_init</ref>;</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1afa22651ef34b99f12ef1237a25659327" kindref="member">arctan_x</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1afa22651ef34b99f12ef1237a25659327" kindref="member">arctan_x</ref>);</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2d6882a25e5fb080bfc1565e55d748dc" kindref="member">clarke</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2d6882a25e5fb080bfc1565e55d748dc" kindref="member">clarke</ref>);</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9e5d2dc896f78e9dc771dcb8871f756b" kindref="member">cos_x</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9e5d2dc896f78e9dc771dcb8871f756b" kindref="member">cos_x</ref>);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a08c799eb2ac0d3b6f873f9e457d6148e" kindref="member">currentd_pid</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a08c799eb2ac0d3b6f873f9e457d6148e" kindref="member">currentd_pid</ref>);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a0634a83c6ca32a34dc7fd57be374c841" kindref="member">invpark</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a0634a83c6ca32a34dc7fd57be374c841" kindref="member">invpark</ref>);</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a930059d5713310ee764cb3f830a58425" kindref="member">park</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a930059d5713310ee764cb3f830a58425" kindref="member">park</ref>);</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a053b4661b03ca9911388a272507f9b56" kindref="member">position_pid</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a053b4661b03ca9911388a272507f9b56" kindref="member">position_pid</ref>);</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2301830c765e490a2dc7698843dea9a1" kindref="member">sin_x</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a2301830c765e490a2dc7698843dea9a1" kindref="member">sin_x</ref>);</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aebfd1670b1135cc3b7ce64646fee2d01" kindref="member">speed_pid</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aebfd1670b1135cc3b7ce64646fee2d01" kindref="member">speed_pid</ref>);</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa27f32d0fd5d4e494d03fac5c8ecb1d8" kindref="member">svpwm</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa27f32d0fd5d4e494d03fac5c8ecb1d8" kindref="member">svpwm</ref>);</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a6e5a4f493c5f0ed958e68544e7bc2be5" kindref="member">step_svpwm</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a6e5a4f493c5f0ed958e68544e7bc2be5" kindref="member">step_svpwm</ref>);</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa647bacb8247ff7553dc3ef50403fc32" kindref="member">get_block_sector</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa647bacb8247ff7553dc3ef50403fc32" kindref="member">get_block_sector</ref>);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a1f1446fb373ddaa7d23a1aba7e170f78" kindref="member">dead_area_polarity_detection</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a1f1446fb373ddaa7d23a1aba7e170f78" kindref="member">dead_area_polarity_detection</ref>);</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af350ecf86d646b068073ad835634c48b" kindref="member">smc_init</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af350ecf86d646b068073ad835634c48b" kindref="member">smc_init</ref>);</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af843d8c7defb92ab21e87fff9d2ae248" kindref="member">smc_process</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1af843d8c7defb92ab21e87fff9d2ae248" kindref="member">smc_process</ref>);</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa810e04be2430f1be2957823638aa27e" kindref="member">offline_param_detection_rs</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1aa810e04be2430f1be2957823638aa27e" kindref="member">offline_param_detection_rs</ref>);</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a60b9d93a876eb27d48fd4cba9f90b426" kindref="member">offline_param_detection_ls</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a60b9d93a876eb27d48fd4cba9f90b426" kindref="member">offline_param_detection_ls</ref>);</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a95b325d0a7cbad5fe04207ecfed9d214" kindref="member">offline_param_detection_ld</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a95b325d0a7cbad5fe04207ecfed9d214" kindref="member">offline_param_detection_ld</ref>);</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9d642bb55696e10417f32e47e57c78c5" kindref="member">offline_param_detection_lq</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a9d642bb55696e10417f32e47e57c78c5" kindref="member">offline_param_detection_lq</ref>);</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a797cdcdccdbabfd32ae8ab77cb8a2e15" kindref="member">offline_param_detection_flux</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1a797cdcdccdbabfd32ae8ab77cb8a2e15" kindref="member">offline_param_detection_flux</ref>);</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__mcl__common_8h_1a6491f08fe299b76aa68b50a083e644de" kindref="member">MCL_FUNCTION_INIT_IF_NO_EMPTY</ref>(control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1ac9eeebb20288d6703eba99ebcbf0876e" kindref="member">offline_param_detection_init</ref>,<sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1af6becc68757e968f656efc56deb77613" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1ac9eeebb20288d6703eba99ebcbf0876e" kindref="member">offline_param_detection_init</ref>);</highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a463cc5c16ae0d3a24397f6c494bda9ad" kindref="member">method</ref>.<ref refid="structmcl__control__method__t_1ac9eeebb20288d6703eba99ebcbf0876e" kindref="member">offline_param_detection_init</ref>(&amp;control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1a75a1a341950f075c549b07d4cc30ace0" kindref="member">offline_param_detection_cfg</ref>);</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>control-&gt;<ref refid="structmcl__control__t_1a27fb33bf24038f44f8cd73d7353f8135" kindref="member">cfg</ref>-&gt;<ref refid="structmcl__control__cfg__t_1ac5ceb57205cf34579b46a6b6d283a60e" kindref="member">callback</ref>.<ref refid="structmcl__control__callback__t_1a948fc2771af93b86a2269ac6fe4ca06b" kindref="member">init</ref>();</highlight></codeline>
<codeline lineno="634"><highlight class="normal"></highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__mcl__common_8h_1afe265cd19c5ca0690fdd800fe57288c1abc4f3cbeacf07a9c01bca3ddb79e79dd" kindref="member">mcl_success</ref>;</highlight></codeline>
<codeline lineno="636"><highlight class="normal">}</highlight></codeline>
<codeline lineno="637"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="middleware/hpm_mcl_v2/core/control/hpm_mcl_control.c"/>
  </compounddef>
</doxygen>
