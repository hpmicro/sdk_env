.. _acmp:

ACMP
========

概述
------

模拟比较器示例工程展示了使用模拟比较器比较外部输入电压与内部DAC输出电压的功能。在这个工程中， 模拟比较器MIN信号通过pin脚连接外部输入的模拟电压， PIN信号连接内部DAC输出电压， 程序逐步增加DAC的输出电压直到DAC的输出电压高于MIN信号上连接的外部输入电压，此时模拟比较器的输出电平会发生翻转。

注：

当模拟比较器输出翻转后，MCU停止调节DAC输出。此时输入端电压与DAC输出电压非常接近，受噪声的影响，模拟比较器输出可能会出现随机翻转的现象

硬件设置
------------

请参考具体开发板  :ref:`引脚描述 <board_resource>`  部分的描述。

1. 连接外部输入信号到模拟比较器的MIN pin脚
2. 连接模拟比较器的输出pin脚到示波器或者万用表

注：

1. ACMP管脚输入电压范围：0~VCC
2. 请确保开发板未连接任何未供电的扩展板

运行现象
------------

当工程正确运行后，每间隔1s，ACMP会进行一次电压比较，可以通过示波器或万用表观测到模拟比较器输出引脚上的电平翻转，且串口终端会输出如下信息（dac设置值随外部输入电平高点变化）：


.. code-block:: console

   acmp example
   acmp out toggled, the dac set value is 0x8e

