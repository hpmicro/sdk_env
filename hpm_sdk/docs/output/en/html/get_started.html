<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; HPMicro Software Development Kit  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Evaluation Boards" href="boards/index_en.html" />
    <link rel="prev" title="HPM SDK Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#minimum-required-version-of-dependencies-are">Minimum required version of dependencies are:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-dependencies">Install Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="boards/index_en.html">Evaluation Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/index_en.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="samples/index_en.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="samples/drivers/index_en.html">Drivers Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs/cmake_intro.html">SDK CMake API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">SDK API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HPMicro Software Development Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/get_started.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<section id="minimum-required-version-of-dependencies-are">
<h2>Minimum required version of dependencies are:<a class="headerlink" href="#minimum-required-version-of-dependencies-are" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CMake</p></td>
<td><p>3.13</p></td>
</tr>
<tr class="row-odd"><td><p>Python</p></td>
<td><p>3.8</p></td>
</tr>
</tbody>
</table>
</section>
<section id="install-dependencies">
<h2>Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Ubuntu</p>
<ul class="simple">
<li><p>install tools</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>build-essential<span class="w"> </span>cmake<span class="w"> </span>ninja-build<span class="w"> </span>libc6-i386<span class="w"> </span>libc6-i386-cross<span class="w"> </span>libstdc++6-i386-cross
</pre></div>
</div>
<ul class="simple">
<li><p>install python3 (3.8.5 minimum) and pip</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3<span class="w"> </span>python3-pip
</pre></div>
</div>
</li>
<li><p>Windows</p>
<ul>
<li><p>Windows Command Prompt
The following commands assume you are using cmd.exe, it might differ if you are using PowerShell.</p>
<ul class="simple">
<li><p>Install Chocolatey (https://chocolatey.org/)
It is a package manager for Windows, with which it’s not that difficult to install native Windows dependencies.</p></li>
</ul>
<ol class="arabic simple">
<li><p>Install Chocolatey by the following instructions on the Chocolatey Install (https://chocolatey.org/install) page.</p></li>
<li><p>Open “cmd.exe” as “Administrator”</p></li>
<li><p>Disable global confirmation to avoid having to confirm installation of individual programs:</p></li>
</ol>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  choco feature enable -n allowGlobalConfirmation
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Install CMake</p></li>
</ol>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  choco install cmake --installargs &#39;ADD_CMAKE_TO_PATH=System&#39;
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Install other tools:</p></li>
</ol>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  choco install git python ninja
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Close the Administrator command prompt window.</p></li>
</ol>
</li>
</ul>
</li>
<li><p>Prepare Toolchain &amp; Environment Variables</p>
<ul>
<li><p>Supported toolchains:</p>
<ul class="simple">
<li><p>gnu-gcc &lt;– default toolchain</p></li>
<li><p>nds-gcc</p></li>
<li><p>zcc</p></li>
</ul>
</li>
<li><p>Toolchain setup:</p>
<ul>
<li><p>gnu-gcc:</p>
<ol class="arabic simple">
<li><p>Grab a copy of toolchain zip package and unzip to certain path, take TOOLCHAIN_PATH for example, (riscv32-unknown-elf-gcc is supposed to be found in TOOLCHAIN_PATH/bin)</p></li>
<li><p>Declare a system environment variable of “GNURISCV_TOOLCHAIN_PATH” to the path of toolchain:</p></li>
</ol>
<ul class="simple">
<li><p>Linux, taking zsh for example (replace TOOLCHAIN_PATH with the path of toolchain on your workstation):</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="o">=</span>TOOLCHAIN_PATH
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="o">=</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Windows command prompt:</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">set</span> <span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="p">=</span>TOOLCHAIN_PATH
  <span class="k">set</span> <span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="p">=</span>
</pre></div>
</div>
</li>
<li><p>nds-gcc:</p>
<ol class="arabic simple">
<li><p>Grab a copy of toolchain zip package and unzip to certain path, take TOOLCHAIN_PATH for example, (riscv32-elf-gcc is supposed to be found in TOOLCHAIN_PATH/bin)</p></li>
<li><p>Declare two system environment variables: “GNURISCV_TOOLCHAIN_PATH” to the path of toolchain; “HPM_SDK_TOOLCHAIN_VARIANT” to “nds-gcc”:</p></li>
</ol>
<ul class="simple">
<li><p>Linux, taking zsh for example (replace TOOLCHAIN_PATH with the path of toolchain on your workstation):</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="o">=</span>TOOLCHAIN_PATH
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="o">=</span>nds-gcc
</pre></div>
</div>
<ul class="simple">
<li><p>Windows command prompt:</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">set</span> <span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="p">=</span>TOOLCHAIN_PATH
  <span class="k">set</span> <span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="p">=</span>nds-gcc
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p><strong><em>Note</em>:</strong> For windows, Andes compiler needs following libraries:
- cygwin1.dll
- cygncursesw-10.dll
make sure its path is appended to the system environment variable “PATH”.</p>
</div></blockquote>
<ul>
<li><p>zcc:</p>
<ol class="arabic simple">
<li><p>Grab a copy of toolchain zip package and unzip to certain path, take TOOLCHAIN_PATH for example</p></li>
<li><p>Declare a system environment variable of “GNURISCV_TOOLCHAIN_PATH” to the path of toolchain:</p></li>
</ol>
<ul class="simple">
<li><p>Linux, taking zsh for example (replace TOOLCHAIN_PATH with the path of toolchain on your workstation):</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="o">=</span>TOOLCHAIN_PATH
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="o">=</span>zcc
</pre></div>
</div>
<ul class="simple">
<li><p>Windows command prompt:</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">set</span> <span class="nv">GNURISCV_TOOLCHAIN_PATH</span><span class="p">=</span>TOOLCHAIN_PATH
  <span class="k">set</span> <span class="nv">HPM_SDK_TOOLCHAIN_VARIANT</span><span class="p">=</span>zcc
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Environment Variables:</p>
<ul>
<li><p>Using provided scripts to set the environment variable:</p>
<ul class="simple">
<li><p>Linux:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>env.sh
</pre></div>
</div>
<ul class="simple">
<li><p>Windows command prompt:</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  env.cmd
</pre></div>
</div>
</li>
<li><p>Manually declare a environment variable of “HPM_SDK_BASE”  to the path of SDK root:</p>
<ul class="simple">
<li><p>Linux, taking zsh for example (assume SDK is located at $HOME/hpm_sdk):</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HPM_SDK_BASE</span><span class="o">=</span><span class="nv">$HOME</span>/hpm_sdk
</pre></div>
</div>
<ul class="simple">
<li><p>Windows command prompt (assume SDK is located at c:\hpm_sdk):</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">set</span> <span class="nv">HPM_SDK_BASE</span><span class="p">=</span>c:\hpm_sdk
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Install python dependencies</p>
<ul class="simple">
<li><p>Linux:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>pip3<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>-r<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HPM_SDK_BASE</span><span class="s2">/scripts/requirements.txt&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Window (by default, python3/pip3 is not available after Python 3.x installed on Windows, but only python/pip):</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  pip install --user -r <span class="s2">&quot;</span><span class="nv">%HPM_SDK_BASE%</span><span class="s2">/scripts/requirements.txt&quot;</span>
</pre></div>
</div>
</li>
<li><p>Build An Application with GNU GCC toolchain
On finishing the steps mentioned above, SDK projects can be generated and built.
The following steps describe how a demo can be built:</p>
<ol class="arabic simple">
<li><p>Go to application directory, taking hello_world for example:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">cd</span><span class="w"> </span>samples/hello_world
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>create a directory for build</p></li>
</ol>
<ul class="simple">
<li><p>Linux:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>mkdir<span class="w"> </span>build
</pre></div>
</div>
<ul class="simple">
<li><p>Windows:</p></li>
</ul>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">md</span> build
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Change directory to “build”</p></li>
</ol>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  <span class="k">cd</span> build
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Generate build files for Ninja:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>cmake<span class="w"> </span>-GNinja<span class="w"> </span>-DBOARD<span class="o">=</span>hpm6750evk<span class="w"> </span>..
</pre></div>
</div>
<blockquote>
<div><p><strong><em>Note</em></strong>: if it complains about “CMAKE_MAKE_PROGRAM is not set”, please
append -DCMAKE_MAKE_PROGRAM=YOUR_MAKE_EXECUTABLE_PATH to the previous
command (NINJA_PATH is the folder in which ninja can be found):</p>
</div></blockquote>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>cmake<span class="w"> </span>-GNinja<span class="w"> </span>-DBOARD<span class="o">=</span>hpm6750evk<span class="w"> </span>-DCMAKE_MAKE_PROGRAM<span class="o">=</span>NINJA_PATH/ninja<span class="w"> </span>..
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Building:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>ninja
</pre></div>
</div>
<p>When it’s done the elf and other application related files can be found in the directory of “output”, like map file, assembly source or binary file</p>
</li>
<li><p>Quick Guide to Run/Debug An Application (hello_world):</p>
<ol class="arabic simple">
<li><p>Wire up the board, including debug probe (by default it supports jlink) and serial port</p></li>
<li><p>power up the board</p></li>
<li><p>open console connecting to the debug console (target serial port) with baudrate of 115200</p></li>
<li><p>get a copy of openocd. it can be installed via package management system or downloaded from sourceforge or github. But please make sure its revision is &gt; 0.11</p></li>
<li><p>Go to SDK root directory, run provided environment variable scripts:</p></li>
</ol>
<ul>
<li><p>Linux:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>env.sh
</pre></div>
</div>
</li>
<li><p>Windows command prompt:</p>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span>  env.cmd
</pre></div>
</div>
<p>or setup environment variable OPENOCD_SCRIPTS manually:</p>
</li>
<li><p>Linux:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">OPENOCD_SCRIPTS</span><span class="o">=</span><span class="si">${</span><span class="nv">HPM_SDK_BASE</span><span class="si">}</span>/boards/openocd
</pre></div>
</div>
</li>
<li><p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="nb">set</span> <span class="n">OPENOCD_SCRIPTS</span><span class="o">=%</span><span class="n">HPM_SDK_BASE</span><span class="o">%</span>\<span class="n">boards</span>\<span class="n">openocd</span>
</pre></div>
</div>
</li>
</ul>
<ol class="arabic simple" start="6">
<li><p>Start openocd with several configuration files in order of type of probe, type of core, type of board. For example, the following command will setup an openocd gdb server with ft2232 to single core on hpm6750evk</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>openocd<span class="w"> </span>-f<span class="w"> </span>probes/ft2232.cfg<span class="w"> </span>-f<span class="w"> </span>soc/hpm6750-single-core.cfg<span class="w"> </span>-f<span class="w"> </span>boards/hpm6750evk.cfg
</pre></div>
</div>
<blockquote>
<div><p><strong><em>Note</em>:</strong> If using FTDI debugger and meet  <code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">libusb_open()</span> <span class="pre">failed</span> <span class="pre">with</span> <span class="pre">LIBUSB_ERROR_NOT_FOUND</span></code> , please check the FTDI usb driver. If it is not installed correctly, use <a class="reference external" href="https://github.com/pbatard/libwdi/releases/download/b730/zadig-2.5.exe">zadig</a> to update:</p>
</div></blockquote>
<p>Open zadig, click Options-&gt; List All Devices.</p>
<p><img alt="List All Devices" src="_images/zadig_list_all_devices.png" /></p>
<p>Select Dual RS232-HS (Interface 0).</p>
<p><img alt="Select Dual RS232-HS (Interface 0)" src="_images/zadig_select_dual_rs232-hs.png" /></p>
<p>Then click Install Driver or Replace Driver.</p>
<p><img alt="Replace Driver" src="_images/zadig_replace_driver.png" /></p>
<ol class="arabic simple" start="7">
<li><p>Go to hello_world directory</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nb">cd</span><span class="w"> </span>samples/hello_world
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>open up another terminal to start a gdb client</p></li>
</ol>
<ul class="simple">
<li><p>gnu-gcc:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>TOOLCHAIN_PATH/bin/riscv32-unknown-elf-gdb
</pre></div>
</div>
<ul class="simple">
<li><p>nds-gcc:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>TOOLCHAIN_PATH/bin/riscv32-elf-gdb
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>connect gdb client to the gdbserver started by openocd, (by default, gdbserver port is 3333)</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>gdb&gt;<span class="w"> </span>file<span class="w"> </span>build/output/demo.elf
<span class="w">  </span>gdb&gt;<span class="w"> </span>target<span class="w"> </span>remote<span class="w"> </span>localhost:3333
<span class="w">  </span>gdb&gt;<span class="w"> </span>load
<span class="w">  </span>gdb&gt;<span class="w"> </span>b<span class="w"> </span>main
<span class="w">  </span>gdb&gt;<span class="w"> </span>c
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li><p>on the debug console, “hello_world” is printed.</p></li>
</ol>
</li>
<li><p>Build An Application with Segger Embedded Studio</p>
<ul class="simple">
<li><p>Segger Embedded Studio for RISC-V can be downloaded from <a class="reference external" href="https://www.segger.com/downloads/embedded-studio/">Segger</a></p></li>
<li><p>Project file for Segger Embedded Studio will be generated while generating build files for Ninja mentioned in “Build An Application with GNU GCC toolchain”-&gt;“4. Generate build files for Ninja”</p></li>
<li><p>The project file (.emProject) can be found at build/segger_embedded_studio/.</p></li>
</ul>
<blockquote>
<div><p><strong><em>Note</em>:</strong> openocd executable needs to be found in the PATH variable of current console, otherwise debug configuration will not be generated to project file and needs to be configured manually in Segger Embedded Studio later.</p>
</div></blockquote>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2024, HPMicro.
      <span class="lastupdated">Last updated on Sep 30, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>