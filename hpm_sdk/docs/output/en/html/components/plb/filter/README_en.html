<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. PLB Filter Component &mdash; HPMicro Software Development Kit  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3. I2C Component" href="../../i2c/README_en.html" />
    <link rel="prev" title="1. PPI Component" href="../../ppi/README_en.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index_en.html">Evaluation Boards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index_en.html">Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../ppi/README_en.html">1. PPI Component</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. PLB Filter Component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">2.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-filter-design">2.2. Introduction to Filter Design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rapid-change-mode">2.2.1. Rapid Change Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delay-mode">2.2.2. Delay Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stable-low-mode">2.2.3. Stable Low Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stable-high-mode">2.2.4. Stable High Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#usage">2.3. Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../i2c/README_en.html">3. I2C Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spi/README_en.html">4. SPI Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index_en.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/drivers/index_en.html">Drivers Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/cmake_intro.html">SDK CMake API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc.html">SDK API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CHANGELOG.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">HPMicro Software Development Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index_en.html">Components</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span>PLB Filter Component</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/components/plb/filter/README_en.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plb-filter-component">
<span id="id1"></span><h1><span class="section-number">2. </span>PLB Filter Component<a class="headerlink" href="#plb-filter-component" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2><span class="section-number">2.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The TRIGMUX of HPMicro MCU has filter function, providing digital filters for some input signals, supporting rapid change mode, delay mode, stable low mode, and stable high mode. But this filter only applies to input signals from external pins and cannot filter internal signals.</p>
<p>To solve this problem, this component uses PLB to implement filters, which also support rapid change mode, delay mode, stable low mode, and stable high mode. By configuring TRIGMUX, it can filter both external pin input signals and internal signals that can be connected to TRIGMUX.</p>
</section>
<section id="introduction-to-filter-design">
<h2><span class="section-number">2.2. </span>Introduction to Filter Design<a class="headerlink" href="#introduction-to-filter-design" title="Permalink to this heading"></a></h2>
<section id="rapid-change-mode">
<h3><span class="section-number">2.2.1. </span>Rapid Change Mode<a class="headerlink" href="#rapid-change-mode" title="Permalink to this heading"></a></h3>
<ul>
<li><p>After the input of the filter is flipped, the output will immediately flip and then ignore the input of the filter for a certain period of time. In this mode, the filter output will closely follow the input while avoiding any spikes in the output signal.</p>
<img alt="../../../_images/rapid_change.png" src="../../../_images/rapid_change.png" />
</li>
<li><p>Outline Design</p>
<ul>
<li><p>This design has two stages, with the first stage being the TYPE-B logic unit (outputting OUT0 as a latch signal) and the second stage being the TYPE-A logic unit.</p></li>
<li><p>TYPE_B Design</p>
<ul>
<li><p>The edge signal of the original signal is used as the input signal IN0 for the PLB TYPE-B logic unit</p></li>
<li><p>The output signal of PLB is OUT0, which also serves as the input signal IN1 for the PLB TYPE-B logic unit</p></li>
<li><p>The output signal of PLB is OUT1, which also serves as the input signal IN2 for the PLB TYPE-B logic unit</p></li>
<li><p>Define the truth table as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IN2</p></th>
<th class="head"><p>IN1</p></th>
<th class="head"><p>IN0</p></th>
<th class="head"><p>Operation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>keep cnt</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>cnt + 1</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>cnt + 1</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>cnt + 1</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>cnt from cmp0, cmp0 value is 0</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>The output logic of OUT0 is: when the cnt value is <cite>greater than</cite> cmp0, the output of OUT0 is 1; otherwise, it is 0.</p></li>
<li><p>The output logic of OUT1 is: when the cnt value is <cite>greater than or equal to</cite> cmp1, the output of OUT1 is 1; otherwise, it is 0. The value of cmp1 can be set, which is the delay time that the user needs to define, measured in plb clock tick;</p></li>
<li><p>The initial value of cnt is 0</p></li>
</ul>
</li>
<li><p>TYPE_A Design</p>
<ul>
<li><p>The original signal serves as the input signal IN0 for the PLB TYPE-A logic unit;</p></li>
<li><p>The edge signal of the original signal serves as the input signal IN1 for the PLB TYPE-A logic unit;</p></li>
<li><p>The output signal OUT0 of TYPE-B logic unit serves as the input signal IN2 of TYPE-A logic unit;</p></li>
<li><p>The output signal OUT0 of TYPE-A logic unit serves as the input signal IN3 of TYPE-A logic unit;</p></li>
<li><p>Define the truth table as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IN3</p></th>
<th class="head"><p>IN2</p></th>
<th class="head"><p>IN1</p></th>
<th class="head"><p>IN0</p></th>
<th class="head"><p>Output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>x</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>x</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>OUT0 is the filtered output signal.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="delay-mode">
<h3><span class="section-number">2.2.2. </span>Delay Mode<a class="headerlink" href="#delay-mode" title="Permalink to this heading"></a></h3>
<ul>
<li><p>After the input of the filter is flipped, it needs to be held for a certain period of time before the output of the filter can be flipped.</p>
<img alt="../../../_images/delay_mode.png" src="../../../_images/delay_mode.png" />
</li>
<li><p>Outline Design
- The original signal serves as the input signal IN0 for the PLB TYPE-B logic unit, and the edge signal of the original signal serves as the input signal IN2 for the PLB TYPE-B logic unit;
- The output signal of PLB is OUT0, which also serves as the input signal IN1 for the PLB TYPE-B logic unit;
- Define the truth table as follows:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IN2</p></th>
<th class="head"><p>IN1</p></th>
<th class="head"><p>IN0</p></th>
<th class="head"><p>Operation</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>keep cnt</p></td>
<td><p>stable</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>cnt + 1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>cnt - 1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>keep cnt</p></td>
<td><p>stable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>cnt + 1</p></td>
<td><p>signal jitter</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>cnt from cmp1, cmp1 value is 0</p></td>
<td><p>rising edge</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>cnt from cmp2, cmp2 value is 2*cmp0</p></td>
<td><p>down edge</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>cnt - 1</p></td>
<td><p>signal jitter</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li><p>The output logic of OUT0 is: when the cnt value is <cite>greater than or equal to</cite> cmp0, the output of OUT0 is 1; otherwise, it is 0. The value of cmp0 can be set, which is the delay time that the user needs to define, measured in plb clock tick;</p></li>
<li><p>The initial value of cnt is 0;</p></li>
<li><p>OUT0 is the filtered output signal.</p></li>
</ul>
</li>
</ul>
</section>
<section id="stable-low-mode">
<h3><span class="section-number">2.2.3. </span>Stable Low Mode<a class="headerlink" href="#stable-low-mode" title="Permalink to this heading"></a></h3>
<ul>
<li><p>After the input of the filter is set to logic 0, it needs to be held for a certain period of time before the output of the filter is set to logic 0. However, when the input of the filter is set to 1, the output of the filter will immediately be set to 1.</p>
<img alt="../../../_images/stable_low.png" src="../../../_images/stable_low.png" />
</li>
<li><p>Outline Design
- The original signal serves as the input signal IN0 for the PLB TYPE-B logic unit;
- The output signal of PLB is OUT0, which also serves as the input signal IN1 for the PLB TYPE-B logic unit;
- Define the truth table as follows:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IN1</p></th>
<th class="head"><p>IN0</p></th>
<th class="head"><p>Operation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x</p></td>
<td><p>1</p></td>
<td><p>cnt from cmp1, cmp1 value is 0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>cnt + 1</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>keep cnt</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li><p>The output logic of OUT0 is: when the cnt value is <cite>less than</cite> cmp0, the output of OUT0 is 1; otherwise, it is 0. The value of cmp0 can be set, which is the delay time that the user needs to define, measured in plb clock tick;</p></li>
<li><p>The initial value of cnt is 0;</p></li>
<li><p>OUT0 is the filtered output signal.</p></li>
</ul>
</li>
</ul>
</section>
<section id="stable-high-mode">
<h3><span class="section-number">2.2.4. </span>Stable High Mode<a class="headerlink" href="#stable-high-mode" title="Permalink to this heading"></a></h3>
<ul>
<li><p>After setting the input of the filter to logic 1, it needs to be held for a certain period of time before the output of the filter will be set to logic 1, while setting the input of the filter to 0 will immediately set the output of the filter to 0.</p>
<img alt="../../../_images/stable_high.png" src="../../../_images/stable_high.png" />
</li>
<li><p>Outline Design
- The original signal serves as the input signal IN0 for the PLB TYPE-B logic unit;
- The output signal of PLB is OUT0, which also serves as the input signal IN1 for the PLB TYPE-B logic unit;
- Define the truth table as follows:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IN1</p></th>
<th class="head"><p>IN0</p></th>
<th class="head"><p>Operation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x</p></td>
<td><p>0</p></td>
<td><p>cnt from cmp1, cmp1 value is 0</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>cnt + 1</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>keep cnt</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li><p>The output logic of OUT0 is: when the cnt value is <cite>greater than or equal to</cite> cmp0, the output of OUT0 is 1; otherwise, it is 0. The value of cmp0 can be set, which is the delay time that the user needs to define, measured in plb clock tick;</p></li>
<li><p>The initial value of cnt is 0;</p></li>
<li><p>OUT0 is the filtered output signal.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="usage">
<h2><span class="section-number">2.3. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Add the following content to the CMakeLists.txt file in the application to enable the PLB filter component:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set(</span><span class="no">CONFIG_HPM_PLB_FILTER</span><span class="w"> </span><span class="m">1</span><span class="nf">)</span>
</pre></div>
</div>
</li>
<li><p>The application calls the following API for configuration:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">plb_filter_init</span><span class="p">(</span><span class="n">filter_config_t</span><span class="w"> </span><span class="o">*</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, HPMicro.
      <span class="lastupdated">Last updated on Mar 31, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>