<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12.3. ECAT_IO &mdash; HPMicro Software Development Kit  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="13. Freemaster" href="../../freemaster/README_en.html" />
    <link rel="prev" title="12.2. ECAT_FOE" href="../ecat_foe/README_en.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index_en.html">Evaluation Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index_en.html">Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index_en.html">Samples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../audio_codec/index_en.html">1. Audio Codec</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canopen/README_en.html">2. CANOPEN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cherryrb/README_en.html">3. CherryRB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cherrysh/index_en.html">4. CherrySH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cherryusb/index_en.html">5. CherryUSB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../coremark/README_en.html">6. CoreMark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dhrystone/README_en.html">7. Dhrystone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dma_manager/README_en.html">8. DMA Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dsp/README_en.html">9. DSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dual_panel/README_en.html">10. DUAL_PANEL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../eeprom_emulation/index_en.html">11. EEPROM Emulation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index_en.html">12. EtherCAT</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ecat_cia402/README_en.html">12.1. ECAT_CiA402</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ecat_foe/README_en.html">12.2. ECAT_FOE</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">12.3. ECAT_IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">12.3.1. 1. Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prepare">12.3.2. 2. Prepare</a></li>
<li class="toctree-l4"><a class="reference internal" href="#project-setting">12.3.3. 3. Project Setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generate-ethercat-slave-stack-code">12.3.4. 4. Generate EtherCAT slave stack code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#twincat-project-setting">12.3.5. 5. TwinCAT Project setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-example">12.3.6. 6. Running the example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../freemaster/README_en.html">13. Freemaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hello_world/README_en.html">14. Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hpm_math/index_en.html">15. HPM Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i2c_components/index_en.html">16. I2C Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i2s_emulation/README_en.html">17. I2S EMULATION</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../image/index_en.html">18. Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lvgl/index_en.html">19. LVGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lwip/index_en.html">20. lwIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mbedtls/README_en.html">21. Mbedtls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../memstress/index_en.html">22. Memory Stress</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../microros/index_en.html">23. Microros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbus/index_en.html">24. Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../motor_ctrl/index_en.html">25. HPM Motor Ctrl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multicore/index_en.html">26. Multicore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../opener/index_en.html">27. OpENer Ethernet/IP Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pmbus/index_en.html">28. PMbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../power_mode_switch/README_en.html">29. Power Mode Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rgb_led/README_en.html">30. RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rom_api/index_en.html">31. ROM API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rtos/index_en.html">32. RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rvbacktrace/index_en.html">33. Rvbacktrace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../segger_rtt/README_en.html">34. Segger RTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../segment_led_key/README_en.html">35. SEGMENT LED KEY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../smbus/index_en.html">36. SMbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spi_components/index_en.html">37. SPI Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../spi_sdcard/index_en.html">38. SPI SD Card</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tflm/index_en.html">39. TensorFlow Lite For Microcontroller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tinycrypt/index_en.html">40. Tinycrypt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tinyengine/person_obj/README_en.html">41. Person Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tinyuf2/README_en.html">42. TinyUF2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tinyusb/index_en.html">43. TinyUSB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../touch_panel/README_en.html">44. Touch Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../trace_recorder/index_en.html">45. Trace Recorder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tsn/index_en.html">46. tsn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vglite/index_en.html">47. VGLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sent/index_en.html">48. sent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/index_en.html">Drivers Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/cmake_intro.html">SDK CMake API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc.html">SDK API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CHANGELOG.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">HPMicro Software Development Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index_en.html">Samples</a></li>
          <li class="breadcrumb-item"><a href="../index_en.html"><span class="section-number">12. </span>EtherCAT</a></li>
      <li class="breadcrumb-item active"><span class="section-number">12.3. </span>ECAT_IO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/samples/ethercat/ecat_io/README_en.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ecat-io">
<span id="id1"></span><h1><span class="section-number">12.3. </span>ECAT_IO<a class="headerlink" href="#ecat-io" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2><span class="section-number">12.3.1. </span>1. Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The ECAT_IO example demonstrates the steps to implement an ECAT digital IO slave station with the slave stack code (SSC).</p>
<p>This routine program supports initializing the EEPROM data of the ESC, simplifying the process of updating the ESC’s EEPROM.</p>
<p>If the program code contains EEPROM data (eeprom.h) generated by the SSC Tool, it will check the data stored in the ESC’s EEPROM and update it based on conditions.</p>
<p>If the checksum of the EtherCAT Slave Controller Configuration Area (the first 8 words) of the EEPROM failed, the EEPROM will be initialized with the data from eeprom.h.</p>
<p>If the checksum of the EtherCAT Slave Controller Configuration Area (the first 8 words) of the EEPROM succeeds, will verify the Product Code and Revision Code in the EEPROM data.</p>
<p>When the Product Code differs or the Revision Number in eeprom.h is greater than the Revision Number of the currently stored EEPROM data, the EEPROM will be initialized with the data from eeprom.h.</p>
<p>This method can solve the problem of checksum failure caused by EEPROM being empty during initial use, it will initialize EEPROM. During program upgrades, if the Revision Number in the eeprom.h included in the new program code is greater than the Revision Number of the currently stored EEPROM data, the EEPROM will be initialized with the eeprom.h, eliminating the need to update the EEPROM through master station tools such as TwinCAT.</p>
</section>
<section id="prepare">
<h2><span class="section-number">12.3.2. </span>2. Prepare<a class="headerlink" href="#prepare" title="Permalink to this heading"></a></h2>
<section id="hardware">
<h3><span class="section-number">12.3.2.1. </span>2.1 Hardware<a class="headerlink" href="#hardware" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul>
<li><p>Development board with ECAT, please refer to  <a class="reference internal" href="../../../boards/index_en.html#board-resource"><span class="std std-ref">Pin Description</span></a>  of the development board. Check the ECAT network port/RUN LED/ERR LED and other hardware</p></li>
<li><p>PC with Ethernet port</p>
<blockquote>
<div><ul class="simple">
<li><p>TWinCAT3 software has compatibility issues with PC network cards. <a class="reference external" href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_overview/9309844363.html&amp;id=1489698440745036069">some supported Intel network cards</a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="software">
<h3><span class="section-number">12.3.2.2. </span>2.2 Software<a class="headerlink" href="#software" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>TwinCAT3.1(Build 4024.56)</p></li>
<li><p>SSC Tool(SSC Version: 5.13; Config File Vers: 1.5.3.0)</p></li>
</ul>
<img alt="" src="../../../_images/ssc_version.png" />
</div></blockquote>
</section>
</section>
<section id="project-setting">
<h2><span class="section-number">12.3.3. </span>3. Project Setting<a class="headerlink" href="#project-setting" title="Permalink to this heading"></a></h2>
<section id="eeprom-emulation-setting">
<h3><span class="section-number">12.3.3.1. </span>3.1 EEPROM Emulation Setting<a class="headerlink" href="#eeprom-emulation-setting" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>The default setting is to use Flash to simulate EEPROM</p></li>
<li><p><strong>Note</strong> : Please allocate appropriate flash space for FLASH-EEPROM content to avoid conflicts with other flash contents</p></li>
</ul>
</div></blockquote>
</section>
<section id="using-actual-eeprom">
<h3><span class="section-number">12.3.3.2. </span>3.2 Using actual EEPROM<a class="headerlink" href="#using-actual-eeprom" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>set the “ESC_EEPROM_EMULATION” and “CREATE_EEPROM_CONTENT” under the “Hardware” attribute to 0 in SSC Tool, then generate the slave protocol stack code.</p></li>
<li><p>Modify <cite>CMakeLists.txt</cite> context to “set(CONFIG_EEPROM_EMULATION 0)”.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="generate-ethercat-slave-stack-code">
<h2><span class="section-number">12.3.4. </span>4. Generate EtherCAT slave stack code<a class="headerlink" href="#generate-ethercat-slave-stack-code" title="Permalink to this heading"></a></h2>
<p>Due to licensing issues, HPMSDK does not provide EtherCAT slave protocol stack code (SSC). Users have download the SSC Tool from Beckoff’s official website and generate the slave stack code according to the steps.</p>
<section id="download-ssc-tool">
<h3><span class="section-number">12.3.4.1. </span>4.1. Download SSC Tool<a class="headerlink" href="#download-ssc-tool" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Enter <a class="reference external" href="https://www.ethercat.org/en/downloads.html">ETG Download website</a> , input “SSC” to filter resource.</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_download_1.png" />
<img alt="" src="../../../_images/SSC_download_2.png" />
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<blockquote>
<div><p>To download, you need to provide an ETG member account and a valid vendor ID**</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Download and install SSC Tool</p></li>
</ol>
</div>
</section>
<section id="ssc-tool-import-configuration-files">
<h3><span class="section-number">12.3.4.2. </span>4.2 SSC Tool import configuration files<a class="headerlink" href="#ssc-tool-import-configuration-files" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Open SSC Tool, click <strong>Tool-&gt;Options</strong></p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_Tool_Options.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>click Configurations, import configuration file(&lt;hpm_sdk&gt;/samples/ethercat/ecat_io/SSC/Config/HPM_ECAT_IO_Config.xml)</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_Import_Configuration.png" />
</div></blockquote>
</div></blockquote>
</section>
<section id="ssc-tool-create-new-project">
<h3><span class="section-number">12.3.4.3. </span>4.3 SSC Tool create new project<a class="headerlink" href="#ssc-tool-create-new-project" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>click <strong>File-&gt;New</strong></p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_File_New.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Click <strong>Custom</strong>  option, and select <strong>HPMicro ECAT Digital IO &lt;HPMicro&gt;</strong>  from the drop-down list</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_New_Project_Custom.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Save project, specify the file path</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_Project_Save.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>import application</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Click <strong>Tool-&gt;Application-&gt;Import</strong> , Import &lt;hpm_sdk&gt;/samples/ethercat/ecat_io/SSC/digital_io.xlsx</p></li>
</ul>
<img alt="" src="../../../_images/SSC_Application_Import_1.png" />
<img alt="" src="../../../_images/SSC_Application_Import_2.png" />
<ul class="simple">
<li><p>Click <strong>OK</strong></p></li>
</ul>
<img alt="" src="../../../_images/SSC_Application_Import_3.png" />
</div></blockquote>
</div></blockquote>
</section>
<section id="create-slave-stack-files">
<h3><span class="section-number">12.3.4.4. </span>4.4 Create slave stack files<a class="headerlink" href="#create-slave-stack-files" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Click <strong>Project-&gt;Create new Slave Files</strong></p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_Create_Slave_1.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Specify the output path, the output source folder have to set to &lt;ecat_io sample path&gt;/SSC/Src, if other path, have to copy generated SRC folder to &lt;ecat_io sample path&gt;/SSC/Src</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/SSC_Create_Slave_2.png" />
</div></blockquote>
</div></blockquote>
</section>
<section id="ssc-code-change">
<h3><span class="section-number">12.3.4.5. </span>4.5 SSC code change<a class="headerlink" href="#ssc-code-change" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>ESC IP supports generating independent Sync0 Sync1 interrupts, and Sync0 Sync1 requests can also trigger PDI interrupts. To avoid unnecessary PDI interrupts triggered by Sync0 Sync1 requests when using independent Sync0 Sync1 interrupts, AL Event Mask Register (0x204) needs to be set for masking</p>
<img alt="" src="../../../_images/ssc_pdi_int.png" />
<p>Execute in the command line window under the SSC directory：patch -d Src &lt; ssc_pdi_mask.patch</p>
<img alt="" src="../../../_images/ssc_patch1.png" />
<p><strong>Note</strong> ：If the patch command is not installed on your PC, you will need to install ver.2.5.9 or a laterversion of GNU patch. If it is already installed, skip this step. Download the patch command (currently ver.2.5.9) from the following Web page and store “patch.exe” in a folder on a path that makes the file executable from the command prompt. <a class="reference external" href="http://gnuwin32.sourceforge.net/packages/patch.htm">http://gnuwin32.sourceforge.net/packages/patch.htm</a></p>
</div></blockquote>
</section>
</section>
<section id="twincat-project-setting">
<h2><span class="section-number">12.3.5. </span>5. TwinCAT Project setting<a class="headerlink" href="#twincat-project-setting" title="Permalink to this heading"></a></h2>
<section id="add-esi-file">
<h3><span class="section-number">12.3.5.1. </span>5.1. Add ESI file<a class="headerlink" href="#add-esi-file" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Please modify the device attributes in generated ESI ( <strong>ECAT-IO.xml</strong> ) by SSC tool according to the actual number of ports(&lt;Device Physics=”YY”&gt;), The default attribute generated in ESI is “YY”, indicating that Port0 and Port1 are implemented. If Port0, Port1, and Port2 are actually implemented, please manually modify the attribute to “YYY”.</p></li>
</ol>
<img alt="" src="../../../_images/esc_device_physics.png" />
<ol class="arabic simple" start="2">
<li><p>Copy the ESI( <strong>ECAT-IO.xml</strong> ) to TwinCAT( <strong>C:/TwinCAT/3.1/Config/Io/EtherCAT</strong> ).</p></li>
</ol>
</div></blockquote>
</section>
<section id="create-project">
<h3><span class="section-number">12.3.5.2. </span>5.2 Create Project<a class="headerlink" href="#create-project" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Open TwinCAT，click <strong>File-&gt;New-&gt;Project</strong></p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_new_project_1.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Click <strong>TwinCAT Project</strong> , after naming, click <strong>OK</strong></p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_new_project_2.png" />
</div></blockquote>
</div></blockquote>
</section>
<section id="software-configuration">
<h3><span class="section-number">12.3.5.3. </span>5.3 Software Configuration<a class="headerlink" href="#software-configuration" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Update network card driver (required for first use)</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_ethernet_driver.png" />
<img alt="" src="../../../_images/Twincat_ethernet_driver_2.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>clock setting</p></li>
</ol>
<blockquote>
<div><p>The TwinCAT may report the error during runtime: Init4RTime：Start Interrupt：Ticker started &gt;&gt; AdsWarning4115 （0x1013,RTIME：system clock setup failed）, win8settick.bat needs to run with administrator privileges(C：TwinCAT3.1Systemwin8settick.bat)</p>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_set_tick.png" />
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="scan-device">
<h3><span class="section-number">12.3.5.4. </span>5.4 Scan device<a class="headerlink" href="#scan-device" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Right click Device, then click Scan</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_scan.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Choose correct network</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_scan_2.png" />
</div></blockquote>
</div></blockquote>
</section>
<section id="update-eeprom-context">
<h3><span class="section-number">12.3.5.5. </span>5.5 Update EEPROM context<a class="headerlink" href="#update-eeprom-context" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic">
<li><p>Double click on the scanned device, click <strong>Online</strong> , right click <strong>Box</strong> , then click <strong>EEPROM Update</strong> 。</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>For cases where the EEPROM content is empty, it is not possible to find a matching Box when scanning the device. In this case, it is necessary to update the EEPROM content。</strong> *</p></li>
<li><p><strong>In the case where EEPROM content is empty, When ESC is powered on to load EEPROM data, a checksum error will occur, which will cause PDI to not work. At this time, EtherCAT communication is possible and EEPROM content can be updated through the main station.</strong> *</p></li>
</ul>
<img alt="" src="../../../_images/Twincat_eeprom_update_io.png" />
</div></blockquote>
</li>
<li><p>chosse correct files, click <strong>OK</strong> , wait for completion</p>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_eeprom_update_3.png" />
</div></blockquote>
</li>
<li><p>Reset the board, delete the scanned devices and rescanning</p>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_device_remove.png" />
<img alt="" src="../../../_images/Twincat_scan_device_2.png" />
</div></blockquote>
</li>
</ol>
</div></blockquote>
</section>
<section id="io-control">
<h3><span class="section-number">12.3.5.6. </span>5.6 IO Control<a class="headerlink" href="#io-control" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Input IO, change DIP switch, “InputCounter” value change in TwinCAT</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_input.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Output IO, write “OutputCounter” value in Twincat, Output LED change</p></li>
</ol>
<blockquote>
<div><img alt="" src="../../../_images/Twincat_output.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Check RUN LED and ERR_LED status</p></li>
</ol>
</div></blockquote>
</section>
<section id="dc-setting">
<h3><span class="section-number">12.3.5.7. </span>5.7 DC setting<a class="headerlink" href="#dc-setting" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ol class="arabic">
<li><p>Set the synchronization mode of the slave station, where you can set an individual Shift Time for the slave station (Shift Time is used to ensure that all slave stations receive data from the master station before the DC sync event)</p>
<blockquote>
<div><img alt="" src="../../../_images/twincat_slave_set_dc.png" />
</div></blockquote>
</li>
<li><p>Set the synchronization mode of the master station, through the Sync Shift Time of the master station, you can set the shift time for all DC sync mode slave stations (usually 20%~30% of the Sync Unit Cycle time), Actual Shift Time of a single slave station = Shift Time set by the master station + Shift Time set by the slave station</p>
<blockquote>
<div><img alt="" src="../../../_images/twincat_master_set_dc.png" />
</div></blockquote>
</li>
<li><p>Click Restart TwinCAT (Config Mode), slave stations can enter OP state under DC sync mode. In actual use, tasks should be created in TwinCAT (such as PLC task or NC Task), set the synchronization between slave and master station tasks, activate the configuration, and enter Run Mode to ensure synchronization performance, working under DC sync mode</p>
<blockquote>
<div><img alt="" src="../../../_images/twincat_restart_config_mode.png" />
</div></blockquote>
</li>
</ol>
</div></blockquote>
</section>
</section>
<section id="running-the-example">
<h2><span class="section-number">12.3.6. </span>6. Running the example<a class="headerlink" href="#running-the-example" title="Permalink to this heading"></a></h2>
<p>After the project is running correctly, the serial terminal will output the following information, and the input-output IO status corresponds to the TwinCAT project configuration:</p>
<p>When EEPROM data needs to be initialized, the log is as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">EtherCAT IO sample</span>
<span class="go">Init EEPROM content.</span>
<span class="go">Init EEPROM content successful.</span>
<span class="go">EEPROM loading successful, no checksum error.</span>
</pre></div>
</div>
<p>When EEPROM data does not need to be initialized, the log is as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">EtherCAT IO sample</span>
<span class="go">No need to init EEPROM content.</span>
<span class="go">EEPROM loading successful, no checksum error.</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, HPMicro.
      <span class="lastupdated">Last updated on Mar 31, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>