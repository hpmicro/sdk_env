<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>59. SDM &mdash; HPMicro Software Development Kit  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="60. SDXC" href="../sdxc/index_en.html" />
    <link rel="prev" title="58. RTC" href="../rtc/README_en.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index_en.html">Evaluation Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index_en.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_en.html">Samples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index_en.html">Drivers Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../acmp/README_en.html">1. ACMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adc/index_en.html">2. ADC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bgpr/README_en.html">3. BPGR Retention</a></li>
<li class="toctree-l2"><a class="reference internal" href="../butn/README_en.html">4. BUTN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cam_dvp/README_en.html">5. CAM_DVP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../can/README_en.html">6. CAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crc/README_en.html">7. CRC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dac/README_en.html">8. DAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dma/index_en.html">9. DMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dmav2/index_en.html">10. DMAV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../enet/index_en.html">11. ENET</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eui/README_en.html">12. EUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ewdg/README_en.html">13. EWDG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../femc/index_en.html">14. FEMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffa/README_en.html">15. FFA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/README_en.html">16. GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpiom/README_en.html">17. GPIOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gptmr/index_en.html">18. GPTMR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gwc/README_en.html">19. GWC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hall/README_en.html">20. Hall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c/index_en.html">21. I2C</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2s/index_en.html">22. I2S</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jpeg/README_en.html">23. JPEG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../l1c/README_en.html">24. L1 Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lcdc/README_en.html">25. LCDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lin/index_en.html">26. LIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linv2/index_en.html">27. LINV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lobs/README_en.html">28. LOBS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mbx/index_en.html">29. MBX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mcan/README_en.html">30. MCAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mchtmr/README_en.html">31. MCHTMR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mipi_csi/README_en.html">32. MIPI_CSI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mmc/index_en.html">33. MMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mono/README_en.html">34. MONO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtg/index_en.html">35. MTG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtgv2/index_en.html">36. MTGV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../opamp/README_en.html">37. OPAMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../owr/README_en.html">38. 1-Wire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pdgo/README_en.html">39. PDGO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pdma/README_en.html">40. PDMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pla/index_en.html">41. PLA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plb/index_en.html">42. PLB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plic/README_en.html">43. PLIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pllctl/README_en.html">44. PLLCTL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pllctlv2/README_en.html">45. PLLCTLV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pmp/README_en.html">46. PMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ppi/index_en.html">47. PPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ppor/README_en.html">48. PPOR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptpc/README_en.html">49. PTPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwm/index_en.html">50. PWM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwmv2/index_en.html">51. PWMV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qei/README_en.html">52. QEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qeiv2/index_en.html">53. QEIV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qeo/index_en.html">54. QEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qeov2/index_en.html">55. QEOV2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rdc/README_en.html">56. RDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rng/README_en.html">57. RNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rtc/README_en.html">58. RTC</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">59. SDM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">59.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#board-setting">59.2. Board Setting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#note">59.3. Note</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-example">59.4. Running the example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sdm-sample-data-in-polling-mode">59.4.1. 1. SDM sample data in polling mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdm-amplitude-threshold-check">59.4.2. 2. SDM amplitude threshold check</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdm-sample-data-in-interrupt-mode">59.4.3. 3. SDM sample data in interrupt mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdm-sample-data-with-sync-signal">59.4.4. 4. SDM sample data with sync signal</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sdxc/index_en.html">60. SDXC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sei/index_en.html">61. SEI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smix/index_en.html">62. SMIX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spi/index_en.html">63. SPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../synt/README_en.html">64. SYNT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tamp/README_en.html">65. TAMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfa/README_en.html">66. TFA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsns/README_en.html">67. TSNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tsw/README_en.html">68. TSW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uart/index_en.html">69. UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vad/README_en.html">70. VAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vsc/index_en.html">71. VSC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wdg/README_en.html">72. WDG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/cmake_intro.html">SDK CMake API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc.html">SDK API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CHANGELOG.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">HPMicro Software Development Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index_en.html">Drivers Examples</a></li>
      <li class="breadcrumb-item active"><span class="section-number">59. </span>SDM</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/samples/drivers/sdm/README_en.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sdm">
<span id="id1"></span><h1><span class="section-number">59. </span>SDM<a class="headerlink" href="#sdm" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2><span class="section-number">59.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The SDM sample project demonstrates the function of data sampling and amplitude detection of the data stream output by the Sigma-Delta modulator of SDM peripherals.</p>
</section>
<section id="board-setting">
<h2><span class="section-number">59.2. </span>Board Setting<a class="headerlink" href="#board-setting" title="Permalink to this heading"></a></h2>
<p>Please refer to  <a class="reference internal" href="../../../boards/index_en.html#board-resource"><span class="std std-ref">Pin Description</span></a>  for specific board.
Different hardware setting are used depending on whether an AD sampling chip is on the development board.
- If there is no onboard AD sampling chip on the development board, please using an external sampling chip and connect the output CLK and DAT pins of the sampling chip to the CLK and DAT pins of the SDM on the board.</p>
<ul class="simple">
<li><p>If there is onboard AD sampling chip, simply connect the analog signal to the input interface of the sampling chip.</p></li>
</ul>
</section>
<section id="note">
<h2><span class="section-number">59.3. </span>Note<a class="headerlink" href="#note" title="Permalink to this heading"></a></h2>
<p>This example provides a conversion formula for input voltage and output value suitable for Sigma-Delta modulators such as AD7400 and NSI1306 (Full-scale ±320 mV). If you are using a different type of Sigma-Delta modulator, please check the conversion formula.</p>
</section>
<section id="running-the-example">
<h2><span class="section-number">59.4. </span>Running the example<a class="headerlink" href="#running-the-example" title="Permalink to this heading"></a></h2>
<p>When running the project, the serial port will output the following information, allowing you to enter different numbers to execute different test functions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sdm example</span>
<span class="go">*********************************************************************</span>
<span class="go">*                                                                   *</span>
<span class="go">*                         SDM Example Menu                          *</span>
<span class="go">* Please enter one of following SDM function test(e.g. 1 or 2 ...): *</span>
<span class="go">* 1 - SDM sample data in polling mode                               *</span>
<span class="go">* 2 - SDM amplitude threshold check                                 *</span>
<span class="go">* 3 - SDM sample data in interrupt mode                             *</span>
<span class="go">* 4 - SDM sample data with sync signal                              *</span>
<span class="go">*                                                                   *</span>
<span class="go">*********************************************************************</span>
</pre></div>
</div>
<section id="sdm-sample-data-in-polling-mode">
<h3><span class="section-number">59.4.1. </span>1. SDM sample data in polling mode<a class="headerlink" href="#sdm-sample-data-in-polling-mode" title="Permalink to this heading"></a></h3>
<p>SDM Polling Data Valid Flag and Reading Sample Data from FIFO.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Selected option: 1</span>

<span class="go">sdm sample data in polling mode.</span>
<span class="go">203.57mV</span>
<span class="go">203.17mV</span>
<span class="go">203.31mV</span>
<span class="go">203.14mV</span>
<span class="go">203.01mV</span>
<span class="go">203.28mV</span>
<span class="go">203.17mV</span>
<span class="go">203.05mV</span>
<span class="go">203.19mV</span>
<span class="go">203.21mV</span>
<span class="go">203.02mV</span>
<span class="go">203.19mV</span>
<span class="go">203.43mV</span>
<span class="go">203.17mV</span>
<span class="go">203.29mV</span>
<span class="go">203.24mV</span>
</pre></div>
</div>
</section>
<section id="sdm-amplitude-threshold-check">
<h3><span class="section-number">59.4.2. </span>2. SDM amplitude threshold check<a class="headerlink" href="#sdm-amplitude-threshold-check" title="Permalink to this heading"></a></h3>
<p>SDM detects voltage over-limit events. The high voltage threshold for amplitude detection is set to SDM_AMPLITUDE_HIGH_THRESHOLD. When the input analog voltage increases from below this threshold to above it, an error interrupt is triggered.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Selected option: 2</span>

<span class="go">Set amplitude high threshold 240mV</span>
<span class="go">sdm channel comparator detected amplitude over the high threshold</span>
<span class="go">voltage: 253.75mV</span>
</pre></div>
</div>
</section>
<section id="sdm-sample-data-in-interrupt-mode">
<h3><span class="section-number">59.4.3. </span>3. SDM sample data in interrupt mode<a class="headerlink" href="#sdm-sample-data-in-interrupt-mode" title="Permalink to this heading"></a></h3>
<p>SDM samples data from FIFO with the data ready flag. When the data in the FIFO reaches a preset threshold, SDM triggers a data ready interrupt. During the interrupt handler, data is read, and stop the sampling when the number of data read reaches TEST_DATA_COUNT.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Selected option: 3</span>

<span class="go">sdm sample data in interrupt mode.</span>
<span class="go">203.39mV</span>
<span class="go">203.08mV</span>
<span class="go">202.96mV</span>
<span class="go">202.87mV</span>
<span class="go">202.85mV</span>
<span class="go">202.86mV</span>
<span class="go">202.86mV</span>
<span class="go">202.84mV</span>
<span class="go">202.81mV</span>
<span class="go">202.88mV</span>
<span class="go">203.01mV</span>
<span class="go">203.23mV</span>
<span class="go">203.08mV</span>
<span class="go">202.97mV</span>
<span class="go">202.92mV</span>
<span class="go">202.97mV</span>
</pre></div>
</div>
</section>
<section id="sdm-sample-data-with-sync-signal">
<h3><span class="section-number">59.4.4. </span>4. SDM sample data with sync signal<a class="headerlink" href="#sdm-sample-data-with-sync-signal" title="Permalink to this heading"></a></h3>
<p>In this case, GPTMR is used to output the synchronization signal, it connects to SDM sync input signal through TRGMMUX configuration. When the output signal of GPTMR rises, the synchronization event of SDM is triggered.
SDM samples data with synchronization signals. When a synchronization event occurs, SDM begins sampling data into the FIFO. Once the data in the FIFO reaches a preset threshold, SDM triggers a data ready interrupt to read the data, and the hardware clears the synchronization event flag, halting further sampling until the next synchronization event takes place.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Selected option: 4</span>

<span class="go">sdm sample data with sync signal. 1 time</span>
<span class="go">203.88mV</span>
<span class="go">203.84mV</span>
<span class="go">203.90mV</span>
<span class="go">203.87mV</span>
<span class="go">203.91mV</span>
<span class="go">203.92mV</span>
<span class="go">203.85mV</span>
<span class="go">203.85mV</span>
<span class="go">sdm sample data with sync signal. 2 time</span>
<span class="go">203.90mV</span>
<span class="go">203.96mV</span>
<span class="go">203.97mV</span>
<span class="go">203.93mV</span>
<span class="go">203.94mV</span>
<span class="go">203.86mV</span>
<span class="go">203.89mV</span>
<span class="go">203.90mV</span>
<span class="go">sdm sample data with sync signal. 3 time</span>
<span class="go">203.94mV</span>
<span class="go">204.03mV</span>
<span class="go">203.97mV</span>
<span class="go">203.91mV</span>
<span class="go">203.89mV</span>
<span class="go">203.87mV</span>
<span class="go">203.93mV</span>
<span class="go">203.97mV</span>
<span class="go">sdm sample data with sync signal. 4 time</span>
<span class="go">203.93mV</span>
<span class="go">204.13mV</span>
<span class="go">204.14mV</span>
<span class="go">204.16mV</span>
<span class="go">204.17mV</span>
<span class="go">204.13mV</span>
<span class="go">204.14mV</span>
<span class="go">204.12mV</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, HPMicro.
      <span class="lastupdated">Last updated on Mar 31, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>