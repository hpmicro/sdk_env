<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__foc_8c" kind="file" language="C++">
    <compoundname>hpm_foc.c</compoundname>
    <includes refid="hpm__common_8h" local="yes">hpm_common.h</includes>
    <includes refid="hpm__bldc__define_8h" local="yes">hpm_bldc_define.h</includes>
    <includes refid="hpm__foc_8h" local="yes">hpm_foc.h</includes>
    <includes refid="hpm__smc_8h" local="yes">hpm_smc.h</includes>
    <incdepgraph>
      <node id="2">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>hpm_bldc_define.h</label>
        <link refid="hpm__bldc__define_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>hpm_foc.h</label>
        <link refid="hpm__foc_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>hpm_motor_math.h</label>
        <link refid="hpm__motor__math_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>hpm_smc.h</label>
        <link refid="hpm__smc_8h"/>
      </node>
      <node id="1">
        <label>middleware/hpm_mcl/sensor_control/hpm_foc.c</label>
        <link refid="hpm__foc_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>assert.h</label>
      </node>
      <node id="10">
        <label>math.h</label>
      </node>
      <node id="4">
        <label>stdbool.h</label>
      </node>
      <node id="5">
        <label>stdint.h</label>
      </node>
      <node id="7">
        <label>stdlib.h</label>
      </node>
      <node id="6">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="define">
      <memberdef kind="define" id="hpm__foc_8c_1a9c7b069fee3c8184e14a7de8e5da2dc6" prot="public" static="no">
        <name>PRECISION</name>
        <initializer>(0.18)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensor_control/hpm_foc.c" line="48" column="9" bodyfile="middleware/hpm_mcl/sensor_control/hpm_foc.c" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" prot="public" static="no">
        <name>SIN_TABLE_INDEX_MAX</name>
        <initializer>(500)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensor_control/hpm_foc.c" line="49" column="9" bodyfile="middleware/hpm_mcl/sensor_control/hpm_foc.c" bodystart="49" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="var">
      <memberdef kind="variable" id="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" prot="public" static="no" mutable="no">
        <type>const float</type>
        <definition>const float bldc_foc_sintable[(500)+1]</definition>
        <argsstring>[(500)+1]</argsstring>
        <name>bldc_foc_sintable</name>
        <initializer>= {

 0.000000,
 0.003142, 0.006283, 0.009425, 0.012566, 0.015707, 0.018848, 0.021989, 0.025130, 0.028271, 0.031411,
 0.034551, 0.037690, 0.040829, 0.043968, 0.047106, 0.050244, 0.053382, 0.056519, 0.059655, 0.062791,
 0.065926, 0.069060, 0.072194, 0.075327, 0.078459, 0.081591, 0.084721, 0.087851, 0.090980, 0.094108,
 0.097235, 0.100362, 0.103487, 0.106611, 0.109734, 0.112856, 0.115977, 0.119097, 0.122216, 0.125333,
 0.128449, 0.131564, 0.134678, 0.137790, 0.140901, 0.144011, 0.147119, 0.150226, 0.153331, 0.156434,
 0.159537, 0.162637, 0.165736, 0.168833, 0.171929, 0.175023, 0.178115, 0.181206, 0.184294, 0.187381,
 0.190466, 0.193549, 0.196631, 0.199710, 0.202787, 0.205863, 0.208936, 0.212007, 0.215076, 0.218143,
 0.221208, 0.224271, 0.227331, 0.230389, 0.233445, 0.236499, 0.239550, 0.242599, 0.245646, 0.248690,
 0.251732, 0.254771, 0.257807, 0.260842, 0.263873, 0.266902, 0.269928, 0.272952, 0.275973, 0.278991,
 0.282007, 0.285019, 0.288029, 0.291036, 0.294040, 0.297042, 0.300040, 0.303035, 0.306028, 0.309017,
 0.312003, 0.314987, 0.317967, 0.320944, 0.323917, 0.326888, 0.329855, 0.332820, 0.335780, 0.338738,
 0.341692, 0.344643, 0.347590, 0.350534, 0.353475, 0.356412, 0.359345, 0.362275, 0.365202, 0.368125,
 0.371044, 0.373959, 0.376871, 0.379779, 0.382683, 0.385584, 0.388481, 0.391374, 0.394263, 0.397148,
 0.400029, 0.402906, 0.405780, 0.408649, 0.411514, 0.414376, 0.417233, 0.420086, 0.422935, 0.425779,
 0.428620, 0.431456, 0.434288, 0.437116, 0.439939, 0.442758, 0.445573, 0.448383, 0.451189, 0.453990,
 0.456787, 0.459580, 0.462368, 0.465151, 0.467930, 0.470704, 0.473473, 0.476238, 0.478998, 0.481754,
 0.484504, 0.487250, 0.489991, 0.492727, 0.495459, 0.498185, 0.500907, 0.503623, 0.506335, 0.509041,
 0.511743, 0.514440, 0.517131, 0.519817, 0.522499, 0.525175, 0.527846, 0.530511, 0.533172, 0.535827,
 0.538477, 0.541121, 0.543760, 0.546394, 0.549023, 0.551646, 0.554263, 0.556876, 0.559482, 0.562083,
 0.564679, 0.567269, 0.569853, 0.572432, 0.575005, 0.577573, 0.580134, 0.582690, 0.585241, 0.587785,
 0.590324, 0.592857, 0.595384, 0.597905, 0.600420, 0.602930, 0.605433, 0.607930, 0.610422, 0.612907,
 0.615386, 0.617860, 0.620327, 0.622788, 0.625243, 0.627691, 0.630134, 0.632570, 0.635000, 0.637424,
 0.639841, 0.642253, 0.644657, 0.647056, 0.649448, 0.651834, 0.654213, 0.656586, 0.658952, 0.661312,
 0.663665, 0.666012, 0.668352, 0.670686, 0.673013, 0.675333, 0.677646, 0.679953, 0.682254, 0.684547,
 0.686834, 0.689114, 0.691387, 0.693653, 0.695913, 0.698165, 0.700411, 0.702650, 0.704882, 0.707107,
 0.709325, 0.711536, 0.713740, 0.715936, 0.718126, 0.720309, 0.722485, 0.724653, 0.726814, 0.728969,
 0.731116, 0.733255, 0.735388, 0.737513, 0.739631, 0.741742, 0.743845, 0.745941, 0.748030, 0.750111,
 0.752185, 0.754251, 0.756310, 0.758362, 0.760406, 0.762443, 0.764472, 0.766493, 0.768507, 0.770513,
 0.772512, 0.774503, 0.776487, 0.778462, 0.780430, 0.782391, 0.784343, 0.786288, 0.788226, 0.790155,
 0.792077, 0.793990, 0.795896, 0.797794, 0.799685, 0.801567, 0.803441, 0.805308, 0.807166, 0.809017,
 0.810860, 0.812694, 0.814521, 0.816339, 0.818150, 0.819952, 0.821746, 0.823533, 0.825311, 0.827081,
 0.828842, 0.830596, 0.832341, 0.834078, 0.835807, 0.837528, 0.839240, 0.840945, 0.842640, 0.844328,
 0.846007, 0.847678, 0.849340, 0.850994, 0.852640, 0.854277, 0.855906, 0.857527, 0.859139, 0.860742,
 0.862337, 0.863923, 0.865501, 0.867071, 0.868632, 0.870184, 0.871727, 0.873262, 0.874789, 0.876307,
 0.877816, 0.879316, 0.880808, 0.882291, 0.883766, 0.885231, 0.886688, 0.888136, 0.889576, 0.891007,
 0.892428, 0.893841, 0.895246, 0.896641, 0.898028, 0.899405, 0.900774, 0.902134, 0.903485, 0.904827,
 0.906160, 0.907484, 0.908800, 0.910106, 0.911403, 0.912692, 0.913971, 0.915241, 0.916502, 0.917755,
 0.918998, 0.920232, 0.921457, 0.922673, 0.923880, 0.925077, 0.926266, 0.927445, 0.928615, 0.929776,
 0.930928, 0.932071, 0.933205, 0.934329, 0.935444, 0.936550, 0.937646, 0.938734, 0.939812, 0.940881,
 0.941940, 0.942991, 0.944031, 0.945063, 0.946085, 0.947098, 0.948102, 0.949096, 0.950081, 0.951057,
 0.952023, 0.952979, 0.953927, 0.954865, 0.955793, 0.956712, 0.957622, 0.958522, 0.959412, 0.960294,
 0.961165, 0.962028, 0.962880, 0.963724, 0.964557, 0.965382, 0.966196, 0.967001, 0.967797, 0.968583,
 0.969360, 0.970127, 0.970884, 0.971632, 0.972370, 0.973099, 0.973817, 0.974527, 0.975227, 0.975917,
 0.976597, 0.977268, 0.977929, 0.978581, 0.979223, 0.979855, 0.980478, 0.981091, 0.981694, 0.982287,
 0.982871, 0.983445, 0.984010, 0.984564, 0.985109, 0.985645, 0.986170, 0.986686, 0.987192, 0.987688,
 0.988175, 0.988652, 0.989119, 0.989576, 0.990024, 0.990461, 0.990889, 0.991308, 0.991716, 0.992115,
 0.992504, 0.992883, 0.993252, 0.993611, 0.993961, 0.994301, 0.994631, 0.994951, 0.995261, 0.995562,
 0.995853, 0.996134, 0.996405, 0.996666, 0.996917, 0.997159, 0.997391, 0.997613, 0.997825, 0.998027,
 0.998219, 0.998402, 0.998574, 0.998737, 0.998890, 0.999033, 0.999166, 0.999289, 0.999403, 0.999507,
 0.999600, 0.999684, 0.999758, 0.999822, 0.999877, 0.999921, 0.999956, 0.999980, 0.999995, 1.000000
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensor_control/hpm_foc.c" line="50" column="13" bodyfile="middleware/hpm_mcl/sensor_control/hpm_foc.c" bodystart="50" bodyend="103"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <member refid="group__mcl__common_1ga21e6e0160fa2456207aacf377918d06e" kind="function"><name>hpm_mcl_nullcallback_func</name></member>
      <member refid="group__mcl__foc__interface_1ga0bb2f359de7fccc31bcce923d4baf102" kind="function"><name>hpm_mcl_bldc_foc_al_speed</name></member>
      <memberdef kind="function" id="hpm__foc_8c_1ab297c2f9ab0e7a5c8496a0f4147b7f78" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void bldc_foc_sin_cos</definition>
        <argsstring>(HPM_MOTOR_MATH_TYPE angle, HPM_MOTOR_MATH_TYPE angle_precision, HPM_MOTOR_MATH_TYPE *sin_angle, HPM_MOTOR_MATH_TYPE *cos_angle)</argsstring>
        <name>bldc_foc_sin_cos</name>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref></type>
          <declname>angle</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref></type>
          <declname>angle_precision</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref> *</type>
          <declname>sin_angle</declname>
        </param>
        <param>
          <type><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref> *</type>
          <declname>cos_angle</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="middleware/hpm_mcl/sensor_control/hpm_foc.c" line="127" column="13" bodyfile="middleware/hpm_mcl/sensor_control/hpm_foc.c" bodystart="127" bodyend="150"/>
      </memberdef>
      <member refid="group__mcl__foc__interface_1ga16ebe05a270b27ef19caff2ec11d889c" kind="function"><name>hpm_mcl_bldc_foc_inv_park</name></member>
      <member refid="group__mcl__foc__interface_1ga1376654cf0717b10cd184cee322ff3d2" kind="function"><name>hpm_mcl_bldc_foc_svpwm</name></member>
      <member refid="group__mcl__foc__interface_1gab62f285208cf814284e8ac580020d5ba" kind="function"><name>hpm_mcl_bldc_foc_clarke</name></member>
      <member refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kind="function"><name>hpm_mcl_bldc_foc_park</name></member>
      <member refid="group__mcl__foc__interface_1gaf6f6289078476310b0382641229a55d6" kind="function"><name>hpm_mcl_bldc_foc_current_cal</name></member>
      <member refid="group__mcl__foc__interface_1gad0db54eeda9ce4c8e5fa45a8e9021dd4" kind="function"><name>hpm_mcl_bldc_foc_pi_contrl</name></member>
      <member refid="group__mcl__foc__interface_1ga81607f4d69d733e2be114a1061b690d1" kind="function"><name>hpm_mcl_bldc_foc_ctrl_dq_to_pwm</name></member>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2021<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__common_8h" kindref="compound">hpm_common.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__bldc__define_8h" kindref="compound">hpm_bldc_define.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__foc_8h" kindref="compound">hpm_foc.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__smc_8h" kindref="compound">hpm_smc.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__common_1ga21e6e0160fa2456207aacf377918d06e" kindref="member">hpm_mcl_nullcallback_func</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="14"><highlight class="normal">{</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1)<sp/>{</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="18"><highlight class="normal">}</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>#include<sp/>&lt;stdio.h&gt;</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>#include<sp/>&lt;math.h&gt;</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>#define<sp/>NUM<sp/>501</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>#define<sp/>PRECISION<sp/>0.18</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>#define<sp/>PI<sp/>HPM_PI</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>int<sp/>main()</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>{</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>short<sp/>i;</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>printf(&quot;staitc<sp/>const<sp/>float<sp/>bldc_foc_sintable[%d]<sp/>=\r&quot;,NUM);</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>printf(&quot;{\r&quot;);</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>for(i=0;i&lt;NUM;i++)<sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;<sp/>%f&quot;,sin(i*PRECISION*PI/180));</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(i<sp/>!=<sp/>NUM-1)<sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;,&quot;);</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if((i%10)<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;\r&quot;);</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>printf(&quot;};\r&quot;);</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>return<sp/>0;</highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/>*<sp/>}</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PRECISION<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0.18)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SIN_TABLE_INDEX_MAX<sp/><sp/><sp/>(500)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" kindref="member">SIN_TABLE_INDEX_MAX</ref><sp/>+<sp/>1]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/>0.000000,</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/>0.003142,<sp/>0.006283,<sp/>0.009425,<sp/>0.012566,<sp/>0.015707,<sp/>0.018848,<sp/>0.021989,<sp/>0.025130,<sp/>0.028271,<sp/>0.031411,</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/>0.034551,<sp/>0.037690,<sp/>0.040829,<sp/>0.043968,<sp/>0.047106,<sp/>0.050244,<sp/>0.053382,<sp/>0.056519,<sp/>0.059655,<sp/>0.062791,</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/>0.065926,<sp/>0.069060,<sp/>0.072194,<sp/>0.075327,<sp/>0.078459,<sp/>0.081591,<sp/>0.084721,<sp/>0.087851,<sp/>0.090980,<sp/>0.094108,</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/>0.097235,<sp/>0.100362,<sp/>0.103487,<sp/>0.106611,<sp/>0.109734,<sp/>0.112856,<sp/>0.115977,<sp/>0.119097,<sp/>0.122216,<sp/>0.125333,</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/>0.128449,<sp/>0.131564,<sp/>0.134678,<sp/>0.137790,<sp/>0.140901,<sp/>0.144011,<sp/>0.147119,<sp/>0.150226,<sp/>0.153331,<sp/>0.156434,</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/>0.159537,<sp/>0.162637,<sp/>0.165736,<sp/>0.168833,<sp/>0.171929,<sp/>0.175023,<sp/>0.178115,<sp/>0.181206,<sp/>0.184294,<sp/>0.187381,</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/>0.190466,<sp/>0.193549,<sp/>0.196631,<sp/>0.199710,<sp/>0.202787,<sp/>0.205863,<sp/>0.208936,<sp/>0.212007,<sp/>0.215076,<sp/>0.218143,</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/>0.221208,<sp/>0.224271,<sp/>0.227331,<sp/>0.230389,<sp/>0.233445,<sp/>0.236499,<sp/>0.239550,<sp/>0.242599,<sp/>0.245646,<sp/>0.248690,</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/>0.251732,<sp/>0.254771,<sp/>0.257807,<sp/>0.260842,<sp/>0.263873,<sp/>0.266902,<sp/>0.269928,<sp/>0.272952,<sp/>0.275973,<sp/>0.278991,</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/>0.282007,<sp/>0.285019,<sp/>0.288029,<sp/>0.291036,<sp/>0.294040,<sp/>0.297042,<sp/>0.300040,<sp/>0.303035,<sp/>0.306028,<sp/>0.309017,</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/>0.312003,<sp/>0.314987,<sp/>0.317967,<sp/>0.320944,<sp/>0.323917,<sp/>0.326888,<sp/>0.329855,<sp/>0.332820,<sp/>0.335780,<sp/>0.338738,</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/>0.341692,<sp/>0.344643,<sp/>0.347590,<sp/>0.350534,<sp/>0.353475,<sp/>0.356412,<sp/>0.359345,<sp/>0.362275,<sp/>0.365202,<sp/>0.368125,</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/>0.371044,<sp/>0.373959,<sp/>0.376871,<sp/>0.379779,<sp/>0.382683,<sp/>0.385584,<sp/>0.388481,<sp/>0.391374,<sp/>0.394263,<sp/>0.397148,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/>0.400029,<sp/>0.402906,<sp/>0.405780,<sp/>0.408649,<sp/>0.411514,<sp/>0.414376,<sp/>0.417233,<sp/>0.420086,<sp/>0.422935,<sp/>0.425779,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/>0.428620,<sp/>0.431456,<sp/>0.434288,<sp/>0.437116,<sp/>0.439939,<sp/>0.442758,<sp/>0.445573,<sp/>0.448383,<sp/>0.451189,<sp/>0.453990,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/>0.456787,<sp/>0.459580,<sp/>0.462368,<sp/>0.465151,<sp/>0.467930,<sp/>0.470704,<sp/>0.473473,<sp/>0.476238,<sp/>0.478998,<sp/>0.481754,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/>0.484504,<sp/>0.487250,<sp/>0.489991,<sp/>0.492727,<sp/>0.495459,<sp/>0.498185,<sp/>0.500907,<sp/>0.503623,<sp/>0.506335,<sp/>0.509041,</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/>0.511743,<sp/>0.514440,<sp/>0.517131,<sp/>0.519817,<sp/>0.522499,<sp/>0.525175,<sp/>0.527846,<sp/>0.530511,<sp/>0.533172,<sp/>0.535827,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/>0.538477,<sp/>0.541121,<sp/>0.543760,<sp/>0.546394,<sp/>0.549023,<sp/>0.551646,<sp/>0.554263,<sp/>0.556876,<sp/>0.559482,<sp/>0.562083,</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/>0.564679,<sp/>0.567269,<sp/>0.569853,<sp/>0.572432,<sp/>0.575005,<sp/>0.577573,<sp/>0.580134,<sp/>0.582690,<sp/>0.585241,<sp/>0.587785,</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/>0.590324,<sp/>0.592857,<sp/>0.595384,<sp/>0.597905,<sp/>0.600420,<sp/>0.602930,<sp/>0.605433,<sp/>0.607930,<sp/>0.610422,<sp/>0.612907,</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/>0.615386,<sp/>0.617860,<sp/>0.620327,<sp/>0.622788,<sp/>0.625243,<sp/>0.627691,<sp/>0.630134,<sp/>0.632570,<sp/>0.635000,<sp/>0.637424,</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/>0.639841,<sp/>0.642253,<sp/>0.644657,<sp/>0.647056,<sp/>0.649448,<sp/>0.651834,<sp/>0.654213,<sp/>0.656586,<sp/>0.658952,<sp/>0.661312,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/>0.663665,<sp/>0.666012,<sp/>0.668352,<sp/>0.670686,<sp/>0.673013,<sp/>0.675333,<sp/>0.677646,<sp/>0.679953,<sp/>0.682254,<sp/>0.684547,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/>0.686834,<sp/>0.689114,<sp/>0.691387,<sp/>0.693653,<sp/>0.695913,<sp/>0.698165,<sp/>0.700411,<sp/>0.702650,<sp/>0.704882,<sp/>0.707107,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/>0.709325,<sp/>0.711536,<sp/>0.713740,<sp/>0.715936,<sp/>0.718126,<sp/>0.720309,<sp/>0.722485,<sp/>0.724653,<sp/>0.726814,<sp/>0.728969,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/>0.731116,<sp/>0.733255,<sp/>0.735388,<sp/>0.737513,<sp/>0.739631,<sp/>0.741742,<sp/>0.743845,<sp/>0.745941,<sp/>0.748030,<sp/>0.750111,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/>0.752185,<sp/>0.754251,<sp/>0.756310,<sp/>0.758362,<sp/>0.760406,<sp/>0.762443,<sp/>0.764472,<sp/>0.766493,<sp/>0.768507,<sp/>0.770513,</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/>0.772512,<sp/>0.774503,<sp/>0.776487,<sp/>0.778462,<sp/>0.780430,<sp/>0.782391,<sp/>0.784343,<sp/>0.786288,<sp/>0.788226,<sp/>0.790155,</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/>0.792077,<sp/>0.793990,<sp/>0.795896,<sp/>0.797794,<sp/>0.799685,<sp/>0.801567,<sp/>0.803441,<sp/>0.805308,<sp/>0.807166,<sp/>0.809017,</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/>0.810860,<sp/>0.812694,<sp/>0.814521,<sp/>0.816339,<sp/>0.818150,<sp/>0.819952,<sp/>0.821746,<sp/>0.823533,<sp/>0.825311,<sp/>0.827081,</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/>0.828842,<sp/>0.830596,<sp/>0.832341,<sp/>0.834078,<sp/>0.835807,<sp/>0.837528,<sp/>0.839240,<sp/>0.840945,<sp/>0.842640,<sp/>0.844328,</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/>0.846007,<sp/>0.847678,<sp/>0.849340,<sp/>0.850994,<sp/>0.852640,<sp/>0.854277,<sp/>0.855906,<sp/>0.857527,<sp/>0.859139,<sp/>0.860742,</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/>0.862337,<sp/>0.863923,<sp/>0.865501,<sp/>0.867071,<sp/>0.868632,<sp/>0.870184,<sp/>0.871727,<sp/>0.873262,<sp/>0.874789,<sp/>0.876307,</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/>0.877816,<sp/>0.879316,<sp/>0.880808,<sp/>0.882291,<sp/>0.883766,<sp/>0.885231,<sp/>0.886688,<sp/>0.888136,<sp/>0.889576,<sp/>0.891007,</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/>0.892428,<sp/>0.893841,<sp/>0.895246,<sp/>0.896641,<sp/>0.898028,<sp/>0.899405,<sp/>0.900774,<sp/>0.902134,<sp/>0.903485,<sp/>0.904827,</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/>0.906160,<sp/>0.907484,<sp/>0.908800,<sp/>0.910106,<sp/>0.911403,<sp/>0.912692,<sp/>0.913971,<sp/>0.915241,<sp/>0.916502,<sp/>0.917755,</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/>0.918998,<sp/>0.920232,<sp/>0.921457,<sp/>0.922673,<sp/>0.923880,<sp/>0.925077,<sp/>0.926266,<sp/>0.927445,<sp/>0.928615,<sp/>0.929776,</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/>0.930928,<sp/>0.932071,<sp/>0.933205,<sp/>0.934329,<sp/>0.935444,<sp/>0.936550,<sp/>0.937646,<sp/>0.938734,<sp/>0.939812,<sp/>0.940881,</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/>0.941940,<sp/>0.942991,<sp/>0.944031,<sp/>0.945063,<sp/>0.946085,<sp/>0.947098,<sp/>0.948102,<sp/>0.949096,<sp/>0.950081,<sp/>0.951057,</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/>0.952023,<sp/>0.952979,<sp/>0.953927,<sp/>0.954865,<sp/>0.955793,<sp/>0.956712,<sp/>0.957622,<sp/>0.958522,<sp/>0.959412,<sp/>0.960294,</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/>0.961165,<sp/>0.962028,<sp/>0.962880,<sp/>0.963724,<sp/>0.964557,<sp/>0.965382,<sp/>0.966196,<sp/>0.967001,<sp/>0.967797,<sp/>0.968583,</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/>0.969360,<sp/>0.970127,<sp/>0.970884,<sp/>0.971632,<sp/>0.972370,<sp/>0.973099,<sp/>0.973817,<sp/>0.974527,<sp/>0.975227,<sp/>0.975917,</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/>0.976597,<sp/>0.977268,<sp/>0.977929,<sp/>0.978581,<sp/>0.979223,<sp/>0.979855,<sp/>0.980478,<sp/>0.981091,<sp/>0.981694,<sp/>0.982287,</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/>0.982871,<sp/>0.983445,<sp/>0.984010,<sp/>0.984564,<sp/>0.985109,<sp/>0.985645,<sp/>0.986170,<sp/>0.986686,<sp/>0.987192,<sp/>0.987688,</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/>0.988175,<sp/>0.988652,<sp/>0.989119,<sp/>0.989576,<sp/>0.990024,<sp/>0.990461,<sp/>0.990889,<sp/>0.991308,<sp/>0.991716,<sp/>0.992115,</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/>0.992504,<sp/>0.992883,<sp/>0.993252,<sp/>0.993611,<sp/>0.993961,<sp/>0.994301,<sp/>0.994631,<sp/>0.994951,<sp/>0.995261,<sp/>0.995562,</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/>0.995853,<sp/>0.996134,<sp/>0.996405,<sp/>0.996666,<sp/>0.996917,<sp/>0.997159,<sp/>0.997391,<sp/>0.997613,<sp/>0.997825,<sp/>0.998027,</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/>0.998219,<sp/>0.998402,<sp/>0.998574,<sp/>0.998737,<sp/>0.998890,<sp/>0.999033,<sp/>0.999166,<sp/>0.999289,<sp/>0.999403,<sp/>0.999507,</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/>0.999600,<sp/>0.999684,<sp/>0.999758,<sp/>0.999822,<sp/>0.999877,<sp/>0.999921,<sp/>0.999956,<sp/>0.999980,<sp/>0.999995,<sp/>1.000000</highlight></codeline>
<codeline lineno="103"><highlight class="normal">};</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1ga0bb2f359de7fccc31bcce923d4baf102" kindref="member">hpm_mcl_bldc_foc_al_speed</ref>(<ref refid="group__mcl__common_1gab5f6d4a851a3f0430db48f470eed5643" kindref="member">BLDC_CONTRL_SPD_PARA</ref><sp/><sp/>*par)</highlight></codeline>
<codeline lineno="106"><highlight class="normal">{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>delta;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>delta<sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a09afc8ef54dac5877840823b6336834e" kindref="member">speedtheta</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aae8c0f55fe5b29fe995a39c2ffce7ea0" kindref="member">speedlasttheta</ref>;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delta<sp/>&gt;<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(180))<sp/>{</highlight><highlight class="comment">/*-speed*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta<sp/>=<sp/>-par-&gt;<ref refid="structbldc__contrl__spd__par_1aae8c0f55fe5b29fe995a39c2ffce7ea0" kindref="member">speedlasttheta</ref><sp/>-<sp/>(<ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(360)<sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a09afc8ef54dac5877840823b6336834e" kindref="member">speedtheta</ref>);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delta<sp/>&lt;<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-180))<sp/>{</highlight><highlight class="comment">/*+speed*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(360)<sp/>+<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a09afc8ef54dac5877840823b6336834e" kindref="member">speedtheta</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aae8c0f55fe5b29fe995a39c2ffce7ea0" kindref="member">speedlasttheta</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a48174cf7265634f42352ad4712ef3545" kindref="member">speedthetalastn</ref><sp/>+=<sp/>delta;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aae8c0f55fe5b29fe995a39c2ffce7ea0" kindref="member">speedlasttheta</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a09afc8ef54dac5877840823b6336834e" kindref="member">speedtheta</ref>;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1af13571e0493199ddb24e1327ed3f75bd" kindref="member">num</ref>++;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(par-&gt;<ref refid="structbldc__contrl__spd__par_1aaf5431e6a02f734a023393c3252cd5ab" kindref="member">i_speedacq</ref><sp/>==<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1af13571e0493199ddb24e1327ed3f75bd" kindref="member">num</ref>)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1af13571e0493199ddb24e1327ed3f75bd" kindref="member">num</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a78d6b6154c04821363af4c8f14f9664e" kindref="member">o_speedout</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1gaf187d68e04bc38541ce3662e2767d2b3" kindref="member">HPM_MOTOR_MATH_DIV</ref>(par-&gt;<ref refid="structbldc__contrl__spd__par_1a48174cf7265634f42352ad4712ef3545" kindref="member">speedthetalastn</ref>,</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(<ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(par-&gt;<ref refid="structbldc__contrl__spd__par_1a1b5a38249d839503ddbc0b88356f2afc" kindref="member">i_speedlooptime_s</ref>,<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(par-&gt;<ref refid="structbldc__contrl__spd__par_1a1f34705f739c85d3716dde045bfdf0ce" kindref="member">i_motorpar</ref>-&gt;<ref refid="structhpm__motor__par_1a23f0ac7e8dab4cfbce054c8a6fe2f505" kindref="member">i_poles_n</ref>)),<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(360)));</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aea4874fb28dd7936d2f146fae8ca14b8" kindref="member">o_speedout_filter</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aea4874fb28dd7936d2f146fae8ca14b8" kindref="member">o_speedout_filter</ref><sp/>+<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(par-&gt;<ref refid="structbldc__contrl__spd__par_1a85d8a3ff6514959af8679d966714450c" kindref="member">i_speedfilter</ref>,</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(par-&gt;<ref refid="structbldc__contrl__spd__par_1a78d6b6154c04821363af4c8f14f9664e" kindref="member">o_speedout</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1aea4874fb28dd7936d2f146fae8ca14b8" kindref="member">o_speedout_filter</ref>));</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__spd__par_1a48174cf7265634f42352ad4712ef3545" kindref="member">speedthetalastn</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="125"><highlight class="normal">}</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__foc_8c_1ab297c2f9ab0e7a5c8496a0f4147b7f78" kindref="member">bldc_foc_sin_cos</ref>(<ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>angle,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>angle_precision,</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*sin_angle,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*cos_angle)</highlight></codeline>
<codeline lineno="129"><highlight class="normal">{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>int16_t<sp/><sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>angle_int<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(angle);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(angle_int<sp/>&lt;<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(90))<sp/>{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(<ref refid="group__mcl__math__interface_1gaf187d68e04bc38541ce3662e2767d2b3" kindref="member">HPM_MOTOR_MATH_DIV</ref>(angle,<sp/>angle_precision));</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sin_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cos_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" kindref="member">SIN_TABLE_INDEX_MAX</ref><sp/>-<sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(angle_int<sp/>&lt;<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(180))<sp/>{</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(<ref refid="group__mcl__math__interface_1gaf187d68e04bc38541ce3662e2767d2b3" kindref="member">HPM_MOTOR_MATH_DIV</ref>((<ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(180)<sp/>-<sp/>angle),<sp/>angle_precision));</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sin_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cos_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" kindref="member">SIN_TABLE_INDEX_MAX</ref><sp/>-<sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(angle_int<sp/>&lt;<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(270))<sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(<ref refid="group__mcl__math__interface_1gaf187d68e04bc38541ce3662e2767d2b3" kindref="member">HPM_MOTOR_MATH_DIV</ref>((angle<sp/>-<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(180)),<sp/>angle_precision));</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sin_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cos_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" kindref="member">SIN_TABLE_INDEX_MAX</ref><sp/>-<sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(angle_int<sp/>&lt;=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(360))<sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(<ref refid="group__mcl__math__interface_1gaf187d68e04bc38541ce3662e2767d2b3" kindref="member">HPM_MOTOR_MATH_DIV</ref>((<ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(360)-angle),<sp/>angle_precision));</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sin_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cos_angle<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(<ref refid="hpm__foc_8c_1a072d464b5e59081761a1631c6fe6ba14" kindref="member">bldc_foc_sintable</ref>[<ref refid="hpm__foc_8c_1a7c51e1d8d94005d5e081a7c1002ac5c1" kindref="member">SIN_TABLE_INDEX_MAX</ref><sp/>-<sp/><ref refid="hpm__serial__nor__host__spi_8c_1a5686bd21ca67c69ec6c68130387b9493" kindref="member">transfer</ref>]);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="150"><highlight class="normal">}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1ga16ebe05a270b27ef19caff2ec11d889c" kindref="member">hpm_mcl_bldc_foc_inv_park</ref>(<ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>ud,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>uq,</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*ualpha,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*ubeta,</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>sin_angle,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>cos_angle)</highlight></codeline>
<codeline lineno="155"><highlight class="normal">{</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>*ualpha<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(cos_angle,<sp/>ud)<sp/>+<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(-sin_angle,<sp/>uq);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>*ubeta<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(sin_angle,<sp/>ud)<sp/>+<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(cos_angle,<sp/>uq);</highlight></codeline>
<codeline lineno="158"><highlight class="normal">}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1ga1376654cf0717b10cd184cee322ff3d2" kindref="member">hpm_mcl_bldc_foc_svpwm</ref>(<ref refid="group__mcl__common_1ga7b6937e460cb215db88379af9d0adfcd" kindref="member">BLDC_CONTROL_PWM_PARA</ref><sp/>*par)</highlight></codeline>
<codeline lineno="161"><highlight class="normal">{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>ualpha_60,<sp/>ubeta_30;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>uref1,<sp/>uref2,<sp/>uref3;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>tx,<sp/>ty,<sp/>t0;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>tuon,<sp/>tvon,<sp/>twon<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>int8_t<sp/>sector<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>uref1<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(par-&gt;<ref refid="structbldc__control__pwm__par_1a50c12fc435102af8e4309f198372274e" kindref="member">target_beta</ref>);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>ualpha_60<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(par-&gt;<ref refid="structbldc__control__pwm__par_1a9f5cf5d16aeeb1b0eb2845d9674752b3" kindref="member">target_alpha</ref>);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>ubeta_30<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(par-&gt;<ref refid="structbldc__control__pwm__par_1a50c12fc435102af8e4309f198372274e" kindref="member">target_beta</ref>);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>ualpha_60<sp/>=<sp/>(ualpha_60<sp/>*<sp/>14189)<sp/>&gt;&gt;<sp/>14;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>ubeta_30<sp/>=<sp/>ubeta_30<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>uref2<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(ualpha_60<sp/>-<sp/>ubeta_30);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>uref3<sp/>=<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(-ualpha_60<sp/>-<sp/>ubeta_30);</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>pwm_reload<sp/>=<sp/>par-&gt;<ref refid="structbldc__control__pwm__par_1abe14eeb06caf312542bc4c68d1b3d191" kindref="member">pwmout</ref>.<ref refid="structbldc__control__pwmout__par_1ae397fc33c02c8b2fbaa565f43d295d73" kindref="member">i_pwm_reload</ref>;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(uref1<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(uref2<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/>sector<sp/>+<sp/>2;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(uref3<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sector<sp/>=<sp/>sector<sp/>+<sp/>4;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(sector)<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:<sp/></highlight><highlight class="comment">/*<sp/>sector2<sp/><sp/>000<sp/>010<sp/>110<sp/>111<sp/>110<sp/>010<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>-uref2;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>-uref3;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>tx<sp/>+<sp/>ty<sp/>&gt;<sp/>T<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>ty<sp/>+<sp/>twon;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>tx<sp/>+<sp/>tuon;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:<sp/></highlight><highlight class="comment">/*<sp/>sector6<sp/><sp/>000<sp/><sp/><sp/>100<sp/>101<sp/>111<sp/>101<sp/>100<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>-uref3;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>-uref1;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>ty<sp/>+<sp/>tvon;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>tx<sp/>+<sp/>twon;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:<sp/></highlight><highlight class="comment">/*<sp/>sector1<sp/><sp/>000<sp/>100<sp/>110<sp/>111<sp/>110<sp/>100<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>uref2;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>uref1;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>ty<sp/>+<sp/>twon;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>tx<sp/>+<sp/>tvon;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:<sp/></highlight><highlight class="comment">/*<sp/>sector4<sp/><sp/>000<sp/>001<sp/>011<sp/>111<sp/>011<sp/>001<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>-uref1;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>-uref2;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>ty<sp/>+<sp/>tuon;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>tx<sp/>+<sp/>tvon;</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>5:<sp/></highlight><highlight class="comment">/*<sp/>sector5<sp/>000<sp/>010<sp/>011<sp/>111<sp/>011<sp/>010<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>uref1;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>uref3;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>ty<sp/>+<sp/>tuon;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>tx<sp/>+<sp/>twon;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>6:<sp/></highlight><highlight class="comment">/*<sp/>sector6<sp/>000<sp/>001<sp/>101<sp/>111<sp/>101<sp/>001<sp/>000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>uref3;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>uref2;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx<sp/>-<sp/>ty;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(t0<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tx<sp/>=<sp/>((float)tx<sp/>/<sp/>(tx<sp/>+<sp/>ty))<sp/>*<sp/>pwm_reload;</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ty<sp/>=<sp/>pwm_reload<sp/>-<sp/>tx;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>t0<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>ty<sp/>+<sp/>tvon;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>tx<sp/>+<sp/>tuon;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>(int)(pwm_reload/2);</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>(int)(pwm_reload/2);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>(int)(pwm_reload/2);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__control__pwm__par_1afc97b7062c3a7313e401790f6ce7bf1d" kindref="member">sector</ref><sp/>=<sp/>sector;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tuon<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuon<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tuon<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tvon<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tuon<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>twon<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__control__pwm__par_1abe14eeb06caf312542bc4c68d1b3d191" kindref="member">pwmout</ref>.<ref refid="structbldc__control__pwmout__par_1a0def2216d1b979d91b18b1a5c43eaeb9" kindref="member">pwm_u</ref><sp/>=<sp/>tuon;</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__control__pwm__par_1abe14eeb06caf312542bc4c68d1b3d191" kindref="member">pwmout</ref>.<ref refid="structbldc__control__pwmout__par_1af4d7e389687a09763217d10e22906729" kindref="member">pwm_v</ref><sp/>=<sp/>tvon;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__control__pwm__par_1abe14eeb06caf312542bc4c68d1b3d191" kindref="member">pwmout</ref>.<ref refid="structbldc__control__pwmout__par_1a0b076b71433403a1387b2ea3cb8ad28f" kindref="member">pwm_w</ref><sp/>=<sp/>twon;</highlight></codeline>
<codeline lineno="283"><highlight class="normal">}</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1gab62f285208cf814284e8ac580020d5ba" kindref="member">hpm_mcl_bldc_foc_clarke</ref>(<ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>currentu,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>currentv,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>currentw,</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*currentalpha,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*currentbeta)</highlight></codeline>
<codeline lineno="287"><highlight class="normal">{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>curbeta;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)currentw;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentalpha<sp/>=<sp/>currentu;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>curbeta<sp/>=<sp/>(((int)(9370<sp/>*<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(currentu)))<sp/>+<sp/>((int)(18918<sp/>*<sp/><ref refid="group__mcl__math__interface_1gaa4ec0ac0a99da41485f0e62564b70e57" kindref="member">HPM_MOTOR_MATH_MDF_FL</ref>(currentv))))&gt;&gt;14;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentbeta<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(curbeta);</highlight></codeline>
<codeline lineno="294"><highlight class="normal">}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kindref="member">hpm_mcl_bldc_foc_park</ref>(<ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>currentalpha,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>currentbeta,</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*currentd,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>*currentq,</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>sin_angle,<sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>cos_angle)</highlight></codeline>
<codeline lineno="299"><highlight class="normal">{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentd<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(cos_angle,<sp/>currentalpha)<sp/>+<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(sin_angle,<sp/>currentbeta);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentq<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(-sin_angle,<sp/>currentalpha)<sp/>+<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(cos_angle,<sp/>currentbeta);</highlight></codeline>
<codeline lineno="302"><highlight class="normal">}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1gaf6f6289078476310b0382641229a55d6" kindref="member">hpm_mcl_bldc_foc_current_cal</ref>(<ref refid="group__mcl__common_1gaf3faf168ae6560bf936d844c60287856" kindref="member">BLDC_CONTROL_CURRENT_PARA</ref><sp/>*par)</highlight></codeline>
<codeline lineno="305"><highlight class="normal">{</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1a0231f4c24473aeec9f12b68340260e5e" kindref="member">cal_u</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(par-&gt;<ref refid="structbldc__contrl__current__par_1a4351b6444e90de088c617543d9904779" kindref="member">adc_u_middle</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1ab0255cde1609d0196c83762bb398bf6b" kindref="member">adc_u</ref>);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1a148f75da8d04c52457742f32e1dd6de4" kindref="member">cal_v</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(par-&gt;<ref refid="structbldc__contrl__current__par_1a830c84bc06dad90e51595b6405c55e69" kindref="member">adc_v_middle</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1a6274e86d4b62c39af57ee03a2586d1fb" kindref="member">adc_v</ref>);</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1ac676ce4207d66b3354e8817c5db8ba24" kindref="member">cal_w</ref><sp/>=<sp/><ref refid="group__mcl__math__interface_1ga7523d124d3c2ff800cb2432bc51b6e8f" kindref="member">HPM_MOTOR_MATH_FL_MDF</ref>(-(par-&gt;<ref refid="structbldc__contrl__current__par_1a0231f4c24473aeec9f12b68340260e5e" kindref="member">cal_u</ref><sp/>+<sp/>par-&gt;<ref refid="structbldc__contrl__current__par_1a148f75da8d04c52457742f32e1dd6de4" kindref="member">cal_v</ref>));</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal">}</highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1gad0db54eeda9ce4c8e5fa45a8e9021dd4" kindref="member">hpm_mcl_bldc_foc_pi_contrl</ref>(<ref refid="group__mcl__common_1gae35eea906b3329a7d0dd064ae3ab2434" kindref="member">BLDC_CONTRL_PID_PARA</ref><sp/>*par)</highlight></codeline>
<codeline lineno="313"><highlight class="normal">{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>curerr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>portion_asp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>portion_asi<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>curerr<sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1a0bfe7b8c1eeb6eb9327d6ff12bf17666" kindref="member">target</ref><sp/>-<sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1a0d19b05d1d0538b7aa52c557f2c9858b" kindref="member">cur</ref>;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asp<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(curerr,<sp/>(par-&gt;<ref refid="structbldc__contrl__pid__par_1a4ac217567be814d244a10888616496c6" kindref="member">i_kp</ref>));</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>portion_asi<sp/>=<sp/><ref refid="group__mcl__math__interface_1ga06ecd9067c7f24347a39ebd3705204db" kindref="member">HPM_MOTOR_MATH_MUL</ref>(curerr,<sp/>(par-&gt;<ref refid="structbldc__contrl__pid__par_1a8801678bd468620bab9c8b752728f289" kindref="member">i_ki</ref>))<sp/>+<sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1ac9b12722fdf27d755fe71c298257c067" kindref="member">mem</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>portion_asi<sp/>+<sp/>portion_asp;</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result<sp/>&lt;<sp/>(-par-&gt;<ref refid="structbldc__contrl__pid__par_1a8528f4d2de7604af531beaa910325e5d" kindref="member">i_max</ref>))<sp/>{</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>-par-&gt;<ref refid="structbldc__contrl__pid__par_1a8528f4d2de7604af531beaa910325e5d" kindref="member">i_max</ref>;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result<sp/>&gt;<sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1a8528f4d2de7604af531beaa910325e5d" kindref="member">i_max</ref>)<sp/>{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1a8528f4d2de7604af531beaa910325e5d" kindref="member">i_max</ref>;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1ac9b12722fdf27d755fe71c298257c067" kindref="member">mem</ref><sp/>=<sp/>portion_asi;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref><sp/>=<sp/>result;</highlight></codeline>
<codeline lineno="334"><highlight class="normal">}</highlight></codeline>
<codeline lineno="335"><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__mcl__foc__interface_1ga81607f4d69d733e2be114a1061b690d1" kindref="member">hpm_mcl_bldc_foc_ctrl_dq_to_pwm</ref>(<ref refid="group__mcl__common_1ga3a102bd1f38d2949774b4acca548fd30" kindref="member">BLDC_CONTROL_FOC_PARA</ref><sp/>*par)</highlight></codeline>
<codeline lineno="337"><highlight class="normal">{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>sin_angle<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__math__interface_1ga54bf15eb67d9e80e4e6749bf0a23efba" kindref="member">HPM_MOTOR_MATH_TYPE</ref><sp/>cos_angle<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a069a6c0a5f1417d1649f1a9e7e18d60f" kindref="member">func_sampl</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gab62f285208cf814284e8ac580020d5ba" kindref="member">hpm_mcl_bldc_foc_clarke</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a0231f4c24473aeec9f12b68340260e5e" kindref="member">cal_u</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1a148f75da8d04c52457742f32e1dd6de4" kindref="member">cal_v</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a5e8134c2d138ff9d8f4f0dc3034616d2" kindref="member">samplcurpar</ref>.<ref refid="structbldc__contrl__current__par_1ac676ce4207d66b3354e8817c5db8ba24" kindref="member">cal_w</ref>,</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref>);</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hpm__foc_8c_1ab297c2f9ab0e7a5c8496a0f4147b7f78" kindref="member">bldc_foc_sin_cos</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1abff28641a2ef3aa01a993df4164b3aac" kindref="member">electric_angle</ref>,<sp/><ref refid="hpm__foc_8c_1a9c7b069fee3c8184e14a7de8e5da2dc6" kindref="member">PRECISION</ref>,<sp/>&amp;sin_angle,<sp/>&amp;cos_angle);</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1gad604720fcf03cb84217838c915d46495" kindref="member">hpm_mcl_bldc_foc_park</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a2458a1fbf176e422507751ceb28e117e" kindref="member">ialpha</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a3efcb888dad9b9c253b60700d2e94331" kindref="member">ibeta</ref>,</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0d19b05d1d0538b7aa52c557f2c9858b" kindref="member">cur</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a0d19b05d1d0538b7aa52c557f2c9858b" kindref="member">cur</ref>,</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1aba97df8f5bfe143729f8c0024496a13e" kindref="member">func_pid</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>);</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1aba97df8f5bfe143729f8c0024496a13e" kindref="member">func_pid</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>);</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__mcl__foc__interface_1ga16ebe05a270b27ef19caff2ec11d889c" kindref="member">hpm_mcl_bldc_foc_inv_park</ref>(par-&gt;<ref refid="structbldc__contrl__foc__par_1a446fcb7c53fc998abfd0ce6434a35524" kindref="member">currentdpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref>,<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1a4fe0f3d05b84240b93b94087781075b0" kindref="member">currentqpipar</ref>.<ref refid="structbldc__contrl__pid__par_1a7bc7d7e2360ac33b70fcb1890c7a9b0b" kindref="member">outval</ref>,</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1af4083570644b122dbb3ad9e3f2b2b4fb" kindref="member">ualpha</ref>,<sp/>&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1aedd4335eff1e2263725dafed82d899df" kindref="member">ubeta</ref>,<sp/>sin_angle,<sp/>cos_angle);</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1a9f5cf5d16aeeb1b0eb2845d9674752b3" kindref="member">target_alpha</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1af4083570644b122dbb3ad9e3f2b2b4fb" kindref="member">ualpha</ref>;</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1a50c12fc435102af8e4309f198372274e" kindref="member">target_beta</ref><sp/>=<sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1aedd4335eff1e2263725dafed82d899df" kindref="member">ubeta</ref>;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>.<ref refid="structbldc__control__pwm__par_1aa4e5d8fa9dfb36c6587ace7c6f976fc0" kindref="member">func_spwm</ref>(&amp;par-&gt;<ref refid="structbldc__contrl__foc__par_1ad2d97b7dc6bf92f8d96b021b9c6da7b0" kindref="member">pwmpar</ref>);</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="middleware/hpm_mcl/sensor_control/hpm_foc.c"/>
  </compounddef>
</doxygen>
