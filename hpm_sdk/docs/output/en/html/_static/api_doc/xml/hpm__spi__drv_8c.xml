<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__spi__drv_8c" kind="file" language="C++">
    <compoundname>hpm_spi_drv.c</compoundname>
    <includes refid="hpm__common_8h" local="yes">hpm_common.h</includes>
    <includes refid="hpm__spi__drv_8h" local="yes">hpm_spi_drv.h</includes>
    <incdepgraph>
      <node id="2">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>hpm_spi_drv.h</label>
        <link refid="hpm__spi__drv_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>drivers/src/hpm_spi_drv.c</label>
        <link refid="hpm__spi__drv_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>assert.h</label>
      </node>
      <node id="10">
        <label>hpm_soc_feature.h</label>
      </node>
      <node id="9">
        <label>hpm_spi_regs.h</label>
      </node>
      <node id="4">
        <label>stdbool.h</label>
      </node>
      <node id="5">
        <label>stdint.h</label>
      </node>
      <node id="7">
        <label>stdlib.h</label>
      </node>
      <node id="6">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="define">
      <memberdef kind="define" id="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" prot="public" static="no">
        <name>HPM_SPI_DRV_DEFAULT_RETRY_COUNT</name>
        <initializer>(5000U)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_spi_drv.c" line="13" column="9" bodyfile="drivers/src/hpm_spi_drv.c" bodystart="13" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <member refid="group__spi__interface_1ga0bd47db6a31f4592c25b0b0ce4d26635" kind="function"><name>spi_wait_for_idle_status</name></member>
      <member refid="group__spi__interface_1ga3292349e298ddb9f64819946afcea7d2" kind="function"><name>spi_wait_for_busy_status</name></member>
      <member refid="group__spi__interface_1gad353177892d840687cd3ce3605bf0621" kind="function"><name>spi_write_command</name></member>
      <member refid="group__spi__interface_1ga8dc3d203a1773ffb50514cdb9bced308" kind="function"><name>spi_read_command</name></member>
      <member refid="group__spi__interface_1gadf1e05aae5113bde63bc975a18a85f67" kind="function"><name>spi_write_address</name></member>
      <member refid="group__spi__interface_1ga4f7dfe7ae3b9d7f280fc1aa47e228586" kind="function"><name>spi_write_data</name></member>
      <member refid="group__spi__interface_1ga8b614bbd1672d0e1abef6a3e95c1040f" kind="function"><name>spi_read_data</name></member>
      <member refid="group__spi__interface_1gabff410d7a08e77b7a8094df27d266605" kind="function"><name>spi_write_read_data</name></member>
      <memberdef kind="function" id="hpm__spi__drv_8c_1a94c119a571618d93b7c05f6935ad372c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>static hpm_stat_t spi_no_data</definition>
        <argsstring>(SPI_Type *ptr, spi_mode_selection_t mode, spi_control_config_t *config)</argsstring>
        <name>spi_no_data</name>
        <param>
          <type><ref refid="structSPI__Type" kindref="compound">SPI_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref></type>
          <declname>mode</declname>
        </param>
        <param>
          <type><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref> *</type>
          <declname>config</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="drivers/src/hpm_spi_drv.c" line="260" column="19" bodyfile="drivers/src/hpm_spi_drv.c" bodystart="260" bodyend="269"/>
      </memberdef>
      <member refid="group__spi__interface_1ga3398ff3ef43abb865ba061fdac3922bd" kind="function"><name>spi_master_get_default_timing_config</name></member>
      <member refid="group__spi__interface_1ga31168318ca7a3f8145d6991412bffdb3" kind="function"><name>spi_master_get_default_format_config</name></member>
      <member refid="group__spi__interface_1ga5a4c398026975ffff16080bdf1ba99f7" kind="function"><name>spi_slave_get_default_format_config</name></member>
      <member refid="group__spi__interface_1ga20fe4a9fd4254d69da5b3b5fa33f8f8c" kind="function"><name>spi_master_get_default_control_config</name></member>
      <member refid="group__spi__interface_1ga011f364572dba586730f36c93f589557" kind="function"><name>spi_slave_get_default_control_config</name></member>
      <member refid="group__spi__interface_1ga5f947eba318d5cf434442208fa013890" kind="function"><name>spi_master_timing_init</name></member>
      <member refid="group__spi__interface_1ga6aa789fed3d323a5cf9d541649a909ec" kind="function"><name>spi_format_init</name></member>
      <member refid="group__spi__interface_1gadfc7b3d8df21dcdb70b00ec76896512e" kind="function"><name>spi_control_init</name></member>
      <member refid="group__spi__interface_1ga6541675ce7395a67e896f900a6171133" kind="function"><name>spi_transfer</name></member>
      <member refid="group__spi__interface_1ga302f08c4fb52f1c0ac5049b2b91a8d87" kind="function"><name>spi_setup_dma_transfer</name></member>
      <member refid="group__spi__interface_1ga512b377ea6545958877dcd3f3b62722f" kind="function"><name>spi_directio_enable_output</name></member>
      <member refid="group__spi__interface_1gaeb5f59746b951994a62af4833805f8f7" kind="function"><name>spi_directio_disable_output</name></member>
      <member refid="group__spi__interface_1ga64f70d73d56253d89d2229d30cffecd8" kind="function"><name>spi_directio_write</name></member>
      <member refid="group__spi__interface_1ga494456b6c602ebb92342683413eb03c5" kind="function"><name>spi_directio_read</name></member>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2021<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__common_8h" kindref="compound">hpm_common.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__spi__drv_8h" kindref="compound">hpm_spi_drv.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>HPM_SPI_DRV_DEFAULT_RETRY_COUNT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>the<sp/>waiting<sp/>time<sp/>of<sp/>timeout<sp/>status<sp/>is<sp/>related<sp/>to<sp/>retry<sp/>count<sp/>and<sp/>CPU<sp/>frequency<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HPM_SPI_DRV_DEFAULT_RETRY_COUNT<sp/>(5000U)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga0bd47db6a31f4592c25b0b0ce4d26635" kindref="member">spi_wait_for_idle_status</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="17"><highlight class="normal">{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>status;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1ad79626fe5ae294d6caa65c631c7d31f1" kindref="member">STATUS</ref>;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(status<sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a01ddd2ac88544f9dae6f97f24d902595" kindref="member">SPI_STATUS_SPIACTIVE_MASK</ref>);</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa19319d05fb8a35cc93f77e40e06b9617" kindref="member">status_timeout</ref>;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="34"><highlight class="normal">}</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga3292349e298ddb9f64819946afcea7d2" kindref="member">spi_wait_for_busy_status</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="37"><highlight class="normal">{</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>status;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1ad79626fe5ae294d6caa65c631c7d31f1" kindref="member">STATUS</ref>;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!(status<sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a01ddd2ac88544f9dae6f97f24d902595" kindref="member">SPI_STATUS_SPIACTIVE_MASK</ref>));</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa19319d05fb8a35cc93f77e40e06b9617" kindref="member">status_timeout</ref>;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="54"><highlight class="normal">}</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1gad353177892d840687cd3ce3605bf0621" kindref="member">spi_write_command</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode,<sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,<sp/>uint8_t<sp/>*cmd)</highlight></codeline>
<codeline lineno="57"><highlight class="normal">{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1ae2ea18d885fd14920b6f3a81cd07887a" kindref="member">cmd_enable</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a9a5c4349c6a9e94a38b295854a12f519" kindref="member">CMD</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a587aa6c5d6db9b4d14777759899d9795" kindref="member">SPI_CMD_CMD_SET</ref>(*cmd);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a9a5c4349c6a9e94a38b295854a12f519" kindref="member">CMD</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a587aa6c5d6db9b4d14777759899d9795" kindref="member">SPI_CMD_CMD_SET</ref>(0xff);<sp/></highlight><highlight class="comment">/*<sp/>Write<sp/>a<sp/>dummy<sp/>byte<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="70"><highlight class="normal">}</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga8dc3d203a1773ffb50514cdb9bced308" kindref="member">spi_read_command</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode,<sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,<sp/>uint8_t<sp/>*cmd)</highlight></codeline>
<codeline lineno="73"><highlight class="normal">{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3ea6d237dd86032fe3495c45320e9ba4afb" kindref="member">spi_slave_mode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1a74fadddc760f616fbfad225fbfc4dbc5" kindref="member">slave_config</ref>.<ref refid="structspi__slave__control__config__t_1aac4b171e5eadbd515b19a90b5576d0c8" kindref="member">slave_data_only</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cmd<sp/>=<sp/>(uint8_t)(ptr-&gt;<ref refid="structSPI__Type_1a9a5c4349c6a9e94a38b295854a12f519" kindref="member">CMD</ref><sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac0c9a3cac9af7d1fe1354c656c1178a3" kindref="member">SPI_CMD_CMD_MASK</ref>)<sp/>&gt;&gt;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ae7133d14f76f9970ef27928b20fe78bc" kindref="member">SPI_CMD_CMD_SHIFT</ref>;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="84"><highlight class="normal">}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1gadf1e05aae5113bde63bc975a18a85f67" kindref="member">spi_write_address</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode,<sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,<sp/>uint32_t<sp/>*addr)</highlight></codeline>
<codeline lineno="87"><highlight class="normal">{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa8641b8bfbac0c872484fa3829813b7b" kindref="member">addr_enable</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(addr<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a5d500bc6433705ff83c861a90f75e5ea" kindref="member">ADDR</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ada54aeb6022255ea8737cf5924cb7ccf" kindref="member">SPI_ADDR_ADDR_SET</ref>(*addr);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="98"><highlight class="normal">}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga4f7dfe7ae3b9d7f280fc1aa47e228586" kindref="member">spi_write_data</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>data_len_in_bytes,<sp/>uint8_t<sp/>*buff,<sp/>uint32_t<sp/>count)</highlight></codeline>
<codeline lineno="101"><highlight class="normal">{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>status;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>transferred<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>temp;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>parameter<sp/>validity<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buff<sp/>==<sp/>NULL<sp/>||<sp/>count<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(data_len_in_bytes<sp/>&gt;<sp/>4<sp/>||<sp/>data_len_in_bytes<sp/>&lt;<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>transfer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(transferred<sp/>&lt;<sp/>count)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1ad79626fe5ae294d6caa65c631c7d31f1" kindref="member">STATUS</ref>;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(status<sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a1b9a206c6d5583222b631b58837a76a4" kindref="member">SPI_STATUS_TXFULL_MASK</ref>))<sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>write<sp/>data<sp/>into<sp/>the<sp/>txfifo<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>data_len_in_bytes;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>+=<sp/>*(buff++)<sp/>&lt;&lt;<sp/>i<sp/>*<sp/>8;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a63fce340a6d0378668d55df1e5c2dc99" kindref="member">DATA</ref><sp/>=<sp/>temp;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>transfer<sp/>count<sp/>increment<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transferred++;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>dummy<sp/>state<sp/>may<sp/>triggers<sp/>timeout<sp/>if<sp/>dummy<sp/>count,<sp/>retry<sp/>count,<sp/>spi<sp/>rate<sp/>and<sp/>cpu<sp/>frequency<sp/>are<sp/>inappropriate<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa19319d05fb8a35cc93f77e40e06b9617" kindref="member">status_timeout</ref>;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="143"><highlight class="normal">}</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga8b614bbd1672d0e1abef6a3e95c1040f" kindref="member">spi_read_data</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>data_len_in_bytes,<sp/>uint8_t<sp/>*buff,<sp/>uint32_t<sp/>count)</highlight></codeline>
<codeline lineno="146"><highlight class="normal">{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>transferred<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>temp;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>rx_valid_size<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>j<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>parameter<sp/>validity<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buff<sp/>==<sp/>NULL<sp/>||<sp/>count<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(data_len_in_bytes<sp/>&gt;<sp/>4<sp/>||<sp/>data_len_in_bytes<sp/>&lt;<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>transfer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(transferred<sp/>&lt;<sp/>count)<sp/>{</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rx_valid_size<sp/>=<sp/><ref refid="group__spi__interface_1ga84886a9846cb90b103a964b3e21f758b" kindref="member">spi_get_rx_fifo_valid_data_size</ref>(ptr);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rx_valid_size<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>rx_valid_size;<sp/>j++)<sp/>{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1a63fce340a6d0378668d55df1e5c2dc99" kindref="member">DATA</ref>;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>data_len_in_bytes;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*(buff++)<sp/>=<sp/>(uint8_t)(temp<sp/>&gt;&gt;<sp/>(i<sp/>*<sp/>8));</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>transfer<sp/>count<sp/>increment<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transferred++;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(transferred<sp/>&gt;=<sp/>count)<sp/>{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>dummy<sp/>state<sp/>may<sp/>triggers<sp/>timeout<sp/>if<sp/>dummy<sp/>count,<sp/>retry<sp/>count,<sp/>spi<sp/>rate<sp/>and<sp/>cpu<sp/>frequency<sp/>are<sp/>inappropriate<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa19319d05fb8a35cc93f77e40e06b9617" kindref="member">status_timeout</ref>;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="191"><highlight class="normal">}</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1gabff410d7a08e77b7a8094df27d266605" kindref="member">spi_write_read_data</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>data_len_in_bytes,<sp/>uint8_t<sp/>*wbuff,<sp/>uint32_t<sp/>wcount,<sp/>uint8_t<sp/>*rbuff,<sp/>uint32_t<sp/>rcount)</highlight></codeline>
<codeline lineno="194"><highlight class="normal">{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>status;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>wtransferred<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>rtransferred<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>temp;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>parameter<sp/>validity<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wbuff<sp/>==<sp/>NULL<sp/>||<sp/>wcount<sp/>==<sp/>0<sp/>||<sp/>rbuff<sp/>==<sp/>NULL<sp/>||<sp/>rcount<sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(data_len_in_bytes<sp/>&gt;<sp/>4<sp/>||<sp/>data_len_in_bytes<sp/>&lt;<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>transfer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(wtransferred<sp/>&lt;<sp/>wcount<sp/>||<sp/>rtransferred<sp/>&lt;<sp/>rcount)<sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1ad79626fe5ae294d6caa65c631c7d31f1" kindref="member">STATUS</ref>;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wtransferred<sp/>&lt;<sp/>wcount)<sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>write<sp/>data<sp/>into<sp/>the<sp/>txfifo<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(status<sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a1b9a206c6d5583222b631b58837a76a4" kindref="member">SPI_STATUS_TXFULL_MASK</ref>))<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>data_len_in_bytes;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>+=<sp/>*(wbuff++)<sp/>&lt;&lt;<sp/>i<sp/>*<sp/>8;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a63fce340a6d0378668d55df1e5c2dc99" kindref="member">DATA</ref><sp/>=<sp/>temp;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>transfer<sp/>count<sp/>increment<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wtransferred++;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rtransferred<sp/>&lt;<sp/>rcount)<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>data<sp/>from<sp/>the<sp/>txfifo<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(status<sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a75fc2f9d4cab8b46edeb8f14b71e5599" kindref="member">SPI_STATUS_RXEMPTY_MASK</ref>))<sp/>{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp<sp/>=<sp/>ptr-&gt;<ref refid="structSPI__Type_1a63fce340a6d0378668d55df1e5c2dc99" kindref="member">DATA</ref>;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>data_len_in_bytes;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*(rbuff++)<sp/>=<sp/>(uint8_t)(temp<sp/>&gt;&gt;<sp/>(i<sp/>*<sp/>8));</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>transfer<sp/>count<sp/>increment<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rtransferred++;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry++;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retry<sp/>&gt;<sp/><ref refid="hpm__spi__drv_8c_1a02a895ed89a44088b3178838621a208a" kindref="member">HPM_SPI_DRV_DEFAULT_RETRY_COUNT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>dummy<sp/>state<sp/>may<sp/>triggers<sp/>timeout<sp/>if<sp/>dummy<sp/>count,<sp/>retry<sp/>count,<sp/>spi<sp/>rate<sp/>and<sp/>cpu<sp/>frequency<sp/>are<sp/>inappropriate<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa19319d05fb8a35cc93f77e40e06b9617" kindref="member">status_timeout</ref>;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="258"><highlight class="normal">}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__spi__drv_8c_1a94c119a571618d93b7c05f6935ad372c" kindref="member">spi_no_data</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode,<sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="261"><highlight class="normal">{</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/>ptr;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1ae2ea18d885fd14920b6f3a81cd07887a" kindref="member">cmd_enable</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa8641b8bfbac0c872484fa3829813b7b" kindref="member">addr_enable</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="269"><highlight class="normal">}</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga3398ff3ef43abb865ba061fdac3922bd" kindref="member">spi_master_get_default_timing_config</ref>(<ref refid="structspi__timing__config__t" kindref="compound">spi_timing_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="272"><highlight class="normal">{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1af96ea528f3b57794c7e8432de7ef5c73" kindref="member">cs2sclk</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga33e343fc2876a4886bcd808046ba8ebeaa1f01e9f9e4ee1f26da466705433c8a3" kindref="member">spi_cs2sclk_half_sclk_4</ref>;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1ab0423d7034f7fa474079de79cdd0adec" kindref="member">csht</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga410142b39b47da0d68fa76b42aa7e030a20e9ad1c6d82de9ab4fec35958997b58" kindref="member">spi_csht_half_sclk_12</ref>;</highlight></codeline>
<codeline lineno="275"><highlight class="normal">}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga31168318ca7a3f8145d6991412bffdb3" kindref="member">spi_master_get_default_format_config</ref>(<ref refid="structspi__format__config__t" kindref="compound">spi_format_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="278"><highlight class="normal">{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1a848dc52df304d08430857d4939fcad80" kindref="member">master_config</ref>.<ref refid="structspi__master__format__config__t_1a6e520a2ad02d36c9a533668c513ac05a" kindref="member">addr_len_in_bytes</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae673051b9503727c7392cec1c437480c" kindref="member">data_len_in_bits</ref><sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae9fb042cafeced22e81d78bd7c2bfebb" kindref="member">data_merge</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1addace38f33b9d2d11b9de77e3bd11a7f" kindref="member">mosi_bidir</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7fee1be394be1d9bea6aec710eb1c71f" kindref="member">lsb</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a44e71a391681bdbb23de871329563220" kindref="member">mode</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>;</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a4551ed3258f8e414898d0b1ec1874235" kindref="member">cpol</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggaa216e00c4ce27ab3897a36c72e617968ab30339f1b568344b818345078b7a8d99" kindref="member">spi_sclk_high_idle</ref>;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7c701dd9caff9d37a414909ef2f64371" kindref="member">cpha</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggab063d70616d6d55c73b01e9a1d2fb162aea2fabd92a138e8c88809d265a2d0408" kindref="member">spi_sclk_sampling_even_clk_edges</ref>;</highlight></codeline>
<codeline lineno="287"><highlight class="normal">}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga5a4c398026975ffff16080bdf1ba99f7" kindref="member">spi_slave_get_default_format_config</ref>(<ref refid="structspi__format__config__t" kindref="compound">spi_format_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="290"><highlight class="normal">{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae673051b9503727c7392cec1c437480c" kindref="member">data_len_in_bits</ref><sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae9fb042cafeced22e81d78bd7c2bfebb" kindref="member">data_merge</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1addace38f33b9d2d11b9de77e3bd11a7f" kindref="member">mosi_bidir</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7fee1be394be1d9bea6aec710eb1c71f" kindref="member">lsb</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a44e71a391681bdbb23de871329563220" kindref="member">mode</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3ea6d237dd86032fe3495c45320e9ba4afb" kindref="member">spi_slave_mode</ref>;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a4551ed3258f8e414898d0b1ec1874235" kindref="member">cpol</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggaa216e00c4ce27ab3897a36c72e617968ab30339f1b568344b818345078b7a8d99" kindref="member">spi_sclk_high_idle</ref>;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7c701dd9caff9d37a414909ef2f64371" kindref="member">cpha</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggab063d70616d6d55c73b01e9a1d2fb162aea2fabd92a138e8c88809d265a2d0408" kindref="member">spi_sclk_sampling_even_clk_edges</ref>;</highlight></codeline>
<codeline lineno="298"><highlight class="normal">}</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga20fe4a9fd4254d69da5b3b5fa33f8f8c" kindref="member">spi_master_get_default_control_config</ref>(<ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="301"><highlight class="normal">{</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1ae2ea18d885fd14920b6f3a81cd07887a" kindref="member">cmd_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa8641b8bfbac0c872484fa3829813b7b" kindref="member">addr_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa456a1182d9e6f932f976f8fdb0fb790" kindref="member">token_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1a6d83382bee82065905fcd0c6c36bb206" kindref="member">token_value</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggac0796b7f31e5676ab9e039b8dfa3b7f5a17a2324369c04c125198cf1e6bc32f18" kindref="member">spi_token_value_0x00</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa263aec2665ba9d6552e208d42799076" kindref="member">addr_phase_fmt</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga005ab1f2922a495cd72705c4f97806efa190261bcad9b03c22a05c9d44ed4225b" kindref="member">spi_address_phase_format_single_io_mode</ref>;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a956b1e54e7c59f53b56c69140f5d4571" kindref="member">tx_dma_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ad39ae05df043d04e21bddb8af976bf4e" kindref="member">rx_dma_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1adfca7e744e0d44634d9b38f7be284058" kindref="member">trans_mode</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a49d8050552ae2f123d9e5894d6d99c54" kindref="member">spi_trans_write_only</ref>;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ade270abbbcfe0810b2a0edd85cdd4233" kindref="member">data_phase_fmt</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggafff636ea73cfd28e417690fcfcacc5f9afa1be05243c70c676721e8d938096115" kindref="member">spi_single_io_mode</ref>;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a40f2304b0b01eee4236eb79150252eb8" kindref="member">dummy_cnt</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggac15a19c9674d3a82d5cd58bfbe9096baa76e0518b9444026b754f14565b008c30" kindref="member">spi_dummy_count_2</ref>;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_CS_SELECT)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_CS_SELECT<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1aaef58e57ce410d47830ff7d397adefcb" kindref="member">cs_index</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga51060f220285ddf82d48d15d3ec751bba04ddc15da2c1542ffd03dad5f0e4f376" kindref="member">spi_cs_0</ref>;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal">}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga011f364572dba586730f36c93f589557" kindref="member">spi_slave_get_default_control_config</ref>(<ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="318"><highlight class="normal">{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1a74fadddc760f616fbfad225fbfc4dbc5" kindref="member">slave_config</ref>.<ref refid="structspi__slave__control__config__t_1aac4b171e5eadbd515b19a90b5576d0c8" kindref="member">slave_data_only</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a956b1e54e7c59f53b56c69140f5d4571" kindref="member">tx_dma_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ad39ae05df043d04e21bddb8af976bf4e" kindref="member">rx_dma_enable</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1adfca7e744e0d44634d9b38f7be284058" kindref="member">trans_mode</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a20a6bb5cff8d394455e770ab0f73c4b4" kindref="member">spi_trans_read_only</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ade270abbbcfe0810b2a0edd85cdd4233" kindref="member">data_phase_fmt</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggafff636ea73cfd28e417690fcfcacc5f9afa1be05243c70c676721e8d938096115" kindref="member">spi_single_io_mode</ref>;</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a40f2304b0b01eee4236eb79150252eb8" kindref="member">dummy_cnt</ref><sp/>=<sp/><ref refid="group__spi__interface_1ggac15a19c9674d3a82d5cd58bfbe9096baa76e0518b9444026b754f14565b008c30" kindref="member">spi_dummy_count_2</ref>;</highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_CS_SELECT)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_CS_SELECT<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1aaef58e57ce410d47830ff7d397adefcb" kindref="member">cs_index</ref><sp/>=<sp/><ref refid="group__spi__interface_1gga51060f220285ddf82d48d15d3ec751bba04ddc15da2c1542ffd03dad5f0e4f376" kindref="member">spi_cs_0</ref>;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal">}</highlight></codeline>
<codeline lineno="329"><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga5f947eba318d5cf434442208fa013890" kindref="member">spi_master_timing_init</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="structspi__timing__config__t" kindref="compound">spi_timing_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="331"><highlight class="normal">{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>sclk_div;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>div_remainder;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>div_integer;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1a27234dc0ee0c0709adb8e03a256e75ba" kindref="member">sclk_freq_in_hz</ref><sp/>==<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1afa1613eb9c5cdef9fdb57eb337c83f8c" kindref="member">clk_src_freq_in_hz</ref><sp/>&gt;<sp/>config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1a27234dc0ee0c0709adb8e03a256e75ba" kindref="member">sclk_freq_in_hz</ref>)<sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>div_remainder<sp/>=<sp/>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1afa1613eb9c5cdef9fdb57eb337c83f8c" kindref="member">clk_src_freq_in_hz</ref><sp/>%<sp/>config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1a27234dc0ee0c0709adb8e03a256e75ba" kindref="member">sclk_freq_in_hz</ref>);</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>div_integer<sp/><sp/>=<sp/>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1afa1613eb9c5cdef9fdb57eb337c83f8c" kindref="member">clk_src_freq_in_hz</ref><sp/>/<sp/>config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1a27234dc0ee0c0709adb8e03a256e75ba" kindref="member">sclk_freq_in_hz</ref>);</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((div_remainder<sp/>!=<sp/>0)<sp/>||<sp/>((div_integer<sp/>%<sp/>2)<sp/>!=<sp/>0)<sp/>||</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(div_integer<sp/>&gt;<sp/>510))<sp/>{<sp/><sp/></highlight><highlight class="comment">/*<sp/>div_integer<sp/>must<sp/>be<sp/>less<sp/>than<sp/>or<sp/>equal<sp/>to<sp/>((SCLK_DIV<sp/>+<sp/>1)<sp/>*<sp/>2),<sp/>SCLK_DIV<sp/>max<sp/>value<sp/>is<sp/>0xFE<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sclk_div<sp/>=<sp/>(div_integer<sp/>/<sp/>2)<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sclk_div<sp/>=<sp/>0xff;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae055aa5a39455f4407d4de3f7f293425" kindref="member">TIMING</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a85e903b7b4cac795b4fd25ac147633a9" kindref="member">SPI_TIMING_CS2SCLK_SET</ref>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1af96ea528f3b57794c7e8432de7ef5c73" kindref="member">cs2sclk</ref>)<sp/>|</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a0e0741eb90fb4c2907c59f2a780afba5" kindref="member">SPI_TIMING_CSHT_SET</ref>(config-&gt;<ref refid="structspi__timing__config__t_1a90ac9374c633e5f77596962520300859" kindref="member">master_config</ref>.<ref refid="structspi__master__timing__config__t_1ab0423d7034f7fa474079de79cdd0adec" kindref="member">csht</ref>)<sp/>|</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a7ec150fe70b2873988ffea9b62edf18f" kindref="member">SPI_TIMING_SCLK_DIV_SET</ref>(sclk_div);</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="356"><highlight class="normal">}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ga6aa789fed3d323a5cf9d541649a909ec" kindref="member">spi_format_init</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="structspi__format__config__t" kindref="compound">spi_format_config_t</ref><sp/>*config)</highlight></codeline>
<codeline lineno="359"><highlight class="normal">{</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a46813b468c53af3cabea791c7b076455" kindref="member">TRANSFMT</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a7b7891b09a84ebca8d1ac5b67ef0cac1" kindref="member">SPI_TRANSFMT_ADDRLEN_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1a848dc52df304d08430857d4939fcad80" kindref="member">master_config</ref>.<ref refid="structspi__master__format__config__t_1a6e520a2ad02d36c9a533668c513ac05a" kindref="member">addr_len_in_bytes</ref><sp/>-<sp/>1)<sp/>|</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a822b5648b67d63d5c9e80263844bb450" kindref="member">SPI_TRANSFMT_DATALEN_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae673051b9503727c7392cec1c437480c" kindref="member">data_len_in_bits</ref><sp/>-<sp/>1)<sp/>|</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a9302d273c347584fe5bee64f2084b8c8" kindref="member">SPI_TRANSFMT_DATAMERGE_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1ae9fb042cafeced22e81d78bd7c2bfebb" kindref="member">data_merge</ref>)<sp/>|</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a9fdc39e20bd52244a6a55756ba5dcf9e" kindref="member">SPI_TRANSFMT_MOSIBIDIR_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1addace38f33b9d2d11b9de77e3bd11a7f" kindref="member">mosi_bidir</ref>)<sp/>|</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a471d8dad331b84fdbb06d4e46b2ceea7" kindref="member">SPI_TRANSFMT_LSB_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7fee1be394be1d9bea6aec710eb1c71f" kindref="member">lsb</ref>)<sp/>|</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a777f5f1e609d01adcc464b34289274bb" kindref="member">SPI_TRANSFMT_SLVMODE_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a44e71a391681bdbb23de871329563220" kindref="member">mode</ref>)<sp/>|</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1aa6f0b977682f62b98ace2b7a610cadf6" kindref="member">SPI_TRANSFMT_CPOL_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a4551ed3258f8e414898d0b1ec1874235" kindref="member">cpol</ref>)<sp/>|</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac795af034217a3cf5e5e97ca1310695a" kindref="member">SPI_TRANSFMT_CPHA_SET</ref>(config-&gt;<ref refid="structspi__format__config__t_1aca68f5f5e29c87ed38b57f36b4ca77e3" kindref="member">common_config</ref>.<ref refid="structspi__common__format__config__t_1a7c701dd9caff9d37a414909ef2f64371" kindref="member">cpha</ref>);</highlight></codeline>
<codeline lineno="368"><highlight class="normal">}</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1gadfc7b3d8df21dcdb70b00ec76896512e" kindref="member">spi_control_init</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,<sp/>uint32_t<sp/>wcount,<sp/>uint32_t<sp/>rcount)</highlight></codeline>
<codeline lineno="371"><highlight class="normal">{</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>mode;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(SPI_SOC_TRANSFER_COUNT_MAX)<sp/>&amp;&amp;<sp/>(SPI_SOC_TRANSFER_COUNT_MAX<sp/>==<sp/>512)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((wcount<sp/>&gt;<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc__feature_8h_1a9ab6af43398ba35709ba46f496487bc5" kindref="member">SPI_SOC_TRANSFER_COUNT_MAX</ref>)<sp/>||<sp/>(rcount<sp/>&gt;<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc__feature_8h_1a9ab6af43398ba35709ba46f496487bc5" kindref="member">SPI_SOC_TRANSFER_COUNT_MAX</ref>))<sp/>{</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>spi<sp/>control<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>mode<sp/>=<sp/>(ptr-&gt;<ref refid="structSPI__Type_1a46813b468c53af3cabea791c7b076455" kindref="member">TRANSFMT</ref><sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a8f434f7b57aa9d147799e51facde44db" kindref="member">SPI_TRANSFMT_SLVMODE_MASK</ref>)<sp/>&gt;&gt;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1aef541d534cf3855e826fb7473a0ede11" kindref="member">SPI_TRANSFMT_SLVMODE_SHIFT</ref>;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>slave<sp/>data<sp/>only<sp/>mode<sp/>only<sp/>works<sp/>on<sp/>write<sp/>read<sp/>together<sp/>transfer<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((config-&gt;<ref refid="structspi__control__config__t_1a74fadddc760f616fbfad225fbfc4dbc5" kindref="member">slave_config</ref>.<ref refid="structspi__slave__control__config__t_1aac4b171e5eadbd515b19a90b5576d0c8" kindref="member">slave_data_only</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1adfca7e744e0d44634d9b38f7be284058" kindref="member">trans_mode</ref><sp/>!=<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15ad2a478fbce4d16e6a53fda9d2a7d28a7" kindref="member">spi_trans_write_read_together</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3ea6d237dd86032fe3495c45320e9ba4afb" kindref="member">spi_slave_mode</ref>))<sp/>{</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a0612770893dbcab8ecc643718417acbf" kindref="member">TRANSCTRL</ref><sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a4d7e4e6992f5b56ca6ae4bbddb27050d" kindref="member">SPI_TRANSCTRL_SLVDATAONLY_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a74fadddc760f616fbfad225fbfc4dbc5" kindref="member">slave_config</ref>.<ref refid="structspi__slave__control__config__t_1aac4b171e5eadbd515b19a90b5576d0c8" kindref="member">slave_data_only</ref>)<sp/>|</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a67e267089df0375e3d988857f1b28d5a" kindref="member">SPI_TRANSCTRL_CMDEN_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1ae2ea18d885fd14920b6f3a81cd07887a" kindref="member">cmd_enable</ref>)<sp/>|</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a86293ecc194d4eb09d1cc0dc7afc098d" kindref="member">SPI_TRANSCTRL_ADDREN_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa8641b8bfbac0c872484fa3829813b7b" kindref="member">addr_enable</ref>)<sp/>|</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a2406437bf93e1522e4aeb81f34f81fc5" kindref="member">SPI_TRANSCTRL_ADDRFMT_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa263aec2665ba9d6552e208d42799076" kindref="member">addr_phase_fmt</ref>)<sp/>|</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a13ac830907557dcdcd83cf7944173296" kindref="member">SPI_TRANSCTRL_TRANSMODE_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1adfca7e744e0d44634d9b38f7be284058" kindref="member">trans_mode</ref>)<sp/>|</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a081e29e57512423430de60a4073c9329" kindref="member">SPI_TRANSCTRL_DUALQUAD_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ade270abbbcfe0810b2a0edd85cdd4233" kindref="member">data_phase_fmt</ref>)<sp/>|</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a6c3523f2051372c329861d33d58f1410" kindref="member">SPI_TRANSCTRL_TOKENEN_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1aa456a1182d9e6f932f976f8fdb0fb790" kindref="member">token_enable</ref>)<sp/>|</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1acc151831597683d07ec6f62c91db7a83" kindref="member">SPI_TRANSCTRL_WRTRANCNT_SET</ref>(wcount<sp/>-<sp/>1)<sp/>|</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1afb82935370c7210cdfc7e7c1d1133327" kindref="member">SPI_TRANSCTRL_TOKENVALUE_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1a96cd87a49bfc5810ea771c8fbb310cde" kindref="member">master_config</ref>.<ref refid="structspi__master__control__config__t_1a6d83382bee82065905fcd0c6c36bb206" kindref="member">token_value</ref>)<sp/>|</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1acb76f58ac9f53797356c93fe6089d195" kindref="member">SPI_TRANSCTRL_DUMMYCNT_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a40f2304b0b01eee4236eb79150252eb8" kindref="member">dummy_cnt</ref>)<sp/>|</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1adfa3eaf5bb75d07238f13cd92fa06e1e" kindref="member">SPI_TRANSCTRL_RDTRANCNT_SET</ref>(rcount<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_CS_SELECT)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_CS_SELECT<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>=<sp/>(ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a5df60c81115302d004649b79f3095692" kindref="member">~SPI_CTRL_CS_EN_MASK</ref>)<sp/>|<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a9793eedfc8b7bdc7e2cf42676a7df428" kindref="member">SPI_CTRL_CS_EN_SET</ref>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1aaef58e57ce410d47830ff7d397adefcb" kindref="member">cs_index</ref>);</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_NEW_TRANS_COUNT)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_NEW_TRANS_COUNT<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a87a9daa8bf7873c047dba71a071513fe" kindref="member">WR_TRANS_CNT</ref><sp/>=<sp/>wcount<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1aaea0e9c6bba1b05cc0a2d5e0881a5179" kindref="member">RD_TRANS_CNT</ref><sp/>=<sp/>rcount<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>reset<sp/>txfifo,<sp/>rxfifo<sp/>and<sp/>control<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a3f4b69860aaac73b7949433067ebe178" kindref="member">SPI_CTRL_TXFIFORST_MASK</ref><sp/>|<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a324e23ccc3db421cd234be39c20444db" kindref="member">SPI_CTRL_RXFIFORST_MASK</ref><sp/>|<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a95e46e9c15c3d77ae0fa56053dd7de98" kindref="member">SPI_CTRL_SPIRST_MASK</ref>;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="414"><highlight class="normal">}</highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga6541675ce7395a67e896f900a6171133" kindref="member">spi_transfer</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*cmd,<sp/>uint32_t<sp/>*addr,</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*wbuff,<sp/>uint32_t<sp/>wcount,<sp/>uint8_t<sp/>*rbuff,<sp/>uint32_t<sp/>rcount)</highlight></codeline>
<codeline lineno="420"><highlight class="normal">{</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fab3c0359cb713a70f593f2e46ab12bb39" kindref="member">status_fail</ref>;</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>data_len_in_bytes,<sp/>trans_mode;</highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>spi<sp/>control<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/>mode<sp/>=<sp/>(<ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref>)((ptr-&gt;<ref refid="structSPI__Type_1a46813b468c53af3cabea791c7b076455" kindref="member">TRANSFMT</ref><sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a8f434f7b57aa9d147799e51facde44db" kindref="member">SPI_TRANSFMT_SLVMODE_MASK</ref>)<sp/>&gt;&gt;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1aef541d534cf3855e826fb7473a0ede11" kindref="member">SPI_TRANSFMT_SLVMODE_SHIFT</ref>);</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>When<sp/>acting<sp/>as<sp/>a<sp/>host,<sp/>it<sp/>is<sp/>necessary<sp/>to<sp/>determine<sp/>whether<sp/>the<sp/>SPI<sp/>bus<sp/>is<sp/>active<sp/>to<sp/>ensure<sp/>that<sp/>only<sp/>one<sp/>device<sp/>accesses<sp/>the<sp/>bus.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>)<sp/>&amp;&amp;<sp/>(<ref refid="group__spi__interface_1ga0043a6affc864f586ce9a91b3725ce66" kindref="member">spi_is_active</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ggaaa9607bf535272bd730af073728be224a2d497018c6ac935d124ce6c3a3eb4ec0" kindref="member">status_spi_master_busy</ref>;</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gadfc7b3d8df21dcdb70b00ec76896512e" kindref="member">spi_control_init</ref>(ptr,<sp/>config,<sp/>wcount,<sp/>rcount);</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>data<sp/>length<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>data_len_in_bytes<sp/>=<sp/><ref refid="group__spi__interface_1gacdb3db6c42352184bacb17222cb7635f" kindref="member">spi_get_data_length_in_bytes</ref>(ptr);</highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>spi<sp/>transfer<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>trans_mode<sp/>=<sp/>config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1adfca7e744e0d44634d9b38f7be284058" kindref="member">trans_mode</ref>;</highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>write<sp/>address<sp/>on<sp/>master<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gadf1e05aae5113bde63bc975a18a85f67" kindref="member">spi_write_address</ref>(ptr,<sp/>mode,<sp/>config,<sp/>addr);</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>write<sp/>command<sp/>on<sp/>master<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gad353177892d840687cd3ce3605bf0621" kindref="member">spi_write_command</ref>(ptr,<sp/>mode,<sp/>config,<sp/>cmd);</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>phase<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15ad2a478fbce4d16e6a53fda9d2a7d28a7" kindref="member">spi_trans_write_read_together</ref>)<sp/>{</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gabff410d7a08e77b7a8094df27d266605" kindref="member">spi_write_read_data</ref>(ptr,<sp/>data_len_in_bytes,<sp/>wbuff,<sp/>wcount,<sp/>rbuff,<sp/>rcount);</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a49d8050552ae2f123d9e5894d6d99c54" kindref="member">spi_trans_write_only</ref><sp/>||<sp/>trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a19c72838dd5f1436b0d12764565d1f23" kindref="member">spi_trans_dummy_write</ref>)<sp/>{</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1ga4f7dfe7ae3b9d7f280fc1aa47e228586" kindref="member">spi_write_data</ref>(ptr,<sp/>data_len_in_bytes,<sp/>wbuff,<sp/>wcount);</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a20a6bb5cff8d394455e770ab0f73c4b4" kindref="member">spi_trans_read_only</ref><sp/>||<sp/>trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a938f0767762b6a2f353bb987314826c5" kindref="member">spi_trans_dummy_read</ref>)<sp/>{</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1ga8b614bbd1672d0e1abef6a3e95c1040f" kindref="member">spi_read_data</ref>(ptr,<sp/>data_len_in_bytes,<sp/>rbuff,<sp/>rcount);</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a65f770f7ab912d205a692621390ff981" kindref="member">spi_trans_write_read</ref><sp/>||<sp/>trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a427d193ff9c71ad266027b15c6ea8033" kindref="member">spi_trans_write_dummy_read</ref>)<sp/>{</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gabff410d7a08e77b7a8094df27d266605" kindref="member">spi_write_read_data</ref>(ptr,<sp/>data_len_in_bytes,<sp/>wbuff,<sp/>wcount,<sp/>rbuff,<sp/>rcount);</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a77520f7f2577b7e360fcae729d557ebb" kindref="member">spi_trans_read_write</ref><sp/>||<sp/>trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15a978ff206dd41af49c7e973a1277a6e61" kindref="member">spi_trans_read_dummy_write</ref>)<sp/>{</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gabff410d7a08e77b7a8094df27d266605" kindref="member">spi_write_read_data</ref>(ptr,<sp/>data_len_in_bytes,<sp/>wbuff,<sp/>wcount,<sp/>rbuff,<sp/>rcount);</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(trans_mode<sp/>==<sp/><ref refid="group__spi__interface_1ggae719b4eb51210f7a6878861fcb374d15aacc4a2b50914746ead941136d219909d" kindref="member">spi_trans_no_data</ref>)<sp/>{</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="hpm__spi__drv_8c_1a94c119a571618d93b7c05f6935ad372c" kindref="member">spi_no_data</ref>(ptr,<sp/>mode,<sp/>config);</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>command<sp/>on<sp/>slave<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1ga8dc3d203a1773ffb50514cdb9bced308" kindref="member">spi_read_command</ref>(ptr,<sp/>mode,<sp/>config,<sp/>cmd);</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>on<sp/>the<sp/>slave<sp/>mode,<sp/>if<sp/>master<sp/>keeps<sp/>asserting<sp/>the<sp/>cs<sp/>signal,<sp/>it&apos;s<sp/>maybe<sp/>timeout<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1ga0bd47db6a31f4592c25b0b0ce4d26635" kindref="member">spi_wait_for_idle_status</ref>(ptr);</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="485"><highlight class="normal">}</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga302f08c4fb52f1c0ac5049b2b91a8d87" kindref="member">spi_setup_dma_transfer</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structspi__control__config__t" kindref="compound">spi_control_config_t</ref><sp/>*config,</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*cmd,<sp/>uint32_t<sp/>*addr,</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>wcount,<sp/>uint32_t<sp/>rcount)</highlight></codeline>
<codeline lineno="491"><highlight class="normal">{</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fab3c0359cb713a70f593f2e46ab12bb39" kindref="member">status_fail</ref>;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref><sp/>mode;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>spi<sp/>control<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/>mode<sp/>=<sp/>(<ref refid="group__spi__interface_1ga9ac2dd2dcd0b2c3b5fb1363eac489a3e" kindref="member">spi_mode_selection_t</ref>)((ptr-&gt;<ref refid="structSPI__Type_1a46813b468c53af3cabea791c7b076455" kindref="member">TRANSFMT</ref><sp/>&amp;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a8f434f7b57aa9d147799e51facde44db" kindref="member">SPI_TRANSFMT_SLVMODE_MASK</ref>)<sp/>&gt;&gt;<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1aef541d534cf3855e826fb7473a0ede11" kindref="member">SPI_TRANSFMT_SLVMODE_SHIFT</ref>);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>When<sp/>acting<sp/>as<sp/>a<sp/>host,<sp/>it<sp/>is<sp/>necessary<sp/>to<sp/>determine<sp/>whether<sp/>the<sp/>SPI<sp/>bus<sp/>is<sp/>active<sp/>to<sp/>ensure<sp/>that<sp/>only<sp/>one<sp/>device<sp/>accesses<sp/>the<sp/>bus.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((mode<sp/>==<sp/><ref refid="group__spi__interface_1gga9ac2dd2dcd0b2c3b5fb1363eac489a3eaa45f1c195fc0e4f77a6871bd3c72ad30" kindref="member">spi_master_mode</ref>)<sp/>&amp;&amp;<sp/>(<ref refid="group__spi__interface_1ga0043a6affc864f586ce9a91b3725ce66" kindref="member">spi_is_active</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1ggaaa9607bf535272bd730af073728be224a2d497018c6ac935d124ce6c3a3eb4ec0" kindref="member">status_spi_master_busy</ref>;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gadfc7b3d8df21dcdb70b00ec76896512e" kindref="member">spi_control_init</ref>(ptr,<sp/>config,<sp/>wcount,<sp/>rcount);</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1a956b1e54e7c59f53b56c69140f5d4571" kindref="member">tx_dma_enable</ref>)<sp/>{</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_DMA_TX_REQ_AFTER_CMD_FO_MASTER)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_DMA_TX_REQ_AFTER_CMD_FO_MASTER<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>|=<sp/>SPI_CTRL_CMD_OP_MASK;</highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a873e68c1ec78428ad2094d28b683884c" kindref="member">SPI_CTRL_TXDMAEN_MASK</ref>;</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config-&gt;<ref refid="structspi__control__config__t_1ad808dc64b56fca1e62005aaaf8618b70" kindref="member">common_config</ref>.<ref refid="structspi__common__control__config__t_1ad39ae05df043d04e21bddb8af976bf4e" kindref="member">rx_dma_enable</ref>)<sp/>{</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1a62780ecb289cdd6e93a947ffdd3ebfef" kindref="member">CTRL</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a2349a3ca59ce140c308648c009a40811" kindref="member">SPI_CTRL_RXDMAEN_MASK</ref>;</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="517"><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>address<sp/>phase<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gadf1e05aae5113bde63bc975a18a85f67" kindref="member">spi_write_address</ref>(ptr,<sp/>mode,<sp/>config,<sp/>addr);</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>command<sp/>phase<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__spi__interface_1gad353177892d840687cd3ce3605bf0621" kindref="member">spi_write_command</ref>(ptr,<sp/>mode,<sp/>config,<sp/>cmd);</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(stat<sp/>!=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>)<sp/>{</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="529"><highlight class="normal"></highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="531"><highlight class="normal">}</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_IP_FEATURE_SPI_SUPPORT_DIRECTIO)<sp/>&amp;&amp;<sp/>(HPM_IP_FEATURE_SPI_SUPPORT_DIRECTIO<sp/>==<sp/>1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga512b377ea6545958877dcd3f3b62722f" kindref="member">spi_directio_enable_output</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga6deabf23d3377ce418a7993f368edfcf" kindref="member">spi_directio_pin_t</ref><sp/>pin)</highlight></codeline>
<codeline lineno="536"><highlight class="normal">{</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(pin)<sp/>{</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa6b49d8577c21651d3151a26c09893d79" kindref="member">hold_pin</ref>:</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a58adf5ea7ef9c763b5b2563128a4fc91" kindref="member">SPI_DIRECTIO_HOLD_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfaea49b0f23d61f6464aa3563efc2b4974" kindref="member">wp_pin</ref>:</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a0f4e37dd51e051fc3089846709cb8c1a" kindref="member">SPI_DIRECTIO_WP_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa7b665aeb7d309416d7131464b83749b6" kindref="member">miso_pin</ref>:</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac39ed97c4422dd1e62ae5ae2088ab43e" kindref="member">SPI_DIRECTIO_MISO_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa040ba68bb6c4bf0328e0dd63674b09c8" kindref="member">mosi_pin</ref>:</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a1787746e9bd83f2dc528ce23b8c95e35" kindref="member">SPI_DIRECTIO_MOSI_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa370e29665ef702afa0a1da003190eb98" kindref="member">sclk_pin</ref>:</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ab40eee2b69b258e61a8b618ec753904d" kindref="member">SPI_DIRECTIO_SCLK_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa39fccb78c96524a19748b5f1fb87e331" kindref="member">cs_pin</ref>:</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a77a47deca983fd00479ce0ec83b18aa6" kindref="member">SPI_DIRECTIO_CS_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="562"><highlight class="normal">}</highlight></codeline>
<codeline lineno="563"><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1gaeb5f59746b951994a62af4833805f8f7" kindref="member">spi_directio_disable_output</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga6deabf23d3377ce418a7993f368edfcf" kindref="member">spi_directio_pin_t</ref><sp/>pin)</highlight></codeline>
<codeline lineno="565"><highlight class="normal">{</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(pin)<sp/>{</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa6b49d8577c21651d3151a26c09893d79" kindref="member">hold_pin</ref>:</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a58adf5ea7ef9c763b5b2563128a4fc91" kindref="member">~SPI_DIRECTIO_HOLD_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfaea49b0f23d61f6464aa3563efc2b4974" kindref="member">wp_pin</ref>:</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a0f4e37dd51e051fc3089846709cb8c1a" kindref="member">~SPI_DIRECTIO_WP_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa7b665aeb7d309416d7131464b83749b6" kindref="member">miso_pin</ref>:</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac39ed97c4422dd1e62ae5ae2088ab43e" kindref="member">~SPI_DIRECTIO_MISO_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa040ba68bb6c4bf0328e0dd63674b09c8" kindref="member">mosi_pin</ref>:</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a1787746e9bd83f2dc528ce23b8c95e35" kindref="member">~SPI_DIRECTIO_MOSI_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa370e29665ef702afa0a1da003190eb98" kindref="member">sclk_pin</ref>:</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ab40eee2b69b258e61a8b618ec753904d" kindref="member">~SPI_DIRECTIO_SCLK_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa39fccb78c96524a19748b5f1fb87e331" kindref="member">cs_pin</ref>:</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a77a47deca983fd00479ce0ec83b18aa6" kindref="member">~SPI_DIRECTIO_CS_OE_MASK</ref>;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="591"><highlight class="normal">}</highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="group__spi__interface_1ga64f70d73d56253d89d2229d30cffecd8" kindref="member">spi_directio_write</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga6deabf23d3377ce418a7993f368edfcf" kindref="member">spi_directio_pin_t</ref><sp/>pin,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>high)</highlight></codeline>
<codeline lineno="594"><highlight class="normal">{</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(pin)<sp/>{</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa6b49d8577c21651d3151a26c09893d79" kindref="member">hold_pin</ref>:</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ae80ca659c81a4ac6916ebaec5bef54bc" kindref="member">SPI_DIRECTIO_HOLD_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ae80ca659c81a4ac6916ebaec5bef54bc" kindref="member">~SPI_DIRECTIO_HOLD_O_MASK</ref>);</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfaea49b0f23d61f6464aa3563efc2b4974" kindref="member">wp_pin</ref>:</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a0a10898ae98b4ef7cea0f18f4cd3f624" kindref="member">SPI_DIRECTIO_WP_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a0a10898ae98b4ef7cea0f18f4cd3f624" kindref="member">~SPI_DIRECTIO_WP_O_MASK</ref>);</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa7b665aeb7d309416d7131464b83749b6" kindref="member">miso_pin</ref>:</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a7f37c21890021f2c51e620b6177f6ffc" kindref="member">SPI_DIRECTIO_MISO_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a7f37c21890021f2c51e620b6177f6ffc" kindref="member">~SPI_DIRECTIO_MISO_O_MASK</ref>);</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa040ba68bb6c4bf0328e0dd63674b09c8" kindref="member">mosi_pin</ref>:</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a22403e190a44463993c0b152c7ae237e" kindref="member">SPI_DIRECTIO_MOSI_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a22403e190a44463993c0b152c7ae237e" kindref="member">~SPI_DIRECTIO_MOSI_O_MASK</ref>);</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa370e29665ef702afa0a1da003190eb98" kindref="member">sclk_pin</ref>:</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a3e6c0ca5dd766018c34fa9b57a03ec39" kindref="member">SPI_DIRECTIO_SCLK_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a3e6c0ca5dd766018c34fa9b57a03ec39" kindref="member">~SPI_DIRECTIO_SCLK_O_MASK</ref>);</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa39fccb78c96524a19748b5f1fb87e331" kindref="member">cs_pin</ref>:</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(high<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>?<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>|=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac95177bb7245a0933e3fa6f47731bb4d" kindref="member">SPI_DIRECTIO_CS_O_MASK</ref>)<sp/>:<sp/>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref><sp/>&amp;=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ac95177bb7245a0933e3fa6f47731bb4d" kindref="member">~SPI_DIRECTIO_CS_O_MASK</ref>);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="620"><highlight class="normal">}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal">uint8_t<sp/><ref refid="group__spi__interface_1ga494456b6c602ebb92342683413eb03c5" kindref="member">spi_directio_read</ref>(<ref refid="structSPI__Type" kindref="compound">SPI_Type</ref><sp/>*ptr,<sp/><ref refid="group__spi__interface_1ga6deabf23d3377ce418a7993f368edfcf" kindref="member">spi_directio_pin_t</ref><sp/>pin)</highlight></codeline>
<codeline lineno="623"><highlight class="normal">{</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>io_sta<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(pin)<sp/>{</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa6b49d8577c21651d3151a26c09893d79" kindref="member">hold_pin</ref>:</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a1b20f49f11e9acfbf1d84fc71b6f472f" kindref="member">SPI_DIRECTIO_HOLD_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfaea49b0f23d61f6464aa3563efc2b4974" kindref="member">wp_pin</ref>:</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a124a504e05667a369fed3f2384a2ab81" kindref="member">SPI_DIRECTIO_WP_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa7b665aeb7d309416d7131464b83749b6" kindref="member">miso_pin</ref>:</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1acff3c6eb5d01925c76ca7a471abafb1a" kindref="member">SPI_DIRECTIO_MISO_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa040ba68bb6c4bf0328e0dd63674b09c8" kindref="member">mosi_pin</ref>:</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1ab26d30ee1c7209a6efe95ab1bcdac4ba" kindref="member">SPI_DIRECTIO_MOSI_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa370e29665ef702afa0a1da003190eb98" kindref="member">sclk_pin</ref>:</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a7f1b6a498be4957a35036a1556199498" kindref="member">SPI_DIRECTIO_SCLK_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__spi__interface_1gga6deabf23d3377ce418a7993f368edfcfa39fccb78c96524a19748b5f1fb87e331" kindref="member">cs_pin</ref>:</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io_sta<sp/>=<sp/><ref refid="HPM5300_2ip_2hpm__spi__regs_8h_1a403027ac33db2439be542ee42ac30b32" kindref="member">SPI_DIRECTIO_CS_I_GET</ref>(ptr-&gt;<ref refid="structSPI__Type_1ae7a012ea5966117d567abd8851814f45" kindref="member">DIRECTIO</ref>);</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>io_sta;</highlight></codeline>
<codeline lineno="648"><highlight class="normal">}</highlight></codeline>
<codeline lineno="649"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="650"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="drivers/src/hpm_spi_drv.c"/>
  </compounddef>
</doxygen>
