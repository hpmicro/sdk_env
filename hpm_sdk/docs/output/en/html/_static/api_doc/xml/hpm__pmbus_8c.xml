<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="hpm__pmbus_8c" kind="file" language="C++">
    <compoundname>hpm_pmbus.c</compoundname>
    <includes refid="hpm__pmbus_8h" local="yes">hpm_pmbus.h</includes>
    <includes refid="hpm__pmbus__private_8h" local="yes">hpm_pmbus_private.h</includes>
    <includes refid="hpm__smbus_8h" local="yes">hpm_smbus.h</includes>
    <incdepgraph>
      <node id="1">
        <label>components/pmbus/hpm_pmbus.c</label>
        <link refid="hpm__pmbus_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>hpm_pmbus.h</label>
        <link refid="hpm__pmbus_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>hpm_pmbus_def.h</label>
        <link refid="hpm__pmbus__def_8h"/>
      </node>
      <node id="13">
        <label>hpm_pmbus_private.h</label>
        <link refid="hpm__pmbus__private_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>hpm_smbus.h</label>
        <link refid="hpm__smbus_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>hpm_common.h</label>
        <link refid="hpm__common_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>hpm_i2c_drv.h</label>
        <link refid="hpm__i2c__drv_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>assert.h</label>
      </node>
      <node id="11">
        <label>hpm_i2c_regs.h</label>
      </node>
      <node id="9">
        <label>hpm_soc_feature.h</label>
      </node>
      <node id="5">
        <label>stdbool.h</label>
      </node>
      <node id="6">
        <label>stdint.h</label>
      </node>
      <node id="8">
        <label>stdlib.h</label>
      </node>
      <node id="7">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structhpm__pmbus__cfg__t" prot="public">hpm_pmbus_cfg_t</innerclass>
    <sectiondef kind="var">
      <memberdef kind="variable" id="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" prot="public" static="no" extern="yes" mutable="no">
        <type>const <ref refid="structhpm__pmbus__cmd__param__t" kindref="compound">hpm_pmbus_cmd_param_t</ref></type>
        <definition>const hpm_pmbus_cmd_param_t pmbus_cmd_param_table[]</definition>
        <argsstring>[]</argsstring>
        <name>pmbus_cmd_param_table</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="21" column="36" bodyfile="components/pmbus/hpm_pmbus_private.h" bodystart="13" bodyend="1800" declfile="components/pmbus/hpm_pmbus.c" declline="21" declcolumn="36"/>
      </memberdef>
      <memberdef kind="variable" id="hpm__pmbus_8c_1a32eae3833319b171ea990560c970cb4b" prot="public" static="yes" mutable="no">
        <type><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref></type>
        <definition>hpm_pmbus_cfg_t hpm_pmbus_cfg_table[]</definition>
        <argsstring>[]</argsstring>
        <name>hpm_pmbus_cfg_table</name>
        <initializer>= {








































































}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="23" column="24" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="23" bodyend="96"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref> *</type>
        <definition>static hpm_pmbus_cfg_t * hpm_pmbus_get_cfg_obj</definition>
        <argsstring>(I2C_Type *ptr)</argsstring>
        <name>hpm_pmbus_get_cfg_obj</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="98" column="24" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="98" bodyend="109"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint8_t</type>
        <definition>static uint8_t hpm_smbus_pec_crc8_in_command</definition>
        <argsstring>(uint8_t slave_addr, uint8_t command, uint8_t *data, uint32_t len, bool read, bool block)</argsstring>
        <name>hpm_smbus_pec_crc8_in_command</name>
        <param>
          <type>uint8_t</type>
          <declname>slave_addr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>command</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>read</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>block</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="111" column="16" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="111" bodyend="166"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a72464f1d4b1e56952e8e183aa9847903" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void hpm_pmbus_isr_handler</definition>
        <argsstring>(I2C_Type *ptr)</argsstring>
        <name>hpm_pmbus_isr_handler</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
<para>Handles the HPM PMBUS interrupt service request. </para>
        </briefdescription>
        <detaileddescription>
<para>This function serves as an interrupt service routine (ISR) handler for communication with PMBUS devices over I2C.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>A pointer to the I2C </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="168" column="6" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="168" bodyend="338"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a8902b3a7d992a8e8a68e316229f3d7d5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>hpm_stat_t hpm_pmbus_slave_init</definition>
        <argsstring>(I2C_Type *ptr, uint8_t slave_addr)</argsstring>
        <name>hpm_pmbus_slave_init</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>slave_addr</declname>
        </param>
        <briefdescription>
<para>PMBus Slave Initialization. </para>
        </briefdescription>
        <detaileddescription>
<para>This function initializes an I2C slave device to respond to a specific slave address and communicate according to the PMBus protocol.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the base address of the I2C, pointing to the I2C slave device to be initialized </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>slave_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Address of the slave device, used to identify the specific slave on the I2C bus</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref> Returns the status of the initialization operation, indicating success or failure reasons </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="340" column="12" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="340" bodyend="352"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a529f7ff8b3280afbe271ea2bbbbd3248" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>hpm_stat_t hpm_pmbus_master_read</definition>
        <argsstring>(I2C_Type *ptr, uint8_t slave_address, uint8_t command, uint8_t *data, uint32_t *len)</argsstring>
        <name>hpm_pmbus_master_read</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>slave_address</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>command</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>uint32_t *</type>
          <declname>len</declname>
        </param>
        <briefdescription>
<para>Reads data from a PMBus slave device. </para>
        </briefdescription>
        <detaileddescription>
<para>This function reads data from a specified PMBus slave device over the I2C bus. It first sends a command and then reads the response data. Primarily used for communication with PMBus-compatible power management devices to retrieve device status or measurement data.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the base address of the I2C controller </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>slave_address</parametername>
</parameternamelist>
<parameterdescription>
<para>The 7-bit PMBus address of the slave device, used to select the correct slave device </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>command</parametername>
</parameternamelist>
<parameterdescription>
<para>The PMBus command sent to the slave device, specifying the type of data or register to read </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to store the data returned from the slave device; this function will store the read data into the buffer pointed to by this pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>len</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to a variable that specifies the maximum read length; this function will write the actual read length into this variable</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref> Returns the status of the read operation, indicating success or various error states </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="354" column="12" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="354" bodyend="385"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1ab47d0a55e344dbd60d5dfb58051aff95" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>hpm_stat_t hpm_pmbus_master_write</definition>
        <argsstring>(I2C_Type *ptr, uint8_t slave_address, uint8_t command, uint8_t *data, uint32_t len)</argsstring>
        <name>hpm_pmbus_master_write</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>slave_address</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>command</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
<para>Writes data to a PMBus slave device. </para>
        </briefdescription>
        <detaileddescription>
<para>function is used to send commands and data to a slave device over the I2C interface. It is primarily intended for communication with PMBus-compatible devices, allowing the host to send instructions and data to PMBus-compatible devices.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the base address of the I2C controller </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>slave_address</parametername>
</parameternamelist>
<parameterdescription>
<para>The 7-bit address of the slave device, used to address the slave device on the I2C bus </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>command</parametername>
</parameternamelist>
<parameterdescription>
<para>The command or register address to be sent to the slave device </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the data to be written to the slave device; the data will be written in order </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>len</parametername>
</parameternamelist>
<parameterdescription>
<para>The length of the data to be written, in bytes</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns the result of the write operation: HPM_STAT_SUCCESS indicates success, other values indicate different error states</para>
</simplesect>
Note: Before using this function, ensure that the I2C controller has been properly initialized, and the clock and interrupts (if needed) have also been configured. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="387" column="12" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="387" bodyend="418"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a94ff376d35a63808e01c2f9b96d74f8a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>hpm_stat_t hpm_pmbus_slave_command_transaction_install</definition>
        <argsstring>(I2C_Type *ptr, uint8_t command, uint8_t *wdata, uint8_t *rdata, uint32_t len, hpm_pmbus_complete_cb_t callback)</argsstring>
        <name>hpm_pmbus_slave_command_transaction_install</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>command</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>wdata</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>rdata</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>len</declname>
        </param>
        <param>
          <type><ref refid="hpm__pmbus_8h_1aae156c33adbdea23fcedfa7bc4c6f3f8" kindref="member">hpm_pmbus_complete_cb_t</ref></type>
          <declname>callback</declname>
        </param>
        <briefdescription>
<para>Installs a PMBus Slave Command Transaction. </para>
        </briefdescription>
        <detaileddescription>
<para>This function installs a PMBus slave command transaction for writing and reading data. The command is for the master, such as the read command, which is read for the master and write for the slave</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the base address of the I2C </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>command</parametername>
</parameternamelist>
<parameterdescription>
<para>PMBus command byte specifying the PMBus command to be sen </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>wdata</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the data to be written, containing the data to write to the slave </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rdata</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the buffer where the data read from the slave will be stored </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>len</parametername>
</parameternamelist>
<parameterdescription>
<para>Length of the data to be transferred, in bytes </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>callback</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the completion callback function that will be called when the transaction completes </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref> Returns the installation status of the transaction, indicating success or the reason for failure </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="420" column="12" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="420" bodyend="443"/>
      </memberdef>
      <memberdef kind="function" id="hpm__pmbus_8c_1a893126cb1465cc5f2d98841704f312ff" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref></type>
        <definition>hpm_stat_t hpm_pmbus_slave_command_transaction_uninstall</definition>
        <argsstring>(I2C_Type *ptr, uint8_t command)</argsstring>
        <name>hpm_pmbus_slave_command_transaction_uninstall</name>
        <param>
          <type><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref> *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>command</declname>
        </param>
        <briefdescription>
<para>Uninstalls a specified PMBus slave command transaction. </para>
        </briefdescription>
        <detaileddescription>
<para>This function is used to uninstall a PMBus slave command transaction to reduce unnecessary resource usage. In certain cases, if a specific slave command transaction is no longer needed, it can be uninstalled using this function to free up related resources.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the I2C </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>command</parametername>
</parameternamelist>
<parameterdescription>
<para>The PMBus command to uninstall. This parameter specifies the exact command to be uninstalled. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref> Returns the operation status, indicating whether the uninstallation was successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="components/pmbus/hpm_pmbus.c" line="445" column="12" bodyfile="components/pmbus/hpm_pmbus.c" bodystart="445" bodyend="454"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2024<sp/>HPMicro</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>BSD-3-Clause</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__pmbus_8h" kindref="compound">hpm_pmbus.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__pmbus__private_8h" kindref="compound">hpm_pmbus_private.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hpm__smbus_8h" kindref="compound">hpm_smbus.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12" refid="structhpm__pmbus__cfg__t" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*<ref refid="structhpm__pmbus__cfg__t_1a72e4c04f592f541dd28844af1df0db21" kindref="member">i2c_ptr</ref>;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref>;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref>;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/><ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__slave__cfg__t" kindref="compound">hpm_pmbus_slave_cfg_t</ref><sp/><ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[255];</highlight></codeline>
<codeline lineno="19"><highlight class="normal">}<sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref>;</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structhpm__pmbus__cmd__param__t" kindref="compound">hpm_pmbus_cmd_param_t</ref><sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[];</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/><ref refid="hpm__pmbus_8c_1a32eae3833319b171ea990560c970cb4b" kindref="member">hpm_pmbus_cfg_table</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc_8h_1abdf9eb4c9a8d0020b757b2b93c1d8d45" kindref="member">HPM_I2C0</ref>,</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc_8h_1abed1eace0e294c8c473186a3f581ffc0" kindref="member">HPM_I2C1</ref>,</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc_8h_1aee5ca70a47623892092c9787b5794f89" kindref="member">HPM_I2C2</ref>,</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM5300_2HPM5301_2hpm__soc_8h_1a0ad0f65676cee28cc248754e223b3af4" kindref="member">HPM_I2C3</ref>,</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C4)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM6E00_2HPM6E60_2hpm__soc_8h_1a9266228069b1f87297d6ed7744e6ff7a" kindref="member">HPM_I2C4</ref>,</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C5)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM6E00_2HPM6E60_2hpm__soc_8h_1a3a25c3024510d508a86319be79f52a0e" kindref="member">HPM_I2C5</ref>,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM6E00_2HPM6E60_2hpm__soc_8h_1ad37e0446d05176bd66273e7e0101d18e" kindref="member">HPM_I2C6</ref>,</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C7)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/><ref refid="HPM6E00_2HPM6E60_2hpm__soc_8h_1a2507fc98ef274f9ba596d262f38be5f6" kindref="member">HPM_I2C7</ref>,</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(HPM_I2C8)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.i2c_ptr<sp/>=<sp/>HPM_I2C8,</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.cmd_found<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.data_length<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal">};</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*<ref refid="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" kindref="member">hpm_pmbus_get_cfg_obj</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="99"><highlight class="normal">{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*obj;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>i<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="hpm__pmbus_8c_1a32eae3833319b171ea990560c970cb4b" kindref="member">hpm_pmbus_cfg_table</ref>)<sp/>/<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref>));<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj<sp/>=<sp/>&amp;<ref refid="hpm__pmbus_8c_1a32eae3833319b171ea990560c970cb4b" kindref="member">hpm_pmbus_cfg_table</ref>[i];</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a72e4c04f592f541dd28844af1df0db21" kindref="member">i2c_ptr</ref><sp/>==<sp/>ptr)<sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>obj;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="109"><highlight class="normal">}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" kindref="member">hpm_smbus_pec_crc8_in_command</ref>(uint8_t<sp/>slave_addr,<sp/>uint8_t<sp/>command,<sp/>uint8_t<sp/>*data,<sp/>uint32_t<sp/>len,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="hpm__serial__nor__host__spi_8c_1ab1010f3c4b433749dd56d20f9f8b5452" kindref="member">read</ref>,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>block)</highlight></codeline>
<codeline lineno="112"><highlight class="normal">{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>PEC<sp/>is<sp/>a<sp/>CRC-8<sp/>error-checking<sp/>byte,<sp/>calculated<sp/>on<sp/>all<sp/>the<sp/>message<sp/>bytes<sp/>(including<sp/>addresses<sp/>and<sp/>read/write<sp/>bits)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>i;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>crc<sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>crc<sp/>^=<sp/>(slave_addr<sp/>&lt;&lt;<sp/>1);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(crc<sp/>&amp;<sp/>0x80)<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>=<sp/>(crc<sp/>&lt;&lt;<sp/>1)<sp/>^<sp/>0x07;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>crc<sp/>^=<sp/>command;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(crc<sp/>&amp;<sp/>0x80)<sp/>{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>=<sp/>(crc<sp/>&lt;&lt;<sp/>1)<sp/>^<sp/>0x07;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__serial__nor__host__spi_8c_1ab1010f3c4b433749dd56d20f9f8b5452" kindref="member">read</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>^=<sp/>((slave_addr<sp/>&lt;&lt;<sp/>1)<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(crc<sp/>&amp;<sp/>0x80)<sp/>{</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>=<sp/>(crc<sp/>&lt;&lt;<sp/>1)<sp/>^<sp/>0x07;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(block<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>^=<sp/>len;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(crc<sp/>&amp;<sp/>0x80)<sp/>{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>=<sp/>(crc<sp/>&lt;&lt;<sp/>1)<sp/>^<sp/>0x07;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(len--)<sp/>{</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>^=<sp/>*data++;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(crc<sp/>&amp;<sp/>0x80)<sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>=<sp/>(crc<sp/>&lt;&lt;<sp/>1)<sp/>^<sp/>0x07;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>crc<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>crc;</highlight></codeline>
<codeline lineno="166"><highlight class="normal">}</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8c_1a72464f1d4b1e56952e8e183aa9847903" kindref="member">hpm_pmbus_isr_handler</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="169"><highlight class="normal">{</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/>uint32_t<sp/>status,<sp/>irq;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>pec<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>send_size;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd_code;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__complete__cb__cfg__t" kindref="compound">hpm_pmbus_complete_cb_cfg_t</ref><sp/>cfg;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>status<sp/>=<sp/><ref refid="group__i2c__interface_1ga975e4af1ae245576ca8a3a7459582b5f" kindref="member">i2c_get_status</ref>(ptr);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>irq<sp/>=<sp/><ref refid="group__i2c__interface_1ga84e04fded36984f3a23d2d7cac95dd59" kindref="member">i2c_get_irq_setting</ref>(ptr);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*obj<sp/>=<sp/><ref refid="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" kindref="member">hpm_pmbus_get_cfg_obj</ref>(ptr);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="HPM5300_2ip_2hpm__i2c__regs_8h_1a4b12b8c1020b84105fa3b8252e550bb8" kindref="member">I2C_SETUP_MASTER_GET</ref>(ptr)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>address<sp/>hit<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>&amp;<sp/><ref refid="group__i2c__interface_1ga996adc9125f9a49734ade0dd78a7cd71" kindref="member">I2C_EVENT_ADDRESS_HIT</ref>)<sp/>{</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__i2c__interface_1gac350a4154f2bb780c7e29b330339f88c" kindref="member">I2C_DIR_SLAVE_WRITE</ref><sp/>==<sp/><ref refid="group__i2c__interface_1ga9c79a6b06b86fae1ffed17e77db6d265" kindref="member">i2c_get_direction</ref>(ptr))<sp/>{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gadf46401b04438cbf57a380da22f9230d" kindref="member">i2c_enable_irq</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaafec08679095cc82d2d5a12cc335327e" kindref="member">i2c_clear_status</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga996adc9125f9a49734ade0dd78a7cd71" kindref="member">I2C_EVENT_ADDRESS_HIT</ref>);</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>receive<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((status<sp/>&amp;<sp/><ref refid="group__i2c__interface_1ga18c415b8ebf586c237d337fd2527d4a5" kindref="member">I2C_EVENT_BYTE_RECEIVED</ref>)<sp/>&amp;&amp;<sp/>(irq<sp/>&amp;<sp/><ref refid="group__i2c__interface_1ga18c415b8ebf586c237d337fd2527d4a5" kindref="member">I2C_EVENT_BYTE_RECEIVED</ref>))<sp/>{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaafec08679095cc82d2d5a12cc335327e" kindref="member">i2c_clear_status</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga18c415b8ebf586c237d337fd2527d4a5" kindref="member">I2C_EVENT_BYTE_RECEIVED</ref>);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_code<sp/>=<sp/><ref refid="group__i2c__interface_1gab870b908ecf3eef93b29b81763c2fdbc" kindref="member">i2c_read_byte</ref>(ptr);</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>if<sp/>the<sp/>command<sp/>is<sp/>valid<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[cmd_code].<ref refid="structhpm__pmbus__slave__cfg__t_1af7f763e8a8c1a034f36ed0ce3a5cc79f" kindref="member">is_valid</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Mark<sp/>that<sp/>the<sp/>command<sp/>has<sp/>been<sp/>found,<sp/>set<sp/>the<sp/>current<sp/>command<sp/>code<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref><sp/>=<sp/>cmd_code;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga984bfbaf552cbbcd3968e5e43497ef9a" kindref="member">I2C_CMD_ACK</ref>;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>a<sp/>NACK<sp/>response,<sp/>indicating<sp/>an<sp/>invalid<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga0ca785703eb12d53e1bb80154006dce7" kindref="member">I2C_CMD_NACK</ref>;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>command<sp/>has<sp/>been<sp/>found<sp/>and<sp/>the<sp/>data<sp/>length<sp/>is<sp/>within<sp/>the<sp/>expected<sp/>range<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>&amp;&amp;<sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>&lt;<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].data_length))<sp/>{</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>)<sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>++]<sp/>=<sp/><ref refid="group__i2c__interface_1gab870b908ecf3eef93b29b81763c2fdbc" kindref="member">i2c_read_byte</ref>(ptr);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>an<sp/>ACK<sp/>response,<sp/>indicating<sp/>successful<sp/>data<sp/>reception<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga984bfbaf552cbbcd3968e5e43497ef9a" kindref="member">I2C_CMD_ACK</ref>;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>a<sp/>NACK<sp/>response,<sp/>indicating<sp/>a<sp/>failure<sp/>in<sp/>storing<sp/>data<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga0ca785703eb12d53e1bb80154006dce7" kindref="member">I2C_CMD_NACK</ref>;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>has<sp/>pec<sp/>byte*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>&gt;=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].data_length)<sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>++]<sp/>=<sp/><ref refid="group__i2c__interface_1gab870b908ecf3eef93b29b81763c2fdbc" kindref="member">i2c_read_byte</ref>(ptr);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>an<sp/>ACK<sp/>response,<sp/>indicating<sp/>successful<sp/>data<sp/>reception<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga984bfbaf552cbbcd3968e5e43497ef9a" kindref="member">I2C_CMD_ACK</ref>;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gab870b908ecf3eef93b29b81763c2fdbc" kindref="member">i2c_read_byte</ref>(ptr);</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr-&gt;<ref refid="structI2C__Type_1a2361ba7630f662660ee3c43e84f63c41" kindref="member">CMD</ref><sp/>=<sp/><ref refid="group__i2c__interface_1ga0ca785703eb12d53e1bb80154006dce7" kindref="member">I2C_CMD_NACK</ref>;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>transmit<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((status<sp/>&amp;<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>)<sp/>&amp;&amp;<sp/>(irq<sp/>&amp;<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>))<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>&gt;=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].data_length)<sp/>||</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaac110912e42ce731435ebc5cda63f538" kindref="member">i2c_disable_irq</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!<ref refid="group__i2c__interface_1gab2fec1bdaaf6a96bf0e9e010f27e5dda" kindref="member">i2c_fifo_is_full</ref>(ptr))<sp/>{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>==<sp/>0)<sp/>&amp;&amp;<sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca8cad95eb12a6cdd1eaf7e6dc2ab7ad4d" kindref="member">read_block</ref>))<sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1ga25c50964cd228de22193f6ccc59ca721" kindref="member">i2c_write_byte</ref>(ptr,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1afd4825ddecff7d5627fff937385bef8b" kindref="member">data_length</ref>);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca8cad95eb12a6cdd1eaf7e6dc2ab7ad4d" kindref="member">read_block</ref>)<sp/>{</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send_size<sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1afd4825ddecff7d5627fff937385bef8b" kindref="member">data_length</ref>;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send_size<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].data_length;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>&lt;<sp/>send_size)<sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1ga25c50964cd228de22193f6ccc59ca721" kindref="member">i2c_write_byte</ref>(ptr,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a180d46f41d40841586070d02b4b43bc2" kindref="member">wdata</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>++]);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>==<sp/>send_size)<sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca8cad95eb12a6cdd1eaf7e6dc2ab7ad4d" kindref="member">read_block</ref>)<sp/>{</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>read<sp/>block,<sp/>pec<sp/>check<sp/>must<sp/>contain<sp/>length<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pec<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" kindref="member">hpm_smbus_pec_crc8_in_command</ref>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref>,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>,<sp/>&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a180d46f41d40841586070d02b4b43bc2" kindref="member">wdata</ref>[0],</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pec<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" kindref="member">hpm_smbus_pec_crc8_in_command</ref>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref>,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>,<sp/>&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a180d46f41d40841586070d02b4b43bc2" kindref="member">wdata</ref>[0],</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1ga25c50964cd228de22193f6ccc59ca721" kindref="member">i2c_write_byte</ref>(ptr,<sp/>pec);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>++;</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaac110912e42ce731435ebc5cda63f538" kindref="member">i2c_disable_irq</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>complete<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>&amp;<sp/><ref refid="group__i2c__interface_1gaf33bf093595b7cb0109d49b921d10af6" kindref="member">I2C_EVENT_TRANSACTION_COMPLETE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaac110912e42ce731435ebc5cda63f538" kindref="member">i2c_disable_irq</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga41a8212b3ef72470c6a2e17ed2cb418c" kindref="member">I2C_EVENT_FIFO_EMPTY</ref>);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gaafec08679095cc82d2d5a12cc335327e" kindref="member">i2c_clear_status</ref>(ptr,<sp/><ref refid="group__i2c__interface_1gaf33bf093595b7cb0109d49b921d10af6" kindref="member">I2C_EVENT_TRANSACTION_COMPLETE</ref>);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>the<sp/>slave<sp/>mode,<sp/>write-related<sp/>commands<sp/>are<sp/>read<sp/>operations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__i2c__interface_1ga868c938c391b8ffcfc4c259495c86628" kindref="member">I2C_DIR_SLAVE_READ</ref><sp/>==<sp/><ref refid="group__i2c__interface_1ga9c79a6b06b86fae1ffed17e77db6d265" kindref="member">i2c_get_direction</ref>(ptr))<sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>)<sp/>{</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].write_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca2404264202ebf0f5ba57f11fe6ea7027" kindref="member">write_block</ref>)<sp/>{</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>need<sp/>read<sp/>length<sp/>for<sp/>write_block<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref><sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref><sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[0];</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>==<sp/>(uint32_t)(<ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref><sp/>+<sp/>2))<sp/>{</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pec<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" kindref="member">hpm_smbus_pec_crc8_in_command</ref>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref>,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>,<sp/>&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[0],<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref><sp/>+<sp/>1,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[0],<sp/>&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[1],<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pec<sp/>!=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[<ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref><sp/>+<sp/>1])<sp/>{</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a6722ab2d77ff2a4920dc0145237c261a" kindref="member">pec_check</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a6722ab2d77ff2a4920dc0145237c261a" kindref="member">pec_check</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/><ref refid="group__nnactivation_1gaf8fd9ce16b371c8a3bf5e0b37a69419f" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].write_transaction_type)<sp/>{</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcaa67f66f4e26fdb3f293340b6066c14cc" kindref="member">write_word</ref>:</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca35a1625adb5c75b40fa826f84f39559d" kindref="member">write_byte</ref>:</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pec<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a714b38472ab95c6285d50649b174a888" kindref="member">hpm_smbus_pec_crc8_in_command</ref>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref>,<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>,<sp/>&amp;obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[0],<sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref><sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pec<sp/>!=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref><sp/>-<sp/>1])<sp/>{</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a6722ab2d77ff2a4920dc0145237c261a" kindref="member">pec_check</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a6722ab2d77ff2a4920dc0145237c261a" kindref="member">pec_check</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1ac86bcb8394c59d6689ae5738d58ad57c" kindref="member">data</ref><sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref>;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a5aec65b937b7b75444c4d2e8840fd68d" kindref="member">read</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1aa119599101fb3b01832ff12d51a1829f" kindref="member">data_length</ref>)<sp/>{</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca8cad95eb12a6cdd1eaf7e6dc2ab7ad4d" kindref="member">read_block</ref>)<sp/>{</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1afd4825ddecff7d5627fff937385bef8b" kindref="member">data_length</ref>;</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a8d969360d79a1abf260e32ac0e7c58b4" kindref="member">len</ref><sp/>=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].data_length;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1ac86bcb8394c59d6689ae5738d58ad57c" kindref="member">data</ref><sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a180d46f41d40841586070d02b4b43bc2" kindref="member">wdata</ref>;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a5aec65b937b7b75444c4d2e8840fd68d" kindref="member">read</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1a6722ab2d77ff2a4920dc0145237c261a" kindref="member">pec_check</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="structhpm__pmbus__complete__cb__cfg__t_1ac28527fb3c97784fcc9ebfffb262bc45" kindref="member">command</ref><sp/>=<sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a639b1dc8d37680e8911caf8bb597f06e" kindref="member">callback</ref><sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ab4937ce8e16274e7aa4e8abaa8c7e61a" kindref="member">command_code</ref>].<ref refid="structhpm__pmbus__slave__cfg__t_1a639b1dc8d37680e8911caf8bb597f06e" kindref="member">callback</ref>(ptr,<sp/>&amp;cfg);</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a4093a512da83623bb808096e7faa6f55" kindref="member">cmd_found</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="338"><highlight class="normal">}</highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__pmbus_8c_1a8902b3a7d992a8e8a68e316229f3d7d5" kindref="member">hpm_pmbus_slave_init</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>slave_addr)</highlight></codeline>
<codeline lineno="341"><highlight class="normal">{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>sta<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*obj<sp/>=<sp/><ref refid="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" kindref="member">hpm_pmbus_get_cfg_obj</ref>(ptr);</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>));</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1a16d866dcd8ee95edb60b1891fd7822d0" kindref="member">slave_addr</ref><sp/>=<sp/>slave_addr;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1gadf46401b04438cbf57a380da22f9230d" kindref="member">i2c_enable_irq</ref>(ptr,<sp/><ref refid="group__i2c__interface_1ga996adc9125f9a49734ade0dd78a7cd71" kindref="member">I2C_EVENT_ADDRESS_HIT</ref><sp/>|<sp/><ref refid="group__i2c__interface_1gaf33bf093595b7cb0109d49b921d10af6" kindref="member">I2C_EVENT_TRANSACTION_COMPLETE</ref>);</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__i2c__interface_1ga545b31bccac78bef160f223ad2494c1b" kindref="member">i2c_enable_auto_ack</ref>(ptr);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sta;</highlight></codeline>
<codeline lineno="352"><highlight class="normal">}</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__pmbus_8c_1a529f7ff8b3280afbe271ea2bbbbd3248" kindref="member">hpm_pmbus_master_read</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>slave_address,<sp/>uint8_t<sp/>command,<sp/>uint8_t<sp/>*data,<sp/>uint32_t<sp/>*len)</highlight></codeline>
<codeline lineno="355"><highlight class="normal">{</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cmd__param__t" kindref="compound">hpm_pmbus_cmd_param_t</ref><sp/>para;</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>sta<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>para<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command];</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(para.<ref refid="structhpm__pmbus__cmd__param__t_1aadde6ee1b3362d68795a0941783ca7ff" kindref="member">read_transaction_type</ref>)<sp/>{</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca55adc67d1e33f04a564337bc2741cf4b" kindref="member">read_byte</ref>:</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1ac300e27e934afcde45d447211dc67dc4" kindref="member">hpm_smbus_master_read_byte_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>data);</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*len<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcaeaaf9715fe64b1b3d28a975e06bb9563" kindref="member">read_word</ref>:</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1a15bf2b934ef3f389de089bf714da6ff6" kindref="member">hpm_smbus_master_read_word_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>(uint16_t<sp/>*)data);</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*len<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca8cad95eb12a6cdd1eaf7e6dc2ab7ad4d" kindref="member">read_block</ref>:</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(para.<ref refid="structhpm__pmbus__cmd__param__t_1a1f4466959ad696241f3295708a5236aa" kindref="member">data_length</ref><sp/>!=<sp/>0xFFFFFFFF)<sp/>{</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1ad3aea6d1d21edc7be3ef03916082b794" kindref="member">hpm_smbus_master_read_block_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>data,<sp/>para.<ref refid="structhpm__pmbus__cmd__param__t_1a1f4466959ad696241f3295708a5236aa" kindref="member">data_length</ref>);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*len<sp/>=<sp/>para.<ref refid="structhpm__pmbus__cmd__param__t_1a1f4466959ad696241f3295708a5236aa" kindref="member">data_length</ref>;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1ad3aea6d1d21edc7be3ef03916082b794" kindref="member">hpm_smbus_master_read_block_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>data,<sp/>*len);</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca5420b4b9f7fb997eb215dc271a2cfe6d" kindref="member">mfr_defined</ref>:</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca521a00a1e11617a9ff2a87149439eadd" kindref="member">extended_command</ref>:</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__pmbus_8h_1a3f6bc4f8848e6f16b2ed7149a68c04b7a79a1698d05bc982e7fcae8ff01de51d1" kindref="member">status_pmbus_not_support_cmd</ref>;</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__pmbus_8h_1a3f6bc4f8848e6f16b2ed7149a68c04b7ac9326e19d51068986dab3f7cdd2c0eeb" kindref="member">status_pmbus_not_transaction_type</ref>;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sta;</highlight></codeline>
<codeline lineno="385"><highlight class="normal">}</highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__pmbus_8c_1ab47d0a55e344dbd60d5dfb58051aff95" kindref="member">hpm_pmbus_master_write</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>slave_address,<sp/>uint8_t<sp/>command,<sp/>uint8_t<sp/>*data,<sp/>uint32_t<sp/>len)</highlight></codeline>
<codeline lineno="388"><highlight class="normal">{</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cmd__param__t" kindref="compound">hpm_pmbus_cmd_param_t</ref><sp/>para;</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>sta<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/>para<sp/>=<sp/><ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command];</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(para.<ref refid="structhpm__pmbus__cmd__param__t_1a347f40747d1267fe43d99a1505ae7bfc" kindref="member">write_transaction_type</ref>)<sp/>{</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcae3e9faa36631033ac2d4478ce75d2e7e" kindref="member">send_byte</ref>:</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1ae3889d9d441879578ace9ce101807165" kindref="member">hpm_smbus_master_write_byte</ref>(ptr,<sp/>slave_address,<sp/>command);</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca35a1625adb5c75b40fa826f84f39559d" kindref="member">write_byte</ref>:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1a9351b65495ec2e512928b5086fefc888" kindref="member">hpm_smbus_master_write_byte_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>*data);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcaa67f66f4e26fdb3f293340b6066c14cc" kindref="member">write_word</ref>:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1a310c20ad20d8e52fcf2fd8725e8a042d" kindref="member">hpm_smbus_master_write_word_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>*(uint16_t<sp/>*)data);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca2404264202ebf0f5ba57f11fe6ea7027" kindref="member">write_block</ref>:</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(para.<ref refid="structhpm__pmbus__cmd__param__t_1a1f4466959ad696241f3295708a5236aa" kindref="member">data_length</ref><sp/>!=<sp/>0xFFFFFFFF)<sp/>{</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1a54e7e3782bd74d54638a3b5859668db8" kindref="member">hpm_smbus_master_write_block_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>data,<sp/>para.<ref refid="structhpm__pmbus__cmd__param__t_1a1f4466959ad696241f3295708a5236aa" kindref="member">data_length</ref>);</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__smbus_8c_1a54e7e3782bd74d54638a3b5859668db8" kindref="member">hpm_smbus_master_write_block_in_command</ref>(ptr,<sp/>slave_address,<sp/>command,<sp/>data,<sp/>len);</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca5420b4b9f7fb997eb215dc271a2cfe6d" kindref="member">mfr_defined</ref>:</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca521a00a1e11617a9ff2a87149439eadd" kindref="member">extended_command</ref>:</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__pmbus_8h_1a3f6bc4f8848e6f16b2ed7149a68c04b7a79a1698d05bc982e7fcae8ff01de51d1" kindref="member">status_pmbus_not_support_cmd</ref>;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sta<sp/>=<sp/><ref refid="hpm__pmbus_8h_1a3f6bc4f8848e6f16b2ed7149a68c04b7ac9326e19d51068986dab3f7cdd2c0eeb" kindref="member">status_pmbus_not_transaction_type</ref>;</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sta;</highlight></codeline>
<codeline lineno="418"><highlight class="normal">}</highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__pmbus_8c_1a94ff376d35a63808e01c2f9b96d74f8a" kindref="member">hpm_pmbus_slave_command_transaction_install</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>command,<sp/>uint8_t<sp/>*wdata,<sp/>uint8_t<sp/>*rdata,<sp/>uint32_t<sp/>len,<sp/><ref refid="hpm__pmbus_8h_1aae156c33adbdea23fcedfa7bc4c6f3f8" kindref="member">hpm_pmbus_complete_cb_t</ref><sp/>callback)</highlight></codeline>
<codeline lineno="421"><highlight class="normal">{</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*obj<sp/>=<sp/><ref refid="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" kindref="member">hpm_pmbus_get_cfg_obj</ref>(ptr);</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((obj<sp/>==<sp/>NULL)<sp/>||</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].write_transaction_type<sp/>!=<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcab7e4e0120a041dbe6528b050c04269e0" kindref="member">none</ref>)<sp/>&amp;&amp;<sp/>(rdata<sp/>==<sp/>NULL))<sp/>||</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].read_transaction_type<sp/>!=<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dcab7e4e0120a041dbe6528b050c04269e0" kindref="member">none</ref>)<sp/>&amp;&amp;<sp/>(wdata<sp/>==<sp/>NULL))<sp/>||</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].data_length<sp/>!=<sp/>0xFFFFFFFF)<sp/>&amp;&amp;<sp/>(len<sp/>&lt;<sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].data_length<sp/>+<sp/>1))))<sp/>{</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>included<sp/>pec<sp/>byte,<sp/>So<sp/>the<sp/>length<sp/>needs<sp/>to<sp/>be<sp/>increased<sp/>by<sp/>1<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].write_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca5420b4b9f7fb997eb215dc271a2cfe6d" kindref="member">mfr_defined</ref>)<sp/>||</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca5420b4b9f7fb997eb215dc271a2cfe6d" kindref="member">mfr_defined</ref>)<sp/>||</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].write_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca521a00a1e11617a9ff2a87149439eadd" kindref="member">extended_command</ref>)<sp/>||</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="hpm__pmbus_8c_1a5b31d7704122037fdc73694579b7a517" kindref="member">pmbus_cmd_param_table</ref>[command].read_transaction_type<sp/>==<sp/><ref refid="hpm__pmbus_8h_1ac6faa3bf66b474647c7b92d3289130dca521a00a1e11617a9ff2a87149439eadd" kindref="member">extended_command</ref>))<sp/>{</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="hpm__pmbus_8h_1a3f6bc4f8848e6f16b2ed7149a68c04b7a79a1698d05bc982e7fcae8ff01de51d1" kindref="member">status_pmbus_not_support_cmd</ref>;</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1af7f763e8a8c1a034f36ed0ce3a5cc79f" kindref="member">is_valid</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1a180d46f41d40841586070d02b4b43bc2" kindref="member">wdata</ref><sp/>=<sp/>wdata;</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1a4dae29460929757801ac4bf76671a99b" kindref="member">rdata</ref><sp/>=<sp/>rdata;</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1afd4825ddecff7d5627fff937385bef8b" kindref="member">data_length</ref><sp/>=<sp/>len;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1a639b1dc8d37680e8911caf8bb597f06e" kindref="member">callback</ref><sp/>=<sp/>callback;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="443"><highlight class="normal">}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/><ref refid="hpm__pmbus_8c_1a893126cb1465cc5f2d98841704f312ff" kindref="member">hpm_pmbus_slave_command_transaction_uninstall</ref>(<ref refid="structI2C__Type" kindref="compound">I2C_Type</ref><sp/>*ptr,<sp/>uint8_t<sp/>command)</highlight></codeline>
<codeline lineno="446"><highlight class="normal">{</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__common__interface_1ga087efae82a4b174a0363363d9d5ece19" kindref="member">hpm_stat_t</ref><sp/>stat<sp/>=<sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa99d8737a9b635c0c9d87d7ac65801ce7" kindref="member">status_success</ref>;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structhpm__pmbus__cfg__t" kindref="compound">hpm_pmbus_cfg_t</ref><sp/>*obj<sp/>=<sp/><ref refid="hpm__pmbus_8c_1afce278d020873135e08c25e65fc52db1" kindref="member">hpm_pmbus_get_cfg_obj</ref>(ptr);</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obj<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__common__interface_1gga57008dafb69438605b6d0039d9ed7a8fa380c9b8304ad8399f1be634d6f5c4701" kindref="member">status_invalid_argument</ref>;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>obj-&gt;<ref refid="structhpm__pmbus__cfg__t_1ad408a097ef002798253381be2479f20b" kindref="member">slave_conf</ref>[command].<ref refid="structhpm__pmbus__slave__cfg__t_1af7f763e8a8c1a034f36ed0ce3a5cc79f" kindref="member">is_valid</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="454"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="components/pmbus/hpm_pmbus.c"/>
  </compounddef>
</doxygen>
