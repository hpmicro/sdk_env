.. _usbx_composite_dual_cdc_acm:

USBX 双CDC ACM复合设备
==================================

概述
------

该工程实现了一个有两个CDC ACM接口的USB设备。当设备被连接到电脑时，可以在电脑上发现两个新的串口设备。可以通过串口助手去操作它们。

硬件设置
------------

- 使用USB Type-C线缆连接PC USB端口和PWR DEBUG端口

- 使用USB Type-C线缆连接PC USB端口和开发板USB0端口

运行现象
------------

连接设备到电脑上，可以在设备管理器中发现两个新的串口设备。使用串口助手同时打开这两个串口设备，然后向其发送数据。接口0会在每次接收到数据后回复："123456\n"，接口1会在每次接收到数据后回复"abcdef\n"。
当工程正确运行后，串口终端会输出如下信息：

.. code-block:: console

   ----------------------------------------------------------------------
   $$\   $$\ $$$$$$$\  $$\      $$\ $$\
   $$ |  $$ |$$  __$$\ $$$\    $$$ |\__|
   $$ |  $$ |$$ |  $$ |$$$$\  $$$$ |$$\  $$$$$$$\  $$$$$$\   $$$$$$\
   $$$$$$$$ |$$$$$$$  |$$\$$\$$ $$ |$$ |$$  _____|$$  __$$\ $$  __$$\
   $$  __$$ |$$  ____/ $$ \$$$  $$ |$$ |$$ /      $$ |  \__|$$ /  $$ |
   $$ |  $$ |$$ |      $$ |\$  /$$ |$$ |$$ |      $$ |      $$ |  $$ |
   $$ |  $$ |$$ |      $$ | \_/ $$ |$$ |\$$$$$$$\ $$ |      \$$$$$$  |
   \__|  \__|\__|      \__|     \__|\__| \_______|\__|       \______/
   ----------------------------------------------------------------------
   Start USBX device composite example...
   CDC ACM1 device activate
   CDC ACM2 device activate


当我们向设备接口0发送数据时， 主机会收到刚刚发送给设备的消息和一个字符串 "123456\r\n"

当我们向设备接口1发送数据时， 主机会收到刚刚发送给设备的消息和一个字符串 "abcdef\r\n"

同时，设备的串口会输出"SEND: " + 发送的内容:

.. code-block:: console

   SEND: 123abcdef

   SEND: 345abcdef

